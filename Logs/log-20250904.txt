2025-09-04 08:46:21.342 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 08:46:21.468 +01:00 [DBG] Hosting starting
2025-09-04 08:46:21.516 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 08:46:21.532 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 08:46:21.577 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 08:46:21.597 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 08:46:21.605 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 08:46:21.610 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 08:46:21.614 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 08:46:21.622 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 08:46:21.625 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 08:46:21.630 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 08:46:21.633 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 08:46:21.642 +01:00 [DBG] Middleware loaded
2025-09-04 08:46:21.648 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 08:46:21.652 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 08:46:21.836 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 08:46:21.841 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 08:46:21.857 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 08:46:21.996 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 08:46:22.000 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 08:46:22.002 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 08:46:22.005 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 08:46:22.006 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 08:46:22.007 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 08:46:22.017 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 08:46:22.028 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 08:46:22.073 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 08:46:22.076 +01:00 [INF] Hosting environment: Development
2025-09-04 08:46:22.078 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 08:46:22.080 +01:00 [DBG] Hosting started
2025-09-04 08:48:14.249 +01:00 [DBG] Connection id "0HNFBGTJKIQH5" accepted.
2025-09-04 08:48:14.288 +01:00 [DBG] Connection id "0HNFBGTJKIQH5" started.
2025-09-04 08:48:14.527 +01:00 [DBG] Connection 0HNFBGTJKIQH5 established using the following protocol: "Tls13"
2025-09-04 08:48:14.739 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 08:48:15.000 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 08:48:15.005 +01:00 [DBG] Request did not match any endpoints
2025-09-04 08:48:15.079 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 08:48:15.084 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 08:48:15.094 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 08:48:15.107 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 08:48:15.109 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 08:48:15.143 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 08:48:15.144 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 423.2446ms
2025-09-04 08:48:15.181 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 08:48:15.184 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 39.9961ms
2025-09-04 08:48:15.232 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 123.0106ms
2025-09-04 08:48:15.261 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 08:48:15.268 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 08:48:15.271 +01:00 [DBG] Request did not match any endpoints
2025-09-04 08:48:15.400 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 138.9969ms
2025-09-04 08:48:29.175 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 08:48:29.199 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 08:48:29.204 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 08:48:29.431 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 08:48:29.446 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 08:48:29.456 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 08:48:29.470 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 08:48:29.476 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 300.1579ms
2025-09-04 09:09:42.974 +01:00 [DBG] Connection id "0HNFBGTJKIQH5" received FIN.
2025-09-04 09:09:43.007 +01:00 [DBG] Connection id "0HNFBGTJKIQH5" is closed. The last processed stream ID was 9.
2025-09-04 09:09:43.013 +01:00 [DBG] Connection id "0HNFBGTJKIQH5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 09:09:43.018 +01:00 [DBG] The connection queue processing loop for 0HNFBGTJKIQH5 completed.
2025-09-04 09:09:43.028 +01:00 [DBG] Connection id "0HNFBGTJKIQH5" stopped.
2025-09-04 09:24:21.090 +01:00 [DBG] Connection id "0HNFBGTJKIQH6" accepted.
2025-09-04 09:24:21.126 +01:00 [DBG] Connection id "0HNFBGTJKIQH6" started.
2025-09-04 09:24:21.143 +01:00 [DBG] Connection 0HNFBGTJKIQH6 established using the following protocol: "Tls13"
2025-09-04 09:24:21.154 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 62
2025-09-04 09:24:21.172 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 09:24:21.179 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 09:24:21.188 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 09:24:21.198 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 09:24:21.206 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 09:24:21.222 +01:00 [DBG] Connection id "0HNFBGTJKIQH6", Request id "0HNFBGTJKIQH6:00000001": started reading request body.
2025-09-04 09:24:21.231 +01:00 [DBG] Connection id "0HNFBGTJKIQH6", Request id "0HNFBGTJKIQH6:00000001": done reading request body.
2025-09-04 09:24:21.501 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 09:24:22.161 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 09:24:22.166 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 09:24:22.295 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 09:24:22.485 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 09:24:22.597 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 09:24:22.904 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 09:24:22.965 +01:00 [DBG] Creating DbConnection.
2025-09-04 09:24:23.001 +01:00 [DBG] Created DbConnection. (34ms).
2025-09-04 09:24:23.009 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:24:23.455 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:24:23.469 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 09:24:23.484 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (14ms).
2025-09-04 09:24:23.510 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (40ms).
2025-09-04 09:24:23.533 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 09:24:23.655 +01:00 [INF] Executed DbCommand (129ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 09:24:23.703 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 09:24:23.747 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:24:23.762 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 95ms reading results.
2025-09-04 09:24:23.771 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:24:23.780 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (9ms).
2025-09-04 09:24:23.899 +01:00 [DBG] Invalid password for user.
2025-09-04 09:24:23.907 +01:00 [INF] Setting HTTP status code 400.
2025-09-04 09:24:23.914 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-04 09:24:23.927 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 09:24:23.934 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 09:24:23.942 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:24:23.948 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-04 09:24:23.950 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null application/json; charset=utf-8 2796.8502ms
2025-09-04 09:27:26.921 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 94
2025-09-04 09:27:26.955 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-04 09:27:26.965 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-04 09:27:26.976 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 09:27:26.985 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 09:27:26.993 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-04 09:27:27.004 +01:00 [DBG] Connection id "0HNFBGTJKIQH6", Request id "0HNFBGTJKIQH6:00000003": started reading request body.
2025-09-04 09:27:27.016 +01:00 [DBG] Connection id "0HNFBGTJKIQH6", Request id "0HNFBGTJKIQH6:00000003": done reading request body.
2025-09-04 09:27:27.279 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 09:27:27.288 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-04 09:27:27.309 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 09:27:27.318 +01:00 [DBG] Creating DbConnection.
2025-09-04 09:27:27.320 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-04 09:27:27.325 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.328 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.329 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 09:27:27.331 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 09:27:27.332 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 09:27:27.334 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-04 09:27:27.361 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-04 09:27:27.375 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.383 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-09-04 09:27:27.392 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.401 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (8ms).
2025-09-04 09:27:27.421 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.430 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.434 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 09:27:27.435 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 09:27:27.438 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-04 09:27:27.440 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 09:27:27.446 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 09:27:27.449 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.451 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-04 09:27:27.454 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.456 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-04 09:27:27.483 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 09:27:27.494 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 09:27:27.501 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-04 09:27:27.507 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-04 09:27:27.529 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-04 09:27:27.624 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.628 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.632 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 09:27:27.634 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-04 09:27:27.639 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-04 09:27:27.642 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-09-04 09:27:27.648 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-09-04 09:27:27.654 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.657 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-04 09:27:27.659 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.661 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-04 09:27:27.671 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 09:27:27.676 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-04 09:27:27.679 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 09:27:27.682 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-04 09:27:27.685 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-04 09:27:27.688 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 09:27:27.691 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:27:27.693 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-04 09:27:27.695 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 775.4276ms
2025-09-04 09:28:06.902 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 60
2025-09-04 09:28:06.914 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 09:28:06.917 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 09:28:06.919 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 09:28:06.920 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 09:28:06.921 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 09:28:06.922 +01:00 [DBG] Connection id "0HNFBGTJKIQH6", Request id "0HNFBGTJKIQH6:00000005": started reading request body.
2025-09-04 09:28:06.923 +01:00 [DBG] Connection id "0HNFBGTJKIQH6", Request id "0HNFBGTJKIQH6:00000005": done reading request body.
2025-09-04 09:28:06.946 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 09:28:06.954 +01:00 [DBG] Creating DbConnection.
2025-09-04 09:28:06.956 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-04 09:28:06.958 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:28:06.961 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:28:06.964 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 09:28:06.965 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 09:28:06.967 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-04 09:28:06.968 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 09:28:06.977 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 09:28:06.982 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 09:28:06.984 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:28:06.985 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-04 09:28:06.987 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:28:06.989 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-04 09:28:07.126 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 09:28:07.132 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 09:28:07.137 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 09:28:07.139 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 09:28:07.141 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 09:28:07.143 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-04 09:28:07.147 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 245.0082ms
2025-09-04 09:39:42.979 +01:00 [DBG] Connection id "0HNFBGTJKIQH6" received FIN.
2025-09-04 09:39:43.026 +01:00 [DBG] Connection id "0HNFBGTJKIQH6" is closed. The last processed stream ID was 5.
2025-09-04 09:39:43.063 +01:00 [DBG] The connection queue processing loop for 0HNFBGTJKIQH6 completed.
2025-09-04 09:39:43.074 +01:00 [DBG] Connection id "0HNFBGTJKIQH6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 09:39:43.083 +01:00 [DBG] Connection id "0HNFBGTJKIQH6" stopped.
2025-09-04 10:21:06.954 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 10:21:07.310 +01:00 [DBG] Hosting starting
2025-09-04 10:21:07.362 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 10:21:07.386 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 10:21:07.443 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 10:21:07.470 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 10:21:07.486 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 10:21:07.498 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 10:21:07.505 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 10:21:07.520 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 10:21:07.530 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 10:21:07.539 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 10:21:07.547 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 10:21:07.566 +01:00 [DBG] Middleware loaded
2025-09-04 10:21:07.576 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 10:21:07.583 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 10:21:07.814 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 10:21:07.821 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 10:21:07.842 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 10:21:08.123 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 10:21:08.129 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 10:21:08.134 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 10:21:08.136 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 10:21:08.139 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 10:21:08.141 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 10:21:08.154 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 10:21:08.172 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 10:21:08.226 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 10:21:08.229 +01:00 [INF] Hosting environment: Development
2025-09-04 10:21:08.234 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 10:21:08.238 +01:00 [DBG] Hosting started
2025-09-04 10:21:17.896 +01:00 [DBG] Connection id "0HNFBIHJMDF93" accepted.
2025-09-04 10:21:17.903 +01:00 [DBG] Connection id "0HNFBIHJMDF93" started.
2025-09-04 10:21:18.007 +01:00 [DBG] Connection 0HNFBIHJMDF93 established using the following protocol: "Tls13"
2025-09-04 10:21:18.120 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 60
2025-09-04 10:21:18.216 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:21:18.224 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:18.281 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:21:18.430 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:21:18.439 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:18.454 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000001": started reading request body.
2025-09-04 10:21:18.461 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000001": done reading request body.
2025-09-04 10:21:18.716 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 10:21:19.873 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 10:21:19.882 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 10:21:20.193 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 10:21:20.464 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:21:20.672 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 10:21:21.364 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 10:21:21.485 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:21:21.531 +01:00 [DBG] Created DbConnection. (41ms).
2025-09-04 10:21:21.542 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:22.116 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:22.129 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:21:22.151 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-09-04 10:21:22.177 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (48ms).
2025-09-04 10:21:22.205 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:22.371 +01:00 [INF] Executed DbCommand (171ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:22.475 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:21:22.572 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:22.592 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 201ms reading results.
2025-09-04 10:21:22.605 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:22.621 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (15ms).
2025-09-04 10:21:22.893 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 10:21:22.904 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 10:21:22.915 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:22.931 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:21:22.943 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:22.953 +01:00 [DBG] Disposed connection to database '' on server '' (9ms).
2025-09-04 10:21:22.961 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 4851.5668ms
2025-09-04 10:21:30.307 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 60
2025-09-04 10:21:30.322 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:21:30.329 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:30.334 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:21:30.338 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:21:30.344 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:30.350 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000003": started reading request body.
2025-09-04 10:21:30.355 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000003": done reading request body.
2025-09-04 10:21:30.476 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:21:30.491 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:21:30.496 +01:00 [DBG] Created DbConnection. (4ms).
2025-09-04 10:21:30.501 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:30.509 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:30.516 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:21:30.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-04 10:21:30.528 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-04 10:21:30.535 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:30.569 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:30.587 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:21:30.597 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:30.604 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-09-04 10:21:30.612 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:30.619 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-04 10:21:30.810 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 10:21:30.815 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 10:21:30.821 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:30.825 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:21:30.828 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:30.832 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-04 10:21:30.836 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 528.6261ms
2025-09-04 10:21:34.194 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 60
2025-09-04 10:21:34.204 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:21:34.209 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:34.215 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:21:34.225 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:21:34.230 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:34.236 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000005": started reading request body.
2025-09-04 10:21:34.243 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000005": done reading request body.
2025-09-04 10:21:34.288 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:21:34.300 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:21:34.304 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-04 10:21:34.309 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:34.315 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:34.322 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:21:34.327 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-04 10:21:34.334 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-04 10:21:34.341 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:34.352 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:34.362 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:21:34.369 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:34.375 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-04 10:21:34.383 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:34.389 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-04 10:21:34.598 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 10:21:34.604 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 10:21:34.607 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:34.612 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:21:34.616 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:34.622 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-04 10:21:34.626 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 432.8676ms
2025-09-04 10:21:38.922 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 60
2025-09-04 10:21:38.931 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:21:38.936 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:38.940 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:21:38.943 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:21:38.948 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:38.953 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000007": started reading request body.
2025-09-04 10:21:38.959 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000007": done reading request body.
2025-09-04 10:21:38.968 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:21:38.979 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:21:38.983 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-04 10:21:38.988 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:38.994 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:39.001 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:21:39.006 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-04 10:21:39.012 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-04 10:21:39.019 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:39.031 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:21:39.042 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:21:39.048 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:39.055 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-04 10:21:39.062 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:39.069 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-04 10:21:39.256 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 10:21:39.260 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 10:21:39.265 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:21:39.270 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:21:39.274 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:21:39.278 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-04 10:21:39.283 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 361.8108ms
2025-09-04 10:22:07.860 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 10:22:07.915 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 10:22:07.921 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 10:22:07.939 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:22:07.953 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 10:22:07.967 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 10:22:07.983 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 10:22:07.989 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 129.0285ms
2025-09-04 10:22:49.655 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 10:22:49.874 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 10:22:49.880 +01:00 [DBG] Request did not match any endpoints
2025-09-04 10:22:50.006 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 10:22:50.014 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 10:22:50.041 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 10:22:50.044 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 10:22:50.047 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 392.9525ms
2025-09-04 10:22:50.056 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 10:22:50.053 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 10:22:50.111 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 10:22:50.115 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 62.0993ms
2025-09-04 10:22:50.159 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.9078ms
2025-09-04 10:22:50.405 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 10:22:50.421 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 10:22:50.424 +01:00 [DBG] Request did not match any endpoints
2025-09-04 10:22:50.675 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 269.4795ms
2025-09-04 10:26:02.396 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 10:26:02.420 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 10:26:02.426 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 10:26:02.484 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-04 10:26:02.533 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-04 10:26:02.539 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 10:26:02.544 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 10:26:02.552 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 10:26:02.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 160.901ms
2025-09-04 10:26:27.005 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/Employee - null null
2025-09-04 10:26:27.032 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Employee'
2025-09-04 10:26:27.039 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)' with route pattern 'api/Employee' is valid for the request path '/api/Employee'
2025-09-04 10:26:27.046 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:27.051 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-04 10:26:27.061 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-04 10:26:27.066 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:27.115 +01:00 [INF] Route matched with {action = "GetAll", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CMSApi.Application.DTO.EmployeeDto.EmployeeResponseDto]]] GetAll() on controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi).
2025-09-04 10:26:27.126 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-04 10:26:27.134 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-04 10:26:27.142 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-04 10:26:27.151 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-04 10:26:27.159 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-04 10:26:27.169 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi)
2025-09-04 10:26:27.179 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:26:27.393 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi)
2025-09-04 10:26:27.446 +01:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .Include(e => e.Department)
    .Select(e => new EmployeeResponseDto{ 
        Id = e.Id, 
        Fullname = string.Format(
            format: "{0} {1} {2}", 
            arg0: e.Firstname, 
            arg1: e.Middlename, 
            arg2: e.Lastname), 
        Gender = e.Gender, 
        Email = e.Email, 
        Phone = e.Phone, 
        DOB = e.DOB, 
        Role = e.Role, 
        DeptId = e.DeptId, 
        DeptName = e.Department.DeptName 
    }
    )'
2025-09-04 10:26:27.624 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<EmployeeResponseDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> 9
            10 -> 10
        SELECT e.Id, e.Firstname, e.Middlename, e.Lastname, e.Gender, e.Email, e.Phone, e.DOB, e.Role, e.DeptId, d.DeptName
        FROM Employees AS e
        LEFT JOIN Departments AS d ON e.DeptId == d.DeptId) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> 9
            10 -> 10
        SELECT e.Id, e.Firstname, e.Middlename, e.Lastname, e.Gender, e.Email, e.Phone, e.DOB, e.Role, e.DeptId, d.DeptName
        FROM Employees AS e
        LEFT JOIN Departments AS d ON e.DeptId == d.DeptId, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        int? value1;
        string value2;
        string value3;
        string value4;
        string value5;
        string value6;
        string value7;
        DateOnly? value8;
        string value9;
        int? value10;
        string value11;
        value1 = (int?)dataReader.GetInt32(0);
        value2 = dataReader.GetString(1);
        value3 = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
        value4 = dataReader.GetString(3);
        value5 = dataReader.GetString(4);
        value6 = dataReader.GetString(5);
        value7 = dataReader.GetString(6);
        value8 = (DateOnly?)dataReader.GetFieldValue<DateOnly>(7);
        value9 = dataReader.GetString(8);
        value10 = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
        value11 = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
        return new EmployeeResponseDto{ 
            Id = (int)value1, 
            Fullname = string.Format(
                format: "{0} {1} {2}", 
                arg0: value2, 
                arg1: value3, 
                arg2: value4), 
            Gender = value5, 
            Email = value6, 
            Phone = value7, 
            DOB = (DateOnly)value8, 
            Role = value9, 
            DeptId = value10, 
            DeptName = value11 
        }
        ;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-04 10:26:27.638 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:26:27.643 +01:00 [DBG] Created DbConnection. (4ms).
2025-09-04 10:26:27.648 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:27.655 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:27.661 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:26:27.666 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-04 10:26:27.672 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-04 10:26:27.680 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Firstname], [e].[Middlename], [e].[Lastname], [e].[Gender], [e].[Email], [e].[Phone], [e].[DOB], [e].[Role], [e].[DeptId], [d].[DeptName]
FROM [Employees] AS [e]
LEFT JOIN [Departments] AS [d] ON [e].[DeptId] = [d].[DeptId]
2025-09-04 10:26:27.704 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Firstname], [e].[Middlename], [e].[Lastname], [e].[Gender], [e].[Email], [e].[Phone], [e].[DOB], [e].[Role], [e].[DeptId], [d].[DeptName]
FROM [Employees] AS [e]
LEFT JOIN [Departments] AS [d] ON [e].[DeptId] = [d].[DeptId]
2025-09-04 10:26:27.720 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:27.727 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-09-04 10:26:27.736 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:27.742 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-04 10:26:27.760 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-04 10:26:27.776 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-09-04 10:26:27.786 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-09-04 10:26:27.793 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-04 10:26:27.797 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-04 10:26:27.804 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-04 10:26:27.810 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CMSApi.Application.DTO.EmployeeDto.EmployeeResponseDto, CMSApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-04 10:26:27.853 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi) in 678.1802ms
2025-09-04 10:26:27.860 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:27.865 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:26:27.871 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:27.876 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-04 10:26:27.884 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/Employee - 200 null application/json; charset=utf-8 878.7676ms
2025-09-04 10:26:39.096 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/Employee - null null
2025-09-04 10:26:39.115 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Employee'
2025-09-04 10:26:39.120 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)' with route pattern 'api/Employee' is valid for the request path '/api/Employee'
2025-09-04 10:26:39.123 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:39.127 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:26:39.132 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:39.137 +01:00 [INF] Route matched with {action = "GetAll", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CMSApi.Application.DTO.EmployeeDto.EmployeeResponseDto]]] GetAll() on controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi).
2025-09-04 10:26:39.146 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-04 10:26:39.166 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-04 10:26:39.174 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-04 10:26:39.183 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-04 10:26:39.190 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-04 10:26:39.197 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi)
2025-09-04 10:26:39.206 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:26:39.215 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi)
2025-09-04 10:26:39.226 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:26:39.229 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-04 10:26:39.234 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:39.241 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:39.248 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:26:39.254 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-04 10:26:39.260 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-04 10:26:39.266 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Firstname], [e].[Middlename], [e].[Lastname], [e].[Gender], [e].[Email], [e].[Phone], [e].[DOB], [e].[Role], [e].[DeptId], [d].[DeptName]
FROM [Employees] AS [e]
LEFT JOIN [Departments] AS [d] ON [e].[DeptId] = [d].[DeptId]
2025-09-04 10:26:39.277 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Firstname], [e].[Middlename], [e].[Lastname], [e].[Gender], [e].[Email], [e].[Phone], [e].[DOB], [e].[Role], [e].[DeptId], [d].[DeptName]
FROM [Employees] AS [e]
LEFT JOIN [Departments] AS [d] ON [e].[DeptId] = [d].[DeptId]
2025-09-04 10:26:39.286 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:39.293 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-04 10:26:39.300 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:39.306 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-04 10:26:39.314 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-04 10:26:39.325 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-09-04 10:26:39.331 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-09-04 10:26:39.338 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-04 10:26:39.342 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-04 10:26:39.346 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-04 10:26:39.353 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CMSApi.Application.DTO.EmployeeDto.EmployeeResponseDto, CMSApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-04 10:26:39.360 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi) in 162.8979ms
2025-09-04 10:26:39.367 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:39.373 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:26:39.378 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:39.384 +01:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-09-04 10:26:39.391 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/Employee - 200 null application/json; charset=utf-8 295.2978ms
2025-09-04 10:26:49.522 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/Employee - null null
2025-09-04 10:26:49.533 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Employee'
2025-09-04 10:26:49.537 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)' with route pattern 'api/Employee' is valid for the request path '/api/Employee'
2025-09-04 10:26:49.545 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:49.550 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:26:49.555 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:49.560 +01:00 [INF] Route matched with {action = "GetAll", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CMSApi.Application.DTO.EmployeeDto.EmployeeResponseDto]]] GetAll() on controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi).
2025-09-04 10:26:49.569 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-04 10:26:49.576 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-04 10:26:49.583 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-04 10:26:49.593 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-04 10:26:49.600 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-04 10:26:49.607 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi)
2025-09-04 10:26:49.618 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:26:49.627 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.EmployeeController (CMSApi)
2025-09-04 10:26:49.634 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:26:49.636 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-04 10:26:49.640 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:49.647 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:49.653 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:26:49.657 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-04 10:26:49.665 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-04 10:26:49.671 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Firstname], [e].[Middlename], [e].[Lastname], [e].[Gender], [e].[Email], [e].[Phone], [e].[DOB], [e].[Role], [e].[DeptId], [d].[DeptName]
FROM [Employees] AS [e]
LEFT JOIN [Departments] AS [d] ON [e].[DeptId] = [d].[DeptId]
2025-09-04 10:26:49.681 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Firstname], [e].[Middlename], [e].[Lastname], [e].[Gender], [e].[Email], [e].[Phone], [e].[DOB], [e].[Role], [e].[DeptId], [d].[DeptName]
FROM [Employees] AS [e]
LEFT JOIN [Departments] AS [d] ON [e].[DeptId] = [d].[DeptId]
2025-09-04 10:26:49.688 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:49.694 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-04 10:26:49.699 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:49.705 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-04 10:26:49.713 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-04 10:26:49.723 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-09-04 10:26:49.731 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-09-04 10:26:49.737 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-04 10:26:49.740 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-04 10:26:49.744 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-04 10:26:49.751 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CMSApi.Application.DTO.EmployeeDto.EmployeeResponseDto, CMSApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-04 10:26:49.758 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi) in 150.5474ms
2025-09-04 10:26:49.763 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.EmployeeController.GetAll (CMSApi)'
2025-09-04 10:26:49.768 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:26:49.772 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:26:49.778 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-04 10:26:49.785 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/Employee - 200 null application/json; charset=utf-8 262.9049ms
2025-09-04 10:27:51.470 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 10:27:51.560 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 10:27:51.570 +01:00 [DBG] Request did not match any endpoints
2025-09-04 10:27:51.580 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 10:27:51.587 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 10:27:51.595 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 10:27:51.602 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 10:27:51.613 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 143.7416ms
2025-09-04 10:27:51.637 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 10:27:51.637 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 10:27:51.689 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 10:27:51.698 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 60.9081ms
2025-09-04 10:27:51.720 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.1207ms
2025-09-04 10:27:51.987 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 10:27:52.026 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 10:27:52.029 +01:00 [DBG] Request did not match any endpoints
2025-09-04 10:27:52.045 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.5635ms
2025-09-04 10:28:31.579 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-04 10:28:31.602 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:28:31.608 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:28:31.612 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:28:31.616 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:28:31.622 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:28:31.627 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000023": started reading request body.
2025-09-04 10:28:31.634 +01:00 [DBG] Connection id "0HNFBIHJMDF93", Request id "0HNFBIHJMDF93:00000023": done reading request body.
2025-09-04 10:28:31.642 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:28:31.652 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:28:31.656 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-04 10:28:31.661 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:28:31.667 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:28:31.672 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:28:31.677 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-04 10:28:31.683 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-04 10:28:31.689 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:28:31.706 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:28:31.716 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:28:31.722 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:28:31.727 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-09-04 10:28:31.735 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:28:31.741 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-04 10:28:31.926 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 10:28:31.932 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 10:28:31.936 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:28:31.940 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:28:31.944 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:28:31.949 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-04 10:28:31.954 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 375.3221ms
2025-09-04 10:40:50.774 +01:00 [DBG] Connection id "0HNFBIHJMDF93" received FIN.
2025-09-04 10:40:50.835 +01:00 [DBG] Connection id "0HNFBIHJMDF93" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 10:40:50.837 +01:00 [DBG] Connection id "0HNFBIHJMDF93" is closed. The last processed stream ID was 35.
2025-09-04 10:40:50.861 +01:00 [DBG] The connection queue processing loop for 0HNFBIHJMDF93 completed.
2025-09-04 10:40:50.874 +01:00 [DBG] Connection id "0HNFBIHJMDF93" stopped.
2025-09-04 10:50:51.646 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 10:50:52.021 +01:00 [DBG] Hosting starting
2025-09-04 10:50:52.134 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 10:50:52.182 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 10:50:52.219 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 10:50:52.266 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 10:50:52.290 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 10:50:52.309 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 10:50:52.321 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 10:50:52.353 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 10:50:52.368 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 10:50:52.384 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 10:50:52.399 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 10:50:52.434 +01:00 [DBG] Middleware loaded
2025-09-04 10:50:52.450 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 10:50:52.464 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 10:50:52.929 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 10:50:52.981 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 10:50:53.040 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 10:50:53.231 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 10:50:53.237 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 10:50:53.241 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 10:50:53.246 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 10:50:53.250 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 10:50:53.255 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 10:50:53.273 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 10:50:53.290 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 10:50:53.388 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 10:50:53.394 +01:00 [INF] Hosting environment: Development
2025-09-04 10:50:53.401 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 10:50:53.408 +01:00 [DBG] Hosting started
2025-09-04 10:50:53.696 +01:00 [DBG] Connection id "0HNFBJ24TOLBL" accepted.
2025-09-04 10:50:53.704 +01:00 [DBG] Connection id "0HNFBJ24TOLBL" started.
2025-09-04 10:50:53.844 +01:00 [DBG] Connection 0HNFBJ24TOLBL established using the following protocol: "Tls13"
2025-09-04 10:50:54.042 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 10:50:54.437 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 10:50:54.449 +01:00 [DBG] Request did not match any endpoints
2025-09-04 10:50:54.705 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 10:50:54.715 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 10:50:54.747 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 10:50:54.757 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 10:50:54.779 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 749.7815ms
2025-09-04 10:50:54.828 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 10:50:54.828 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 10:50:54.878 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 10:50:54.885 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 57.7516ms
2025-09-04 10:50:54.921 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.6381ms
2025-09-04 10:50:55.007 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 10:50:55.021 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 10:50:55.028 +01:00 [DBG] Request did not match any endpoints
2025-09-04 10:50:55.378 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 370.9424ms
2025-09-04 10:51:03.656 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 10:51:03.698 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 10:51:03.710 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 10:51:04.036 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:51:04.059 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 10:51:04.076 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 10:51:04.100 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 10:51:04.109 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 452.932ms
2025-09-04 10:52:22.200 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 57
2025-09-04 10:52:22.239 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:52:22.248 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:52:22.256 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:52:22.269 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:52:22.277 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:52:22.286 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:52:22.307 +01:00 [DBG] Connection id "0HNFBJ24TOLBL", Request id "0HNFBJ24TOLBL:0000000B": started reading request body.
2025-09-04 10:52:22.317 +01:00 [DBG] Connection id "0HNFBJ24TOLBL", Request id "0HNFBJ24TOLBL:0000000B": done reading request body.
2025-09-04 10:52:22.700 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 10:52:23.973 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 10:52:23.982 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 10:52:24.286 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 10:52:24.565 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:52:24.755 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 10:52:26.023 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 10:52:26.267 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:52:26.361 +01:00 [DBG] Created DbConnection. (84ms).
2025-09-04 10:52:26.388 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:52:27.622 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:52:27.647 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:52:27.693 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (25ms).
2025-09-04 10:52:27.744 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (98ms).
2025-09-04 10:52:27.791 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:52:28.145 +01:00 [INF] Executed DbCommand (352ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:52:28.368 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:52:28.578 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:52:28.628 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 434ms reading results.
2025-09-04 10:52:28.654 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:52:28.692 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (38ms).
2025-09-04 10:52:29.262 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 10:52:29.283 +01:00 [INF] Writing value of type '<>f__AnonymousType13`1' as Json.
2025-09-04 10:52:29.328 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:52:29.352 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:52:29.380 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:52:29.395 +01:00 [DBG] Disposed connection to database '' on server '' (14ms).
2025-09-04 10:52:29.407 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 7207.8593ms
2025-09-04 10:53:38.933 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 55
2025-09-04 10:53:38.955 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 10:53:38.959 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:53:38.965 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 10:53:38.969 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:53:38.975 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 10:53:38.980 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:53:38.986 +01:00 [DBG] Connection id "0HNFBJ24TOLBL", Request id "0HNFBJ24TOLBL:0000000D": started reading request body.
2025-09-04 10:53:38.992 +01:00 [DBG] Connection id "0HNFBJ24TOLBL", Request id "0HNFBJ24TOLBL:0000000D": done reading request body.
2025-09-04 10:53:39.162 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 10:53:39.176 +01:00 [DBG] Creating DbConnection.
2025-09-04 10:53:39.181 +01:00 [DBG] Created DbConnection. (5ms).
2025-09-04 10:53:39.185 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:53:39.191 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:53:39.199 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 10:53:39.203 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-04 10:53:39.208 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-04 10:53:39.215 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:53:39.237 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 10:53:39.248 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 10:53:39.255 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:53:39.261 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-09-04 10:53:39.268 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:53:39.272 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-04 10:53:39.492 +01:00 [DBG] Invalid password for user.
2025-09-04 10:53:39.498 +01:00 [INF] Setting HTTP status code 400.
2025-09-04 10:53:39.504 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-04 10:53:39.512 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 10:53:39.519 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 10:53:39.524 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 10:53:39.530 +01:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-09-04 10:53:39.538 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null application/json; charset=utf-8 605.9504ms
2025-09-04 11:07:58.454 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 11:07:58.705 +01:00 [DBG] Hosting starting
2025-09-04 11:07:58.784 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 11:07:58.814 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 11:07:58.840 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 11:07:58.870 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 11:07:58.885 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:07:58.896 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 11:07:58.906 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:07:58.923 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 11:07:58.933 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 11:07:58.943 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 11:07:58.950 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 11:07:58.970 +01:00 [DBG] Middleware loaded
2025-09-04 11:07:58.979 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 11:07:58.987 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 11:07:59.265 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 11:07:59.274 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 11:07:59.300 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 11:07:59.562 +01:00 [DBG] Connection id "0HNFBJBML63UN" accepted.
2025-09-04 11:07:59.563 +01:00 [DBG] Connection id "0HNFBJBML63UM" accepted.
2025-09-04 11:07:59.570 +01:00 [DBG] Connection id "0HNFBJBML63UN" started.
2025-09-04 11:07:59.573 +01:00 [DBG] Connection id "0HNFBJBML63UM" started.
2025-09-04 11:07:59.600 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 11:07:59.603 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 11:07:59.608 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 11:07:59.611 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 11:07:59.615 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 11:07:59.619 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 11:07:59.645 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:07:59.663 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:07:59.675 +01:00 [DBG] Connection id "0HNFBJBML63UN" received FIN.
2025-09-04 11:07:59.705 +01:00 [DBG] Connection 0HNFBJBML63UN established using the following protocol: "Tls13"
2025-09-04 11:07:59.705 +01:00 [DBG] Connection 0HNFBJBML63UM established using the following protocol: "Tls13"
2025-09-04 11:07:59.758 +01:00 [DBG] Connection id "0HNFBJBML63UN" is closed. The last processed stream ID was 0.
2025-09-04 11:07:59.764 +01:00 [DBG] Connection id "0HNFBJBML63UN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 11:07:59.776 +01:00 [DBG] The connection queue processing loop for 0HNFBJBML63UN completed.
2025-09-04 11:07:59.784 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 11:07:59.788 +01:00 [DBG] Connection id "0HNFBJBML63UN" stopped.
2025-09-04 11:07:59.789 +01:00 [INF] Hosting environment: Development
2025-09-04 11:07:59.797 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 11:07:59.800 +01:00 [DBG] Hosting started
2025-09-04 11:07:59.844 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:08:00.211 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:08:00.215 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:08:00.345 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:08:00.358 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:08:00.376 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:08:00.385 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:08:00.398 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 567.9456ms
2025-09-04 11:08:00.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:08:00.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:08:00.508 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:08:00.529 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 81.9085ms
2025-09-04 11:08:00.586 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 124.4061ms
2025-09-04 11:08:00.673 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:08:00.680 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:08:00.682 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:08:00.980 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 307.0031ms
2025-09-04 11:08:10.566 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:08:10.590 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:08:10.597 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:08:10.768 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:08:10.786 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 11:08:10.797 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 11:08:10.811 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 11:08:10.817 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 251.4499ms
2025-09-04 11:08:36.152 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:08:36.192 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:08:36.201 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:08:36.435 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-04 11:08:36.460 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-09-04 11:08:36.469 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 11:08:36.476 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 11:08:36.487 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 11:08:36.495 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 342.3263ms
2025-09-04 11:09:18.656 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-04 11:09:18.690 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 11:09:18.698 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:09:18.709 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 11:09:18.724 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-04 11:09:18.742 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-09-04 11:09:18.753 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-09-04 11:09:18.763 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:09:18.781 +01:00 [DBG] Connection id "0HNFBJBML63UM", Request id "0HNFBJBML63UM:0000000D": started reading request body.
2025-09-04 11:09:18.790 +01:00 [DBG] Connection id "0HNFBJBML63UM", Request id "0HNFBJBML63UM:0000000D": done reading request body.
2025-09-04 11:09:19.130 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 11:09:20.358 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 11:09:20.367 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 11:09:20.666 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 11:09:21.026 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 11:09:21.265 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 11:09:21.901 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 11:09:22.023 +01:00 [DBG] Creating DbConnection.
2025-09-04 11:09:22.069 +01:00 [DBG] Created DbConnection. (42ms).
2025-09-04 11:09:22.082 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:09:22.758 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:09:22.771 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 11:09:22.787 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (14ms).
2025-09-04 11:09:22.819 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (48ms).
2025-09-04 11:09:22.851 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:09:23.050 +01:00 [INF] Executed DbCommand (207ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:09:23.170 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 11:09:23.280 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:09:23.304 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 232ms reading results.
2025-09-04 11:09:23.318 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:09:23.337 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (18ms).
2025-09-04 11:09:23.614 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 11:09:23.624 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-04 11:09:23.634 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:09:23.648 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 11:09:23.662 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:09:23.671 +01:00 [DBG] Disposed connection to database '' on server '' (10ms).
2025-09-04 11:09:23.679 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 5022.895ms
2025-09-04 11:09:47.581 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:09:47.648 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:09:47.658 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:09:47.733 +01:00 [DBG] Successfully validated the token.
2025-09-04 11:09:47.744 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-04 11:09:47.756 +01:00 [DBG] Authorization was successful.
2025-09-04 11:09:47.763 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:09:48.559 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:17:25.478 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-04 11:17:25.665 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 458084.3245ms
2025-09-04 11:17:25.668 +01:00 [DBG] Connection id "0HNFBJBML63UM" received FIN.
2025-09-04 11:17:25.693 +01:00 [DBG] Connection id "0HNFBJBML63UM" is closed. The last processed stream ID was 15.
2025-09-04 11:17:25.693 +01:00 [DBG] The connection queue processing loop for 0HNFBJBML63UM completed.
2025-09-04 11:17:25.696 +01:00 [DBG] Connection id "0HNFBJBML63UM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-04 11:17:25.720 +01:00 [DBG] Connection id "0HNFBJBML63UM" stopped.
2025-09-04 11:17:26.474 +01:00 [DBG] Connection id "0HNFBJBML63UO" accepted.
2025-09-04 11:17:26.479 +01:00 [DBG] Connection id "0HNFBJBML63UO" started.
2025-09-04 11:17:26.497 +01:00 [DBG] Connection 0HNFBJBML63UO established using the following protocol: "Tls13"
2025-09-04 11:17:26.505 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:17:26.545 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:17:26.551 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:17:26.557 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:17:26.560 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:17:26.564 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:17:26.576 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:17:26.579 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 74.3497ms
2025-09-04 11:17:26.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:17:26.643 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:17:26.645 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:17:26.648 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 18.3627ms
2025-09-04 11:17:26.690 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.7158ms
2025-09-04 11:17:27.153 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:17:27.164 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:17:27.169 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:17:27.174 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:17:27.186 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:17:27.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.6363ms
2025-09-04 11:17:39.892 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 11:17:40.143 +01:00 [DBG] Hosting starting
2025-09-04 11:17:40.234 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 11:17:40.280 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 11:17:40.310 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 11:17:40.344 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 11:17:40.362 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:17:40.375 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 11:17:40.384 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:17:40.404 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 11:17:40.418 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 11:17:40.429 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 11:17:40.437 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 11:17:40.462 +01:00 [DBG] Middleware loaded
2025-09-04 11:17:40.472 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 11:17:40.483 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 11:17:40.784 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 11:17:40.791 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 11:17:40.808 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 11:17:41.124 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 11:17:41.133 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 11:17:41.139 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 11:17:41.145 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 11:17:41.151 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 11:17:41.158 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 11:17:41.181 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:17:41.204 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:17:41.306 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 11:17:41.312 +01:00 [INF] Hosting environment: Development
2025-09-04 11:17:41.319 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 11:17:41.325 +01:00 [DBG] Hosting started
2025-09-04 11:18:05.951 +01:00 [DBG] Connection id "0HNFBJHBC5FQ7" accepted.
2025-09-04 11:18:05.979 +01:00 [DBG] Connection id "0HNFBJHBC5FQ7" started.
2025-09-04 11:18:06.148 +01:00 [DBG] Connection 0HNFBJHBC5FQ7 established using the following protocol: "Tls13"
2025-09-04 11:18:06.318 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:18:06.445 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:18:06.453 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:18:06.670 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:18:06.683 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 11:18:06.694 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 11:18:06.707 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 11:18:06.718 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 416.5926ms
2025-09-04 11:19:10.778 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 57
2025-09-04 11:19:10.816 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 11:19:10.824 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:19:10.858 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 11:19:10.871 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:19:10.879 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:19:10.889 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:19:10.908 +01:00 [DBG] Connection id "0HNFBJHBC5FQ7", Request id "0HNFBJHBC5FQ7:00000003": started reading request body.
2025-09-04 11:19:10.919 +01:00 [DBG] Connection id "0HNFBJHBC5FQ7", Request id "0HNFBJHBC5FQ7:00000003": done reading request body.
2025-09-04 11:19:11.340 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 11:19:12.626 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 11:19:12.635 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 11:19:12.927 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 11:19:13.161 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 11:19:13.371 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 11:19:14.077 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 11:19:14.304 +01:00 [DBG] Creating DbConnection.
2025-09-04 11:19:14.401 +01:00 [DBG] Created DbConnection. (90ms).
2025-09-04 11:19:14.423 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:19:15.585 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:19:15.610 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 11:19:15.656 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (29ms).
2025-09-04 11:19:15.708 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (99ms).
2025-09-04 11:19:15.756 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:19:16.122 +01:00 [INF] Executed DbCommand (349ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:19:16.356 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 11:19:16.589 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:19:16.643 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 471ms reading results.
2025-09-04 11:19:16.671 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:19:16.707 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (37ms).
2025-09-04 11:19:17.244 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 11:19:17.266 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-04 11:19:17.288 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:19:17.324 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 11:19:17.351 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:19:17.368 +01:00 [DBG] Disposed connection to database '' on server '' (15ms).
2025-09-04 11:19:17.386 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 6607.8863ms
2025-09-04 11:19:42.925 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:19:42.959 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:19:42.967 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:19:43.138 +01:00 [DBG] Successfully validated the token.
2025-09-04 11:19:43.148 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-04 11:19:43.161 +01:00 [DBG] Authorization was successful.
2025-09-04 11:19:43.168 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:24:01.824 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:24:01.828 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-04 11:24:01.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 258933.5324ms
2025-09-04 11:24:02.744 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:24:02.862 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:24:02.864 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:24:02.928 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:24:02.932 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:24:02.942 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:24:02.944 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:24:02.945 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 201.5284ms
2025-09-04 11:24:02.960 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:24:02.960 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:24:03.005 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:24:03.009 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 49.1149ms
2025-09-04 11:24:03.042 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.7825ms
2025-09-04 11:24:03.237 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:24:03.242 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:24:03.243 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:24:03.251 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:24:03.254 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:24:03.341 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.7915ms
2025-09-04 11:24:11.174 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:24:11.189 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:24:11.192 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:24:11.196 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:24:11.198 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:24:11.200 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:24:11.202 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:24:11.203 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 29.3498ms
2025-09-04 11:24:11.216 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:24:11.216 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:24:11.222 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:24:11.224 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 7.7448ms
2025-09-04 11:24:11.232 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.6997ms
2025-09-04 11:24:11.543 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:24:11.552 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:24:11.556 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:24:11.574 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.2509ms
2025-09-04 11:24:41.517 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 57
2025-09-04 11:24:41.523 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 11:24:41.525 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:24:41.527 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 11:24:41.529 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:24:41.532 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:24:41.534 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:24:41.536 +01:00 [DBG] Connection id "0HNFBJHBC5FQ7", Request id "0HNFBJHBC5FQ7:00000017": started reading request body.
2025-09-04 11:24:41.537 +01:00 [DBG] Connection id "0HNFBJHBC5FQ7", Request id "0HNFBJHBC5FQ7:00000017": done reading request body.
2025-09-04 11:24:41.600 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 11:24:41.611 +01:00 [DBG] Creating DbConnection.
2025-09-04 11:24:41.614 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-04 11:24:41.615 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:24:41.618 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:24:41.620 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 11:24:41.622 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-04 11:24:41.625 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-04 11:24:41.628 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:24:41.642 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:24:41.648 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 11:24:41.651 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:24:41.653 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-04 11:24:41.656 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:24:41.658 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-04 11:24:41.726 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 11:24:41.729 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-04 11:24:41.732 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:24:41.734 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 11:24:41.735 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:24:41.737 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-04 11:24:41.739 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 222.4628ms
2025-09-04 11:25:15.435 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:25:15.446 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:25:15.448 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:25:15.449 +01:00 [DBG] Successfully validated the token.
2025-09-04 11:25:15.451 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-04 11:25:15.454 +01:00 [DBG] Authorization was successful.
2025-09-04 11:25:15.456 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:25:15.487 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:25:15.491 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-04 11:25:15.533 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 98.4947ms
2025-09-04 11:40:53.652 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 11:40:53.803 +01:00 [DBG] Hosting starting
2025-09-04 11:40:53.844 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 11:40:53.863 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 11:40:53.876 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 11:40:53.890 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 11:40:53.897 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:40:53.901 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 11:40:53.904 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:40:53.914 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 11:40:53.920 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 11:40:53.925 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 11:40:53.929 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 11:40:53.937 +01:00 [DBG] Middleware loaded
2025-09-04 11:40:53.939 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 11:40:53.945 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 11:40:54.151 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 11:40:54.159 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 11:40:54.182 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 11:40:54.437 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 11:40:54.442 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 11:40:54.446 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 11:40:54.450 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 11:40:54.453 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 11:40:54.457 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 11:40:54.483 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:40:54.503 +01:00 [DBG] Connection id "0HNFBJU37MBHQ" accepted.
2025-09-04 11:40:54.503 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:40:54.509 +01:00 [DBG] Connection id "0HNFBJU37MBHQ" started.
2025-09-04 11:40:54.606 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 11:40:54.610 +01:00 [INF] Hosting environment: Development
2025-09-04 11:40:54.614 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 11:40:54.618 +01:00 [DBG] Hosting started
2025-09-04 11:40:54.618 +01:00 [DBG] Connection 0HNFBJU37MBHQ established using the following protocol: "Tls13"
2025-09-04 11:40:54.834 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:40:55.082 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:40:55.087 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:40:55.249 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:40:55.259 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:40:55.273 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:40:55.278 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:40:55.289 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 468.1848ms
2025-09-04 11:40:55.300 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:40:55.303 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:40:55.353 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:40:55.358 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 54.5414ms
2025-09-04 11:40:55.394 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.4662ms
2025-09-04 11:40:55.781 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:40:55.792 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:40:55.796 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:40:56.160 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 378.8157ms
2025-09-04 11:41:02.349 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:41:02.360 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:41:02.362 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:41:02.433 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:41:02.439 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 11:41:02.444 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 11:41:02.454 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 11:41:02.456 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 107.4845ms
2025-09-04 11:42:42.484 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-04 11:42:42.502 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 11:42:42.504 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:42:42.507 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 11:42:42.513 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:42:42.516 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:42:42.518 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:42:42.525 +01:00 [DBG] Connection id "0HNFBJU37MBHQ", Request id "0HNFBJU37MBHQ:0000000B": started reading request body.
2025-09-04 11:42:42.529 +01:00 [DBG] Connection id "0HNFBJU37MBHQ", Request id "0HNFBJU37MBHQ:0000000B": done reading request body.
2025-09-04 11:42:42.647 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 11:42:43.142 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 11:42:43.146 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 11:42:43.260 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 11:42:43.377 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 11:42:43.451 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 11:42:43.712 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 11:42:43.764 +01:00 [DBG] Creating DbConnection.
2025-09-04 11:42:43.786 +01:00 [DBG] Created DbConnection. (20ms).
2025-09-04 11:42:43.794 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:42:44.062 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:42:44.068 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 11:42:44.077 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-04 11:42:44.088 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-09-04 11:42:44.098 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:42:44.170 +01:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 11:42:44.220 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-04 11:42:44.267 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:42:44.278 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 97ms reading results.
2025-09-04 11:42:44.284 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:42:44.297 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (12ms).
2025-09-04 11:42:44.416 +01:00 [INF] Setting HTTP status code 200.
2025-09-04 11:42:44.422 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-04 11:42:44.427 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 11:42:44.432 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-04 11:42:44.440 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 11:42:44.445 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-04 11:42:44.448 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 1964.079ms
2025-09-04 11:43:18.960 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:43:18.974 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:43:18.975 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:43:18.992 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-04 11:43:19.012 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-04 11:43:19.016 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 11:43:19.018 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 11:43:19.021 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 11:43:19.023 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 63.0577ms
2025-09-04 11:43:38.187 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-04 11:43:38.199 +01:00 [DBG] No candidates found for the request path '/'
2025-09-04 11:43:38.200 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:43:38.201 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:43:38.203 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 11:43:38.205 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-04 11:43:38.206 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 11:43:38.207 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 11:43:38.209 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 21.9055ms
2025-09-04 11:43:39.309 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:43:39.318 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:43:39.320 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 10.298ms
2025-09-04 11:43:39.515 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:43:39.520 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:43:39.521 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:43:39.534 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.1343ms
2025-09-04 11:44:07.641 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:44:07.656 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:44:07.658 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:44:07.695 +01:00 [DBG] Successfully validated the token.
2025-09-04 11:44:07.700 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-04 11:44:07.703 +01:00 [DBG] Authorization was successful.
2025-09-04 11:44:07.705 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:44:07.830 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:44:21.643 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-04 11:44:21.658 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 14017.3734ms
2025-09-04 11:44:22.667 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:44:22.673 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:44:22.674 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:44:22.676 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:44:22.679 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:44:22.681 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:44:22.683 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:44:22.684 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 17.0921ms
2025-09-04 11:44:22.698 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:44:22.698 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:44:22.705 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:44:22.709 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 11.7523ms
2025-09-04 11:44:22.724 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.9192ms
2025-09-04 11:44:22.769 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:44:22.785 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:44:22.789 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:44:22.791 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:44:22.795 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:44:22.816 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.3671ms
2025-09-04 11:44:35.947 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 11:44:36.250 +01:00 [DBG] Hosting starting
2025-09-04 11:44:36.304 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 11:44:36.326 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 11:44:36.344 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 11:44:36.369 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 11:44:36.380 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:44:36.387 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 11:44:36.393 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 11:44:36.405 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 11:44:36.413 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 11:44:36.420 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 11:44:36.426 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 11:44:36.443 +01:00 [DBG] Middleware loaded
2025-09-04 11:44:36.451 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 11:44:36.457 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 11:44:36.665 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 11:44:36.671 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 11:44:36.689 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 11:44:36.990 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 11:44:36.998 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 11:44:37.003 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 11:44:37.009 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 11:44:37.014 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 11:44:37.019 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 11:44:37.031 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:44:37.044 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 11:44:37.101 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 11:44:37.106 +01:00 [INF] Hosting environment: Development
2025-09-04 11:44:37.111 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 11:44:37.116 +01:00 [DBG] Hosting started
2025-09-04 11:44:38.775 +01:00 [DBG] Connection id "0HNFBK062GS9O" accepted.
2025-09-04 11:44:38.779 +01:00 [DBG] Connection id "0HNFBK062GS9O" started.
2025-09-04 11:44:38.832 +01:00 [DBG] Connection 0HNFBK062GS9O established using the following protocol: "Tls13"
2025-09-04 11:44:38.904 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-04 11:44:39.015 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-04 11:44:39.019 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:44:39.088 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-04 11:44:39.093 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-04 11:44:39.101 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-04 11:44:39.104 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-04 11:44:39.108 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 207.841ms
2025-09-04 11:44:39.119 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-04 11:44:39.119 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-04 11:44:39.166 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-04 11:44:39.169 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 50.0237ms
2025-09-04 11:44:39.186 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.1363ms
2025-09-04 11:44:39.212 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-04 11:44:39.219 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-04 11:44:39.222 +01:00 [DBG] Request did not match any endpoints
2025-09-04 11:44:39.352 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.329ms
2025-09-04 11:44:58.894 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 11:44:58.916 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 11:44:58.919 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:44:59.094 +01:00 [DBG] Successfully validated the token.
2025-09-04 11:44:59.098 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-04 11:44:59.105 +01:00 [DBG] Authorization was successful.
2025-09-04 11:44:59.108 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 11:44:59.216 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 11:44:59.373 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 15:57:16.095 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-04 15:57:16.206 +01:00 [DBG] Hosting starting
2025-09-04 15:57:16.238 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-04 15:57:16.251 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-04 15:57:16.264 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-04 15:57:16.281 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-04 15:57:16.288 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 15:57:16.295 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-04 15:57:16.298 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-04 15:57:16.304 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-04 15:57:16.309 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-04 15:57:16.312 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-04 15:57:16.315 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-04 15:57:16.324 +01:00 [DBG] Middleware loaded
2025-09-04 15:57:16.329 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-04 15:57:16.332 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-04 15:57:16.454 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-04 15:57:16.460 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-04 15:57:16.476 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-04 15:57:16.594 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-04 15:57:16.598 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-04 15:57:16.600 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-04 15:57:16.601 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-04 15:57:16.602 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-04 15:57:16.603 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-04 15:57:16.610 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 15:57:16.616 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-04 15:57:16.654 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-04 15:57:16.657 +01:00 [INF] Hosting environment: Development
2025-09-04 15:57:16.659 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-04 15:57:16.662 +01:00 [DBG] Hosting started
2025-09-04 15:57:41.460 +01:00 [DBG] Connection id "0HNFBODIRSHKO" accepted.
2025-09-04 15:57:41.477 +01:00 [DBG] Connection id "0HNFBODIRSHKO" started.
2025-09-04 15:57:41.585 +01:00 [DBG] Connection 0HNFBODIRSHKO established using the following protocol: "Tls13"
2025-09-04 15:57:41.710 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 15:57:41.804 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 15:57:41.811 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 15:57:42.196 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/4/2025 10:52:44 AM', Current time (UTC): '9/4/2025 2:57:42 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-04 15:57:42.262 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/4/2025 10:52:44 AM', Current time (UTC): '9/4/2025 2:57:42 PM'.
2025-09-04 15:57:42.279 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 15:57:42.290 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 15:57:42.307 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 15:57:42.316 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 616.0534ms
2025-09-04 15:57:58.513 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-04 15:57:58.531 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-04 15:57:58.535 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-04 15:57:58.543 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/4/2025 10:52:44 AM', Current time (UTC): '9/4/2025 2:57:58 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-04 15:57:58.549 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/4/2025 10:52:44 AM', Current time (UTC): '9/4/2025 2:57:58 PM'.
2025-09-04 15:57:58.555 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-04 15:57:58.560 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-04 15:57:58.566 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-04 15:57:58.571 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 58.4876ms
2025-09-04 15:59:55.607 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-04 15:59:55.628 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-04 15:59:55.630 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 15:59:55.635 +01:00 [INF] No CORS policy found for the specified request.
2025-09-04 15:59:55.639 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 15:59:55.643 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-04 15:59:55.647 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-04 15:59:55.656 +01:00 [DBG] Connection id "0HNFBODIRSHKO", Request id "0HNFBODIRSHKO:00000005": started reading request body.
2025-09-04 15:59:55.660 +01:00 [DBG] Connection id "0HNFBODIRSHKO", Request id "0HNFBODIRSHKO:00000005": done reading request body.
2025-09-04 15:59:55.893 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-04 15:59:57.089 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-04 15:59:57.097 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-04 15:59:57.371 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-04 15:59:57.600 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-04 15:59:57.774 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-04 15:59:58.414 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-04 15:59:58.529 +01:00 [DBG] Creating DbConnection.
2025-09-04 15:59:58.579 +01:00 [DBG] Created DbConnection. (45ms).
2025-09-04 15:59:58.589 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 15:59:59.161 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 15:59:59.174 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-04 15:59:59.192 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-09-04 15:59:59.220 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (45ms).
2025-09-04 15:59:59.246 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 15:59:59.431 +01:00 [INF] Executed DbCommand (182ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-04 15:59:59.539 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-04 15:59:59.567 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 15:59:59.591 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 139ms reading results.
2025-09-04 15:59:59.605 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-04 15:59:59.623 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (18ms).
2025-09-04 16:00:00.341 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
