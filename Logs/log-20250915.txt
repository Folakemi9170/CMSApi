2025-09-15 08:47:27.745 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 08:47:28.018 +01:00 [DBG] Hosting starting
2025-09-15 08:47:28.087 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 08:47:28.123 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 08:47:28.200 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 08:47:28.230 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 08:47:28.242 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 08:47:28.251 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 08:47:28.258 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 08:47:28.274 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 08:47:28.282 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 08:47:28.293 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 08:47:28.299 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 08:47:28.316 +01:00 [DBG] Middleware loaded
2025-09-15 08:47:28.323 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 08:47:28.328 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 08:47:29.110 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 08:47:29.118 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 08:47:29.148 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 08:47:29.478 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 08:47:29.483 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 08:47:29.486 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 08:47:29.488 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 08:47:29.490 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 08:47:29.494 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 08:47:29.522 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 08:47:29.544 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 08:47:29.643 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 08:47:29.646 +01:00 [INF] Hosting environment: Development
2025-09-15 08:47:29.650 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 08:47:29.653 +01:00 [DBG] Hosting started
2025-09-15 08:51:49.092 +01:00 [DBG] Connection id "0HNFK5ISU71NK" accepted.
2025-09-15 08:51:49.110 +01:00 [DBG] Connection id "0HNFK5ISU71NK" started.
2025-09-15 08:51:49.181 +01:00 [DBG] Connection 0HNFK5ISU71NK established using the following protocol: "Tls13"
2025-09-15 08:51:49.251 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 08:51:49.251 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 08:51:49.282 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 08:51:49.286 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 42.9689ms
2025-09-15 08:51:49.378 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 135.8624ms
2025-09-15 08:51:49.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 08:51:49.468 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 08:51:49.470 +01:00 [DBG] Request did not match any endpoints
2025-09-15 08:51:49.605 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.4082ms
2025-09-15 10:15:02.670 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 10:15:02.766 +01:00 [DBG] Hosting starting
2025-09-15 10:15:02.803 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 10:15:02.820 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 10:15:02.850 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 10:15:02.862 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 10:15:02.868 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 10:15:02.872 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 10:15:02.875 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 10:15:02.881 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 10:15:02.884 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 10:15:02.886 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 10:15:02.888 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 10:15:02.895 +01:00 [DBG] Middleware loaded
2025-09-15 10:15:02.899 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 10:15:02.901 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 10:15:03.029 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 10:15:03.032 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 10:15:03.040 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 10:15:03.152 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 10:15:03.156 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 10:15:03.157 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 10:15:03.158 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 10:15:03.159 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 10:15:03.159 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 10:15:03.166 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 10:15:03.174 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 10:15:03.207 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 10:15:03.210 +01:00 [INF] Hosting environment: Development
2025-09-15 10:15:03.212 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 10:15:03.213 +01:00 [DBG] Hosting started
2025-09-15 10:15:19.160 +01:00 [DBG] Connection id "0HNFK71I1UKSJ" accepted.
2025-09-15 10:15:19.164 +01:00 [DBG] Connection id "0HNFK71I1UKSJ" started.
2025-09-15 10:15:19.213 +01:00 [DBG] Connection 0HNFK71I1UKSJ established using the following protocol: "Tls13"
2025-09-15 10:15:19.262 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 10:15:19.380 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 10:15:19.384 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:15:19.454 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 10:15:19.457 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 10:15:19.466 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 10:15:19.468 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 10:15:19.472 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 214.5378ms
2025-09-15 10:15:19.478 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 10:15:19.478 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 10:15:19.537 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 10:15:19.544 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 66.1207ms
2025-09-15 10:15:19.570 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 92.3618ms
2025-09-15 10:15:19.689 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 10:15:19.698 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 10:15:19.702 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:15:19.849 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.2007ms
2025-09-15 10:15:23.360 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 10:15:23.372 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 10:15:23.375 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:15:23.378 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 10:15:23.380 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 10:15:23.382 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 10:15:23.383 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 10:15:23.384 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 24.247ms
2025-09-15 10:15:23.403 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 10:15:23.403 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 10:15:23.410 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 10:15:23.419 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 16.5715ms
2025-09-15 10:15:23.431 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.2724ms
2025-09-15 10:15:23.477 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 10:15:23.482 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 10:15:23.485 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:15:23.505 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.114ms
2025-09-15 10:17:13.110 +01:00 [DBG] Connection id "0HNFK71I1UKSJ" received FIN.
2025-09-15 10:17:13.130 +01:00 [DBG] The connection queue processing loop for 0HNFK71I1UKSJ completed.
2025-09-15 10:17:13.131 +01:00 [DBG] Connection id "0HNFK71I1UKSJ" is closed. The last processed stream ID was 15.
2025-09-15 10:17:13.133 +01:00 [DBG] Connection id "0HNFK71I1UKSJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 10:17:13.147 +01:00 [DBG] Connection id "0HNFK71I1UKSJ" stopped.
2025-09-15 10:29:53.213 +01:00 [DBG] Config reload token fired. Checking for changes...
2025-09-15 10:29:53.215 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 10:29:53.216 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 10:29:53.479 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 10:29:53.483 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 10:29:53.484 +01:00 [DBG] Config reload token fired. Checking for changes...
2025-09-15 10:30:20.852 +01:00 [DBG] Connection id "0HNFK71I1UKSK" accepted.
2025-09-15 10:30:20.887 +01:00 [DBG] Connection id "0HNFK71I1UKSK" started.
2025-09-15 10:30:20.896 +01:00 [DBG] Connection 0HNFK71I1UKSK established using the following protocol: "Tls13"
2025-09-15 10:30:20.899 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 10:30:20.915 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 10:30:20.916 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:30:20.917 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 10:30:20.918 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 10:30:20.918 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 10:30:20.919 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 10:30:20.920 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 21.0095ms
2025-09-15 10:30:20.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 10:30:20.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 10:30:20.943 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 10:30:20.980 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 45.8705ms
2025-09-15 10:30:21.012 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.4779ms
2025-09-15 10:30:21.149 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 10:30:21.154 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 10:30:21.160 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:30:21.178 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.2189ms
2025-09-15 10:41:25.534 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 10:41:25.641 +01:00 [DBG] Hosting starting
2025-09-15 10:41:25.679 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 10:41:25.695 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 10:41:25.705 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 10:41:25.717 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 10:41:25.722 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 10:41:25.725 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 10:41:25.727 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 10:41:25.734 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 10:41:25.736 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 10:41:25.738 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 10:41:25.739 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 10:41:25.747 +01:00 [DBG] Middleware loaded
2025-09-15 10:41:25.751 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 10:41:25.753 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 10:41:25.878 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 10:41:25.882 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 10:41:25.891 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 10:41:26.002 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 10:41:26.004 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 10:41:26.005 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 10:41:26.006 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 10:41:26.007 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 10:41:26.008 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 10:41:26.016 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 10:41:26.021 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 10:41:26.058 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 10:41:26.059 +01:00 [INF] Hosting environment: Development
2025-09-15 10:41:26.060 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 10:41:26.061 +01:00 [DBG] Hosting started
2025-09-15 10:41:33.758 +01:00 [DBG] Connection id "0HNFK7G7AFL7J" accepted.
2025-09-15 10:41:33.763 +01:00 [DBG] Connection id "0HNFK7G7AFL7J" started.
2025-09-15 10:41:33.816 +01:00 [DBG] Connection 0HNFK7G7AFL7J established using the following protocol: "Tls13"
2025-09-15 10:41:33.878 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 10:41:34.012 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 10:41:34.016 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:41:34.081 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 10:41:34.085 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 10:41:34.093 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 10:41:34.094 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 10:41:34.100 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 225.7315ms
2025-09-15 10:41:34.118 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 10:41:34.118 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 10:41:34.151 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 10:41:34.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 36.1827ms
2025-09-15 10:41:34.170 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.2538ms
2025-09-15 10:41:34.345 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 10:41:34.353 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 10:41:34.358 +01:00 [DBG] Request did not match any endpoints
2025-09-15 10:41:34.483 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 138.1376ms
2025-09-15 10:42:10.727 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 10:42:10.745 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 10:42:10.749 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 10:42:10.753 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 10:42:10.772 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 10:42:10.869 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 10:42:10.874 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 10:42:10.878 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-15 10:42:10.884 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 10:42:10.891 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 10:42:10.893 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - 401 0 null 167.0128ms
2025-09-15 10:43:06.246 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 72
2025-09-15 10:43:06.263 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-15 10:43:06.265 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 10:43:06.267 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 10:43:06.269 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 10:43:06.270 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 10:43:06.273 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 10:43:06.279 +01:00 [DBG] Connection id "0HNFK7G7AFL7J", Request id "0HNFK7G7AFL7J:0000000B": started reading request body.
2025-09-15 10:43:06.281 +01:00 [DBG] Connection id "0HNFK7G7AFL7J", Request id "0HNFK7G7AFL7J:0000000B": done reading request body.
2025-09-15 10:43:06.295 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 10:43:06.299 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "LoginModel loginModel" from the request body as JSON.
 ---> System.Text.Json.JsonException: '"' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 2 | BytePositionInLine: 2.
 ---> System.Text.Json.JsonReaderException: '"' is invalid after a value. Expected either ',', '}', or ']'. LineNumber: 2 | BytePositionInLine: 2.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 10:43:06.360 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null text/plain; charset=utf-8 114.3349ms
2025-09-15 10:45:47.416 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-15 10:45:47.428 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-15 10:45:47.431 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 10:45:47.433 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 10:45:47.435 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 10:45:47.439 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 10:45:47.441 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 10:45:47.443 +01:00 [DBG] Connection id "0HNFK7G7AFL7J", Request id "0HNFK7G7AFL7J:0000000D": started reading request body.
2025-09-15 10:45:47.446 +01:00 [DBG] Connection id "0HNFK7G7AFL7J", Request id "0HNFK7G7AFL7J:0000000D": done reading request body.
2025-09-15 10:45:47.640 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 10:45:48.269 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-15 10:45:48.272 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-15 10:45:48.432 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-15 10:45:48.573 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 10:45:48.691 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-15 10:45:48.999 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 10:45:49.068 +01:00 [DBG] Creating DbConnection.
2025-09-15 10:45:49.105 +01:00 [DBG] Created DbConnection. (36ms).
2025-09-15 10:45:49.113 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.491 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.496 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 10:45:49.505 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-15 10:45:49.517 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-15 10:45:49.528 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-15 10:45:49.607 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-15 10:45:49.664 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 10:45:49.718 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.728 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 110ms reading results.
2025-09-15 10:45:49.734 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.742 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-15 10:45:49.831 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-15 10:45:49.873 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 10:45:49.880 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.883 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.886 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 10:45:49.888 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 10:45:49.889 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-15 10:45:49.891 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-15 10:45:49.900 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-15 10:45:49.903 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.905 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-15 10:45:49.907 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.908 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 10:45:49.953 +01:00 [INF] Setting HTTP status code 200.
2025-09-15 10:45:49.958 +01:00 [INF] Writing value of type '<>f__AnonymousType12`1' as Json.
2025-09-15 10:45:49.962 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 10:45:49.967 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 10:45:49.975 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 10:45:49.980 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-15 10:45:49.982 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2566.2406ms
2025-09-15 10:46:14.990 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 10:46:15.002 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 10:46:15.003 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 10:46:15.006 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 10:46:15.007 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 10:46:15.055 +01:00 [DBG] Successfully validated the token.
2025-09-15 10:46:15.058 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 10:46:15.061 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 10:46:15.065 +01:00 [DBG] Authorization was successful.
2025-09-15 10:46:15.067 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 10:46:15.090 +01:00 [INF] Route matched with {action = "SendTestEmail", controller = "TestEmail"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTestEmail(System.String) on controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi).
2025-09-15 10:46:15.096 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-15 10:46:15.101 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-15 10:46:15.104 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-15 10:46:15.107 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-15 10:46:15.109 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-15 10:46:15.113 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 10:46:15.119 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 10:46:15.138 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' ...
2025-09-15 10:46:15.143 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' using the name 'to' in request data ...
2025-09-15 10:46:15.150 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 10:46:15.152 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 10:46:15.154 +01:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.String' ...
2025-09-15 10:46:15.161 +01:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.String'.
2025-09-15 10:55:29.037 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 10:55:29.242 +01:00 [DBG] Hosting starting
2025-09-15 10:55:29.281 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 10:55:29.292 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 10:55:29.301 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 10:55:29.313 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 10:55:29.318 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 10:55:29.321 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 10:55:29.324 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 10:55:29.329 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 10:55:29.331 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 10:55:29.333 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 10:55:29.335 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 10:55:29.342 +01:00 [DBG] Middleware loaded
2025-09-15 10:55:29.345 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 10:55:29.347 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 10:55:29.473 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 10:55:29.476 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 10:55:29.485 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 10:55:29.578 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 10:55:29.581 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 10:55:29.583 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 10:55:29.584 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 10:55:29.585 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 10:55:29.585 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 10:55:29.592 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 10:55:29.598 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 10:55:29.634 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 10:55:29.636 +01:00 [INF] Hosting environment: Development
2025-09-15 10:55:29.638 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 10:55:29.639 +01:00 [DBG] Hosting started
2025-09-15 10:55:37.303 +01:00 [DBG] Connection id "0HNFK7O2N5GTG" accepted.
2025-09-15 10:55:37.307 +01:00 [DBG] Connection id "0HNFK7O2N5GTG" started.
2025-09-15 10:55:37.356 +01:00 [DBG] Connection 0HNFK7O2N5GTG established using the following protocol: "Tls13"
2025-09-15 10:55:37.405 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 10:55:37.455 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 10:55:37.459 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 10:55:37.462 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 10:55:37.492 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 10:55:37.620 +01:00 [DBG] Successfully validated the token.
2025-09-15 10:55:37.624 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 10:55:37.629 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 10:55:37.634 +01:00 [DBG] Authorization was successful.
2025-09-15 10:55:37.636 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 10:55:37.656 +01:00 [INF] Route matched with {action = "SendTestEmail", controller = "TestEmail"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTestEmail(System.String) on controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi).
2025-09-15 10:55:37.661 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-15 10:55:37.666 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-15 10:55:37.669 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-15 10:55:37.672 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-15 10:55:37.674 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-15 10:55:37.678 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 10:55:37.685 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 10:55:37.699 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' ...
2025-09-15 10:55:37.703 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' using the name 'to' in request data ...
2025-09-15 10:55:37.706 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 10:55:37.707 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 10:55:37.709 +01:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.String' ...
2025-09-15 10:55:37.716 +01:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.String'.
2025-09-15 10:59:56.647 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi) in 258967.9802ms
2025-09-15 10:59:56.651 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 10:59:56.657 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45f290d1512sm85080665e9.16 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45f290d1512sm85080665e9.16 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CMSApi.Application.Services.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Application\Services\EmailSender.cs:line 30
   at CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail(String to) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\TestEmailController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 10:59:56.710 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - 500 null text/plain; charset=utf-8 259310.196ms
2025-09-15 11:00:02.798 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 11:00:02.805 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 11:00:02.807 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 11:00:02.810 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:00:02.812 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:00:02.821 +01:00 [DBG] Successfully validated the token.
2025-09-15 11:00:02.822 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:00:02.825 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:00:02.828 +01:00 [DBG] Authorization was successful.
2025-09-15 11:00:02.830 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:00:02.832 +01:00 [INF] Route matched with {action = "SendTestEmail", controller = "TestEmail"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTestEmail(System.String) on controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi).
2025-09-15 11:00:02.835 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-15 11:00:02.836 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-15 11:00:02.838 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-15 11:00:02.841 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-15 11:00:02.843 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-15 11:00:02.845 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:00:02.846 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:00:02.848 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' ...
2025-09-15 11:00:02.850 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' using the name 'to' in request data ...
2025-09-15 11:00:02.852 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:00:02.854 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:00:02.855 +01:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.String' ...
2025-09-15 11:00:02.857 +01:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.String'.
2025-09-15 11:00:28.221 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi) in 25375.7901ms
2025-09-15 11:00:28.223 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:00:28.225 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45e0187f0a7sm96571935e9.3 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45e0187f0a7sm96571935e9.3 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CMSApi.Application.Services.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Application\Services\EmailSender.cs:line 30
   at CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail(String to) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\TestEmailController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:00:28.238 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - 500 null text/plain; charset=utf-8 25440.2819ms
2025-09-15 11:00:36.852 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 11:00:36.865 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 11:00:36.869 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 11:00:36.872 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:00:36.875 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:00:36.879 +01:00 [DBG] Successfully validated the token.
2025-09-15 11:00:36.880 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:00:36.881 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:00:36.882 +01:00 [DBG] Authorization was successful.
2025-09-15 11:00:36.883 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:00:36.884 +01:00 [INF] Route matched with {action = "SendTestEmail", controller = "TestEmail"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTestEmail(System.String) on controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi).
2025-09-15 11:00:36.886 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-15 11:00:36.889 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-15 11:00:36.892 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-15 11:00:36.894 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-15 11:00:36.895 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-15 11:00:36.896 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:00:36.897 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:00:36.898 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' ...
2025-09-15 11:00:36.899 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' using the name 'to' in request data ...
2025-09-15 11:00:36.901 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:00:36.903 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:00:36.905 +01:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.String' ...
2025-09-15 11:00:36.908 +01:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.String'.
2025-09-15 11:08:50.291 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi) in 493395.325ms
2025-09-15 11:08:50.294 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:08:50.295 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45e0156b0a8sm174022585e9.3 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45e0156b0a8sm174022585e9.3 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CMSApi.Application.Services.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Application\Services\EmailSender.cs:line 30
   at CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail(String to) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\TestEmailController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:08:50.302 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - 500 null text/plain; charset=utf-8 493449.8614ms
2025-09-15 11:08:56.779 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 11:08:56.784 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 11:08:56.785 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 11:08:56.787 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:08:56.789 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:08:56.791 +01:00 [DBG] Successfully validated the token.
2025-09-15 11:08:56.793 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:08:56.794 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:08:56.796 +01:00 [DBG] Authorization was successful.
2025-09-15 11:08:56.797 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:08:56.798 +01:00 [INF] Route matched with {action = "SendTestEmail", controller = "TestEmail"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTestEmail(System.String) on controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi).
2025-09-15 11:08:56.800 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-15 11:08:56.802 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-15 11:08:56.804 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-15 11:08:56.806 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-15 11:08:56.808 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-15 11:08:56.811 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:08:56.812 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:08:56.814 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' ...
2025-09-15 11:08:56.816 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' using the name 'to' in request data ...
2025-09-15 11:08:56.818 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:08:56.819 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:08:56.820 +01:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.String' ...
2025-09-15 11:08:56.822 +01:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.String'.
2025-09-15 11:11:02.539 +01:00 [INF] Executed action CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi) in 125727.892ms
2025-09-15 11:11:02.541 +01:00 [INF] Executed endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:11:02.543 +01:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45f27f44624sm95927985e9.3 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-45f27f44624sm95927985e9.3 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CMSApi.Application.Services.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage)
   at CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail(String to)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:11:02.549 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - 500 null text/plain; charset=utf-8 125770.0415ms
2025-09-15 11:11:03.565 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 11:11:03.792 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 11:11:03.794 +01:00 [DBG] Request did not match any endpoints
2025-09-15 11:11:03.847 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 11:11:03.850 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 11:11:03.856 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 11:11:03.858 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 11:11:03.859 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 294.5719ms
2025-09-15 11:11:03.872 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 11:11:03.873 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 11:11:03.879 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 11:11:03.880 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 8.394ms
2025-09-15 11:11:03.908 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.8407ms
2025-09-15 11:11:04.076 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 11:11:04.081 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 11:11:04.082 +01:00 [DBG] Request did not match any endpoints
2025-09-15 11:11:04.089 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:11:04.091 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:11:04.178 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.0973ms
2025-09-15 11:11:48.512 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-15 11:11:48.527 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-15 11:11:48.529 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 11:11:48.530 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:11:48.531 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:11:48.533 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:11:48.534 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 11:11:48.540 +01:00 [DBG] Connection id "0HNFK7O2N5GTG", Request id "0HNFK7O2N5GTG:00000011": started reading request body.
2025-09-15 11:11:48.542 +01:00 [DBG] Connection id "0HNFK7O2N5GTG", Request id "0HNFK7O2N5GTG:00000011": done reading request body.
2025-09-15 11:11:48.629 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 11:11:49.082 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-15 11:11:49.086 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-15 11:11:49.198 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-15 11:11:49.298 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:11:49.371 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-15 11:11:49.615 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 11:11:49.665 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:11:49.691 +01:00 [DBG] Created DbConnection. (23ms).
2025-09-15 11:11:49.696 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.011 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.019 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:11:50.027 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-15 11:11:50.038 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-15 11:11:50.048 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-15 11:11:50.121 +01:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-15 11:11:50.167 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 11:11:50.211 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.221 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 92ms reading results.
2025-09-15 11:11:50.227 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.236 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (8ms).
2025-09-15 11:11:50.331 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-15 11:11:50.372 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-15 11:11:50.377 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.381 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.384 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:11:50.385 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:11:50.387 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-15 11:11:50.389 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-15 11:11:50.396 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-15 11:11:50.401 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.403 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-15 11:11:50.405 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.407 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:11:50.422 +01:00 [INF] Setting HTTP status code 200.
2025-09-15 11:11:50.426 +01:00 [INF] Writing value of type '<>f__AnonymousType12`1' as Json.
2025-09-15 11:11:50.430 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-15 11:11:50.437 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:11:50.442 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:11:50.445 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-15 11:11:50.447 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 1934.8226ms
2025-09-15 11:12:31.863 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/TestEmail/send?to=kemideb14%40gmail.com - null 0
2025-09-15 11:12:31.880 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TestEmail/send'
2025-09-15 11:12:31.882 +01:00 [DBG] Endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)' with route pattern 'api/TestEmail/send' is valid for the request path '/api/TestEmail/send'
2025-09-15 11:12:31.884 +01:00 [DBG] Request matched endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:12:31.886 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:12:31.888 +01:00 [DBG] Successfully validated the token.
2025-09-15 11:12:31.890 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:12:31.892 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-15 11:12:31.894 +01:00 [DBG] Authorization was successful.
2025-09-15 11:12:31.895 +01:00 [INF] Executing endpoint 'CMSApi.Presentation.Controllers.TestEmailController.SendTestEmail (CMSApi)'
2025-09-15 11:12:31.900 +01:00 [INF] Route matched with {action = "SendTestEmail", controller = "TestEmail"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTestEmail(System.String) on controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi).
2025-09-15 11:12:31.902 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-15 11:12:31.904 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-15 11:12:31.908 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-09-15 11:12:31.910 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-15 11:12:31.912 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-15 11:12:31.913 +01:00 [DBG] Executing controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:12:31.915 +01:00 [DBG] Executed controller factory for controller CMSApi.Presentation.Controllers.TestEmailController (CMSApi)
2025-09-15 11:12:31.916 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' ...
2025-09-15 11:12:31.918 +01:00 [DBG] Attempting to bind parameter 'to' of type 'System.String' using the name 'to' in request data ...
2025-09-15 11:12:31.919 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:12:31.921 +01:00 [DBG] Done attempting to bind parameter 'to' of type 'System.String'.
2025-09-15 11:12:31.922 +01:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.String' ...
2025-09-15 11:12:31.925 +01:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.String'.
2025-09-15 11:29:37.140 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 11:29:37.273 +01:00 [DBG] Hosting starting
2025-09-15 11:29:37.311 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 11:29:37.322 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 11:29:37.331 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 11:29:37.342 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 11:29:37.346 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 11:29:37.351 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 11:29:37.353 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 11:29:37.358 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 11:29:37.360 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 11:29:37.363 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 11:29:37.365 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 11:29:37.371 +01:00 [DBG] Middleware loaded
2025-09-15 11:29:37.373 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 11:29:37.375 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 11:29:37.568 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 11:29:37.570 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 11:29:37.583 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 11:29:37.690 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 11:29:37.691 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 11:29:37.692 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 11:29:37.694 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 11:29:37.695 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 11:29:37.696 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 11:29:37.704 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:29:37.710 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:29:37.748 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 11:29:37.749 +01:00 [INF] Hosting environment: Development
2025-09-15 11:29:37.751 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 11:29:37.752 +01:00 [DBG] Hosting started
2025-09-15 11:30:17.679 +01:00 [DBG] Connection id "0HNFK8BEN5K65" accepted.
2025-09-15 11:30:17.717 +01:00 [DBG] Connection id "0HNFK8BEN5K65" started.
2025-09-15 11:30:17.778 +01:00 [DBG] Connection 0HNFK8BEN5K65 established using the following protocol: "Tls13"
2025-09-15 11:30:17.834 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 11:30:17.958 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 11:30:17.961 +01:00 [DBG] Request did not match any endpoints
2025-09-15 11:30:18.035 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 11:30:18.038 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 11:30:18.045 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 11:30:18.047 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 11:30:18.063 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 224.4732ms
2025-09-15 11:30:18.066 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 11:30:18.070 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 11:30:18.099 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 11:30:18.101 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 30.5337ms
2025-09-15 11:30:18.118 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.9326ms
2025-09-15 11:30:18.259 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 11:30:18.264 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 11:30:18.267 +01:00 [DBG] Request did not match any endpoints
2025-09-15 11:30:18.417 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 158.3423ms
2025-09-15 11:30:30.023 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 143
2025-09-15 11:30:30.033 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:30:30.036 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:30:30.111 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:30:30.187 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:30:30.193 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:30:30.196 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:30:30.202 +01:00 [DBG] Connection id "0HNFK8BEN5K65", Request id "0HNFK8BEN5K65:00000009": started reading request body.
2025-09-15 11:30:30.205 +01:00 [DBG] Connection id "0HNFK8BEN5K65", Request id "0HNFK8BEN5K65:00000009": done reading request body.
2025-09-15 11:30:30.331 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 11:30:30.381 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:30:30.829 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-15 11:30:30.833 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-15 11:30:30.954 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-15 11:30:31.060 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:30:31.140 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-09-15 11:30:31.434 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: SingleQueryingEnumerable.Create<IdentityRole>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            IdentityRole entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                IdentityRole instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(IdentityRole);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityRole.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (IdentityRole)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]: 
                            {
                                return 
                                {
                                    IdentityRole instance;
                                    instance = new IdentityRole();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<NormalizedName>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(IdentityRole)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 11:30:31.495 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:30:31.518 +01:00 [DBG] Created DbConnection. (21ms).
2025-09-15 11:30:31.525 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:31.865 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:31.871 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:30:31.883 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-09-15 11:30:31.898 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (27ms).
2025-09-15 11:30:31.913 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:30:32.003 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:30:32.023 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:32.035 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 20ms reading results.
2025-09-15 11:30:32.045 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:32.053 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (8ms).
2025-09-15 11:30:32.065 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:32.069 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:32.072 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:30:32.075 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:30:32.078 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-15 11:30:32.080 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:30:32.085 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:30:32.088 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:32.091 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-15 11:30:32.096 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:32.098 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:30:32.454 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:30:40.417 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role STRING does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\Auth\IdentityUserEndpoints.cs:line 58
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:30:40.474 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:30:40.481 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:30:40.486 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-15 11:30:40.487 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 10464.6257ms
2025-09-15 11:32:05.806 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 178
2025-09-15 11:32:05.852 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:32:05.854 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:32:05.857 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:32:05.859 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:32:05.860 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:32:05.862 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:32:05.863 +01:00 [DBG] Connection id "0HNFK8BEN5K65", Request id "0HNFK8BEN5K65:0000000B": started reading request body.
2025-09-15 11:32:05.864 +01:00 [DBG] Connection id "0HNFK8BEN5K65", Request id "0HNFK8BEN5K65:0000000B": done reading request body.
2025-09-15 11:32:05.867 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:32:05.918 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:32:05.924 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:32:05.926 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-15 11:32:05.927 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.929 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.930 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:32:05.931 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:32:05.932 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:32:05.934 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:05.940 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:05.943 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.945 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-15 11:32:05.946 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.948 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:32:05.949 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.951 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.954 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:32:05.955 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:32:05.957 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-15 11:32:05.958 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:05.960 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:05.963 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.965 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-15 11:32:05.966 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:05.968 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:32:06.115 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:32:22.563 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role INTERN does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\Auth\IdentityUserEndpoints.cs:line 58
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:32:22.575 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:32:22.577 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:22.579 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-15 11:32:22.582 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 16775.8281ms
2025-09-15 11:32:31.654 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 11:32:31.755 +01:00 [DBG] Hosting starting
2025-09-15 11:32:31.794 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 11:32:31.813 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 11:32:31.823 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 11:32:31.836 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 11:32:31.844 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 11:32:31.848 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 11:32:31.850 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 11:32:31.859 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 11:32:31.864 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 11:32:31.867 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 11:32:31.869 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 11:32:31.885 +01:00 [DBG] Middleware loaded
2025-09-15 11:32:31.898 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 11:32:31.901 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 11:32:32.257 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 11:32:32.262 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 11:32:32.300 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 11:32:32.536 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 11:32:32.544 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 11:32:32.546 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 11:32:32.547 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 11:32:32.549 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 11:32:32.550 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 11:32:32.571 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:32:32.594 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:32:32.654 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 11:32:32.656 +01:00 [INF] Hosting environment: Development
2025-09-15 11:32:32.658 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 11:32:32.660 +01:00 [DBG] Hosting started
2025-09-15 11:32:35.301 +01:00 [DBG] Connection id "0HNFK8CNNKIL4" accepted.
2025-09-15 11:32:35.309 +01:00 [DBG] Connection id "0HNFK8CNNKIL4" started.
2025-09-15 11:32:35.370 +01:00 [DBG] Connection 0HNFK8CNNKIL4 established using the following protocol: "Tls13"
2025-09-15 11:32:35.419 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 178
2025-09-15 11:32:35.459 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:32:35.464 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:32:35.491 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:32:35.550 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:32:35.558 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:32:35.561 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:32:35.565 +01:00 [DBG] Connection id "0HNFK8CNNKIL4", Request id "0HNFK8CNNKIL4:00000001": started reading request body.
2025-09-15 11:32:35.567 +01:00 [DBG] Connection id "0HNFK8CNNKIL4", Request id "0HNFK8CNNKIL4:00000001": done reading request body.
2025-09-15 11:32:35.684 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 11:32:35.726 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:32:36.163 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-15 11:32:36.167 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-15 11:32:36.287 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-15 11:32:36.387 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:32:36.466 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-09-15 11:32:36.716 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: SingleQueryingEnumerable.Create<IdentityRole>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            IdentityRole entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                IdentityRole instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(IdentityRole);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityRole.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (IdentityRole)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]: 
                            {
                                return 
                                {
                                    IdentityRole instance;
                                    instance = new IdentityRole();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<NormalizedName>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(IdentityRole)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 11:32:36.762 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:32:36.783 +01:00 [DBG] Created DbConnection. (19ms).
2025-09-15 11:32:36.791 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.056 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.063 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:32:37.073 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-09-15 11:32:37.083 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-15 11:32:37.093 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:37.161 +01:00 [INF] Executed DbCommand (68ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:37.179 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.188 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-09-15 11:32:37.193 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.199 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-15 11:32:37.207 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.209 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.211 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:32:37.212 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:32:37.213 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:32:37.214 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:37.219 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:32:37.222 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.224 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-15 11:32:37.225 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:32:37.226 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:32:37.449 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:35:28.948 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role INTERN does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\Auth\IdentityUserEndpoints.cs:line 58
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:35:28.992 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:35:29.000 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:29.004 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-15 11:35:29.008 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 173593.4904ms
2025-09-15 11:35:59.407 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 179
2025-09-15 11:35:59.415 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:35:59.417 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:35:59.419 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:35:59.425 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:35:59.426 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:35:59.427 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:35:59.428 +01:00 [DBG] Connection id "0HNFK8CNNKIL4", Request id "0HNFK8CNNKIL4:00000003": started reading request body.
2025-09-15 11:35:59.430 +01:00 [DBG] Connection id "0HNFK8CNNKIL4", Request id "0HNFK8CNNKIL4:00000003": done reading request body.
2025-09-15 11:35:59.434 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:35:59.483 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:35:59.488 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:35:59.489 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-15 11:35:59.490 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.491 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.493 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:35:59.494 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 11:35:59.495 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:35:59.497 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:35:59.502 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:35:59.504 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.505 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-15 11:35:59.507 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.508 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:35:59.510 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.511 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.512 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:35:59.514 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:35:59.515 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:35:59.516 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:35:59.518 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:35:59.520 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.521 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-15 11:35:59.522 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:35:59.524 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:35:59.650 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:36:10.701 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role FINANCE does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\Auth\IdentityUserEndpoints.cs:line 58
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:36:10.715 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:36:10.718 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:36:10.722 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-15 11:36:10.725 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 11320.5364ms
2025-09-15 11:37:12.170 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 178
2025-09-15 11:37:12.181 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:37:12.183 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:37:12.185 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:37:12.189 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:37:12.191 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:37:12.192 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:37:12.193 +01:00 [DBG] Connection id "0HNFK8CNNKIL4", Request id "0HNFK8CNNKIL4:00000005": started reading request body.
2025-09-15 11:37:12.194 +01:00 [DBG] Connection id "0HNFK8CNNKIL4", Request id "0HNFK8CNNKIL4:00000005": done reading request body.
2025-09-15 11:37:12.203 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:37:12.213 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:37:12.218 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:37:12.220 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-15 11:37:12.222 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.224 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.225 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:37:12.226 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 11:37:12.227 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:37:12.228 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:37:12.232 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:37:12.235 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.237 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-15 11:37:12.239 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.240 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:37:12.242 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.243 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.244 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:37:12.245 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-15 11:37:12.246 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:37:12.248 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:37:12.250 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:37:12.253 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.254 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-15 11:37:12.255 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:37:12.256 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:37:12.394 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:44:13.046 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role INTERN does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\Auth\IdentityUserEndpoints.cs:line 58
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:44:13.097 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:44:13.098 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:44:13.100 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-15 11:44:13.102 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 420932.4286ms
2025-09-15 11:46:27.136 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-15 11:46:27.246 +01:00 [DBG] Hosting starting
2025-09-15 11:46:27.286 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 11:46:27.303 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-15 11:46:27.315 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-15 11:46:27.328 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-15 11:46:27.333 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 11:46:27.337 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-15 11:46:27.340 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-15 11:46:27.347 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-15 11:46:27.349 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-15 11:46:27.353 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-15 11:46:27.355 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-15 11:46:27.367 +01:00 [DBG] Middleware loaded
2025-09-15 11:46:27.371 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-15 11:46:27.373 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-15 11:46:27.554 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-15 11:46:27.559 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-15 11:46:27.573 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-15 11:46:27.703 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-15 11:46:27.706 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-15 11:46:27.712 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-15 11:46:27.714 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-15 11:46:27.717 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-15 11:46:27.720 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-15 11:46:27.737 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:46:27.752 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:46:27.801 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 11:46:27.804 +01:00 [INF] Hosting environment: Development
2025-09-15 11:46:27.806 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-15 11:46:27.808 +01:00 [DBG] Hosting started
2025-09-15 11:46:46.821 +01:00 [DBG] Connection id "0HNFK8KLGBNE0" accepted.
2025-09-15 11:46:46.826 +01:00 [DBG] Connection id "0HNFK8KLGBNE0" started.
2025-09-15 11:46:46.876 +01:00 [DBG] Connection 0HNFK8KLGBNE0 established using the following protocol: "Tls13"
2025-09-15 11:46:46.933 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 178
2025-09-15 11:46:46.981 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:46:46.985 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:46:47.017 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:46:47.127 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:46:47.132 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:46:47.135 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:46:47.142 +01:00 [DBG] Connection id "0HNFK8KLGBNE0", Request id "0HNFK8KLGBNE0:00000001": started reading request body.
2025-09-15 11:46:47.145 +01:00 [DBG] Connection id "0HNFK8KLGBNE0", Request id "0HNFK8KLGBNE0:00000001": done reading request body.
2025-09-15 11:46:47.276 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-15 11:46:47.326 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:46:47.781 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-15 11:46:47.786 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-15 11:46:47.920 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-15 11:46:48.037 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:46:48.127 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-09-15 11:46:48.395 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: SingleQueryingEnumerable.Create<IdentityRole>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            IdentityRole entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                IdentityRole instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(IdentityRole);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityRole.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (IdentityRole)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]: 
                            {
                                return 
                                {
                                    IdentityRole instance;
                                    instance = new IdentityRole();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<NormalizedName>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(IdentityRole)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 11:46:48.444 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:46:48.466 +01:00 [DBG] Created DbConnection. (19ms).
2025-09-15 11:46:48.474 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.800 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.806 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:46:48.814 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-15 11:46:48.826 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-15 11:46:48.838 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:46:48.908 +01:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:46:48.928 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.938 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-09-15 11:46:48.945 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.954 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (9ms).
2025-09-15 11:46:48.963 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.967 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.970 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:46:48.973 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:46:48.975 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-15 11:46:48.976 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:46:48.980 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:46:48.983 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.986 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-15 11:46:48.988 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:46:48.989 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:46:49.223 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:48:08.592 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role INTERN does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 11:48:08.676 +01:00 [DBG] Connection id "0HNFK8KLGBNE0" received FIN.
2025-09-15 11:48:08.677 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:48:08.743 +01:00 [DBG] Connection id "0HNFK8KLGBNE0" is closed. The last processed stream ID was 1.
2025-09-15 11:48:08.747 +01:00 [DBG] Connection id "0HNFK8KLGBNE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 11:48:08.747 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:48:08.754 +01:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-09-15 11:48:08.758 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 81828.7911ms
2025-09-15 11:48:08.779 +01:00 [DBG] The connection queue processing loop for 0HNFK8KLGBNE0 completed.
2025-09-15 11:48:08.790 +01:00 [DBG] Connection id "0HNFK8KLGBNE0" stopped.
2025-09-15 11:48:09.589 +01:00 [DBG] Connection id "0HNFK8KLGBNE1" accepted.
2025-09-15 11:48:09.596 +01:00 [DBG] Connection id "0HNFK8KLGBNE1" started.
2025-09-15 11:48:09.609 +01:00 [DBG] Connection 0HNFK8KLGBNE1 established using the following protocol: "Tls13"
2025-09-15 11:48:09.613 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-15 11:48:09.743 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-15 11:48:09.745 +01:00 [DBG] Request did not match any endpoints
2025-09-15 11:48:09.820 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-15 11:48:09.823 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-15 11:48:09.829 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-15 11:48:09.832 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-15 11:48:09.838 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 225.333ms
2025-09-15 11:48:09.851 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 11:48:09.853 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-15 11:48:09.879 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-15 11:48:09.884 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 32.7366ms
2025-09-15 11:48:09.908 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.5336ms
2025-09-15 11:48:10.062 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-15 11:48:10.070 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-15 11:48:10.072 +01:00 [DBG] Request did not match any endpoints
2025-09-15 11:48:10.084 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:48:10.089 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-15 11:48:10.188 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.2368ms
2025-09-15 11:49:29.998 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 175
2025-09-15 11:49:30.015 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-15 11:49:30.019 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:49:30.021 +01:00 [INF] No CORS policy found for the specified request.
2025-09-15 11:49:30.025 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:49:30.028 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-15 11:49:30.031 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:49:30.033 +01:00 [DBG] Connection id "0HNFK8KLGBNE1", Request id "0HNFK8KLGBNE1:00000009": started reading request body.
2025-09-15 11:49:30.035 +01:00 [DBG] Connection id "0HNFK8KLGBNE1", Request id "0HNFK8KLGBNE1:00000009": done reading request body.
2025-09-15 11:49:30.040 +01:00 [DBG] User password validation failed: PasswordRequiresNonAlphanumeric.
2025-09-15 11:49:30.096 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-15 11:49:30.100 +01:00 [DBG] Creating DbConnection.
2025-09-15 11:49:30.102 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-15 11:49:30.103 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.105 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.107 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:49:30.109 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:49:30.110 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-15 11:49:30.114 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:49:30.118 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:49:30.155 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 11:49:30.175 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.179 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 58ms reading results.
2025-09-15 11:49:30.183 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.185 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-15 11:49:30.203 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-09-15 11:49:30.235 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: SingleQueryingEnumerable.Create<IdentityUserRole<string>>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            IdentityUserRole<string> entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                IdentityUserRole<string> instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(IdentityUserRole<string>);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUserRole<string>.UserId, IdentityUserRole<string>.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        (object)dataReader.GetString(0), 
                        (object)dataReader.GetString(1) 
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (IdentityUserRole<string>)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: IdentityUserRole<string> | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: IdentityUserRole<string> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>")]: 
                            {
                                return 
                                {
                                    IdentityUserRole<string> instance;
                                    instance = new IdentityUserRole<string>();
                                    instance.<UserId>k__BackingField = dataReader.GetString(0);
                                    instance.<RoleId>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: IdentityUserRole<string> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(IdentityUserRole<string>)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 11:49:30.245 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.248 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.250 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:49:30.251 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:49:30.253 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-15 11:49:30.255 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-15 11:49:30.264 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-15 11:49:30.267 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.269 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-15 11:49:30.271 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.272 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:49:30.276 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.279 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.281 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:49:30.283 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:49:30.284 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-15 11:49:30.286 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:49:30.289 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-15 11:49:30.294 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.297 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-15 11:49:30.299 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.301 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-15 11:49:30.326 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-15 11:49:30.335 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-15 11:49:30.352 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19], [Property: AppUser.Role (string) Required, 20] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID, a.Role
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19], [Property: AppUser.Role (string) Required, 20] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID, a.Role
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    instance.<Role>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-15 11:49:30.361 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.364 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.365 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-15 11:49:30.367 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-15 11:49:30.369 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-15 11:49:30.371 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID], [a].[Role]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-15 11:49:30.382 +01:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID], [a].[Role]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-15 11:49:30.386 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.388 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-15 11:49:30.397 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Role'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9395e908-f47d-4ec1-9952-97108511c5b0
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Role'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9395e908-f47d-4ec1-9952-97108511c5b0
Error Number:207,State:1,Class:16
2025-09-15 11:49:30.580 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-15 11:49:30.584 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Role'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateUserName(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateAsync(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.ValidateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel, WelcomeEmailJob welcomeEmailJob)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:9395e908-f47d-4ec1-9952-97108511c5b0
Error Number:207,State:1,Class:16
2025-09-15 11:49:30.613 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-15 11:49:30.616 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-15 11:49:30.618 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-15 11:49:30.620 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 622.3411ms
2025-09-15 12:16:46.637 +01:00 [DBG] Connection id "0HNFK8KLGBNE1" received FIN.
2025-09-15 12:16:46.646 +01:00 [DBG] Connection id "0HNFK8KLGBNE1" is closed. The last processed stream ID was 9.
2025-09-15 12:16:46.646 +01:00 [DBG] Connection id "0HNFK8KLGBNE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-15 12:16:46.657 +01:00 [DBG] The connection queue processing loop for 0HNFK8KLGBNE1 completed.
2025-09-15 12:16:46.659 +01:00 [DBG] Connection id "0HNFK8KLGBNE1" stopped.
