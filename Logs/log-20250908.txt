2025-09-08 08:52:20.916 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 08:52:21.064 +01:00 [DBG] Hosting starting
2025-09-08 08:52:21.112 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 08:52:21.129 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 08:52:21.177 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 08:52:21.205 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 08:52:21.212 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 08:52:21.218 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 08:52:21.221 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 08:52:21.228 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 08:52:21.233 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 08:52:21.237 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 08:52:21.240 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 08:52:21.253 +01:00 [DBG] Middleware loaded
2025-09-08 08:52:21.257 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 08:52:21.261 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 08:52:21.489 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 08:52:21.493 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 08:52:21.516 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 08:52:21.688 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 08:52:21.691 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 08:52:21.694 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 08:52:21.696 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 08:52:21.698 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 08:52:21.700 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 08:52:21.709 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 08:52:21.721 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 08:52:21.775 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 08:52:21.777 +01:00 [INF] Hosting environment: Development
2025-09-08 08:52:21.779 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 08:52:21.781 +01:00 [DBG] Hosting started
2025-09-08 08:52:24.875 +01:00 [DBG] Connection id "0HNFELIJ5713V" accepted.
2025-09-08 08:52:24.879 +01:00 [DBG] Connection id "0HNFELIJ5713V" started.
2025-09-08 08:52:24.941 +01:00 [DBG] Connection 0HNFELIJ5713V established using the following protocol: "Tls13"
2025-09-08 08:52:25.015 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 08:52:25.215 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 08:52:25.219 +01:00 [DBG] Request did not match any endpoints
2025-09-08 08:52:25.343 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 08:52:25.352 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 08:52:25.375 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 08:52:25.383 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 08:52:25.389 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 379.5099ms
2025-09-08 08:52:25.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 08:52:25.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 08:52:25.451 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 08:52:25.455 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 57.203ms
2025-09-08 08:52:25.625 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 227.5822ms
2025-09-08 08:52:25.716 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 08:52:25.720 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 08:52:25.721 +01:00 [DBG] Request did not match any endpoints
2025-09-08 08:52:25.868 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.9257ms
2025-09-08 08:53:39.194 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 93
2025-09-08 08:53:39.209 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 08:53:39.210 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 08:53:39.223 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 08:53:39.305 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 08:53:39.310 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 08:53:39.314 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 08:53:39.319 +01:00 [DBG] Connection id "0HNFELIJ5713V", Request id "0HNFELIJ5713V:00000009": started reading request body.
2025-09-08 08:53:39.321 +01:00 [DBG] Connection id "0HNFELIJ5713V", Request id "0HNFELIJ5713V:00000009": done reading request body.
2025-09-08 08:53:39.487 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 08:53:40.070 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 08:53:40.073 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 08:53:40.191 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 08:53:40.315 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 08:53:40.434 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 08:53:40.723 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 08:53:40.778 +01:00 [DBG] Creating DbConnection.
2025-09-08 08:53:40.812 +01:00 [DBG] Created DbConnection. (32ms).
2025-09-08 08:53:40.819 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.163 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.170 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 08:53:41.180 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 08:53:41.192 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2025-09-08 08:53:41.206 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 08:53:41.290 +01:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 08:53:41.310 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.321 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 21ms reading results.
2025-09-08 08:53:41.326 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.336 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (9ms).
2025-09-08 08:53:41.345 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 08:53:41.355 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 08:53:41.362 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.366 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.368 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 08:53:41.370 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 08:53:41.371 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 08:53:41.372 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 08:53:41.382 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 08:53:41.385 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.387 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 08:53:41.389 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.390 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 08:53:41.424 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 08:53:41.500 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 08:53:41.506 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 08:53:41.513 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 08:53:41.540 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 08:53:41.605 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.609 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.614 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 08:53:41.615 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 08:53:41.617 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 08:53:41.619 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [ID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-09-08 08:53:41.631 +01:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [ID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-09-08 08:53:41.638 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 08:53:41.639 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 08:53:41.668 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d83639b6-4e05-473a-92c9-31d7f3d6f2ed
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d83639b6-4e05-473a-92c9-31d7f3d6f2ed
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-08 08:53:42.304 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:04:10.447 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:04:10.549 +01:00 [DBG] Hosting starting
2025-09-08 09:04:10.582 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:04:10.594 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:04:10.624 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:04:10.637 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:04:10.644 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:04:10.647 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:04:10.649 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:04:10.656 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:04:10.658 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:04:10.661 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:04:10.663 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:04:10.671 +01:00 [DBG] Middleware loaded
2025-09-08 09:04:10.675 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:04:10.677 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:04:10.799 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:04:10.802 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:04:10.817 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:04:11.015 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:04:11.020 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:04:11.022 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:04:11.024 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:04:11.026 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:04:11.030 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:04:11.044 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:04:11.052 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:04:11.097 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:04:11.099 +01:00 [INF] Hosting environment: Development
2025-09-08 09:04:11.100 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:04:11.102 +01:00 [DBG] Hosting started
2025-09-08 09:04:13.044 +01:00 [DBG] Connection id "0HNFELP66QRLO" accepted.
2025-09-08 09:04:13.047 +01:00 [DBG] Connection id "0HNFELP66QRLO" started.
2025-09-08 09:04:13.096 +01:00 [DBG] Connection 0HNFELP66QRLO established using the following protocol: "Tls13"
2025-09-08 09:04:13.149 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:04:13.259 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:04:13.263 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:04:13.329 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:04:13.335 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:04:13.343 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:04:13.346 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:04:13.353 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 207.1646ms
2025-09-08 09:04:13.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:04:13.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:04:13.397 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:04:13.399 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 30.6749ms
2025-09-08 09:04:13.413 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.9743ms
2025-09-08 09:04:13.557 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:04:13.562 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:04:13.565 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:04:13.685 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 127.9027ms
2025-09-08 09:04:28.423 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 93
2025-09-08 09:04:28.451 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:04:28.454 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:04:28.495 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:04:28.567 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:04:28.573 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:04:28.577 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:04:28.582 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:00000009": started reading request body.
2025-09-08 09:04:28.586 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:00000009": done reading request body.
2025-09-08 09:04:28.707 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:04:29.240 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:04:29.244 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:04:29.368 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:04:29.475 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:04:29.546 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 09:04:29.801 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:04:29.850 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:04:29.873 +01:00 [DBG] Created DbConnection. (20ms).
2025-09-08 09:04:29.878 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.087 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.092 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:04:30.098 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 09:04:30.107 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-09-08 09:04:30.115 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:04:30.176 +01:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:04:30.191 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.201 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-09-08 09:04:30.208 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.215 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-08 09:04:30.224 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 09:04:30.232 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:04:30.241 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.244 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.245 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:04:30.246 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:04:30.249 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:04:30.251 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:04:30.257 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:04:30.259 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.261 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 09:04:30.263 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.265 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:04:30.293 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:04:30.356 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:04:30.363 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 09:04:30.368 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 09:04:30.390 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 09:04:30.449 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.453 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.458 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:04:30.460 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 09:04:30.463 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-08 09:04:30.465 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-09-08 09:04:30.471 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-09-08 09:04:30.477 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.479 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 09:04:30.482 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.484 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:04:30.492 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:04:30.495 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 09:04:30.500 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 09:04:30.504 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 09:04:30.507 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:04:30.511 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:04:30.516 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:04:30.519 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 09:04:30.521 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 2097.8054ms
2025-09-08 09:05:05.463 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 09:05:05.474 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 09:05:05.476 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:05:05.478 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:05:05.482 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:05:05.484 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:05:05.485 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:05:05.487 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:0000000B": started reading request body.
2025-09-08 09:05:05.488 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:0000000B": done reading request body.
2025-09-08 09:05:05.547 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:05:05.555 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:05:05.557 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 09:05:05.559 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:05:05.561 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:05:05.563 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:05:05.565 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:05:05.567 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:05:05.568 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:05:05.571 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:05:05.583 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:05:05.586 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:05:05.588 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 09:05:05.589 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:05:05.591 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:05:05.691 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 09:05:05.697 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 09:05:05.700 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:05:05.703 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:05:05.704 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:05:05.706 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 09:05:05.708 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 245.3164ms
2025-09-08 09:06:31.902 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 09:06:31.914 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 09:06:31.915 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:06:31.970 +01:00 [DBG] Successfully validated the token.
2025-09-08 09:06:31.973 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 09:06:31.980 +01:00 [DBG] Authorization was successful.
2025-09-08 09:06:31.984 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:06:32.143 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:10:53.678 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:10:53.781 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 261879.4954ms
2025-09-08 09:10:54.735 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:10:54.759 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:10:54.762 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:10:54.765 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:10:54.768 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:10:54.770 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:10:54.771 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:10:54.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 37.8185ms
2025-09-08 09:10:54.825 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:10:54.836 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:10:54.837 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:10:54.837 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 12.5076ms
2025-09-08 09:10:54.870 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.4362ms
2025-09-08 09:10:55.147 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:10:55.152 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:10:55.154 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:10:55.156 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:10:55.159 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:10:55.171 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.9955ms
2025-09-08 09:11:03.874 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 09:11:03.880 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 09:11:03.881 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:11:03.883 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:03.885 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-08 09:11:03.887 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 09:11:03.892 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 09:11:03.894 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 401 0 null 19.2777ms
2025-09-08 09:11:43.877 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 09:11:43.899 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 09:11:43.900 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:43.902 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:11:43.903 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:43.905 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:43.906 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:43.909 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:00000019": started reading request body.
2025-09-08 09:11:43.911 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:00000019": done reading request body.
2025-09-08 09:11:43.924 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:11:43.931 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:11:43.933 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 09:11:43.935 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:43.952 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:43.955 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:11:43.957 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:11:43.959 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-08 09:11:43.963 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:11:43.966 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:11:43.969 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:11:43.971 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:43.973 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 09:11:43.976 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:43.978 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 09:11:44.055 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 09:11:44.059 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 09:11:44.062 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:44.064 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:11:44.066 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:44.069 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 09:11:44.071 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 194.0797ms
2025-09-08 09:11:44.303 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 09:11:44.309 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 09:11:44.311 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:44.312 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:11:44.313 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:44.315 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:44.316 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:44.318 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:0000001B": started reading request body.
2025-09-08 09:11:44.319 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:0000001B": done reading request body.
2025-09-08 09:11:44.321 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:11:44.324 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:11:44.326 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 09:11:44.327 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:44.329 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:44.331 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:11:44.332 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:11:44.334 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 09:11:44.335 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:11:44.337 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:11:44.340 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:11:44.342 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:44.345 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 09:11:44.347 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:44.349 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:11:44.419 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 09:11:44.421 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 09:11:44.424 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:44.427 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:11:44.430 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:44.432 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 09:11:44.434 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 131.5062ms
2025-09-08 09:11:50.158 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 09:11:50.163 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 09:11:50.165 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:50.167 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:11:50.168 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:50.170 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:11:50.172 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:50.174 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:0000001D": started reading request body.
2025-09-08 09:11:50.175 +01:00 [DBG] Connection id "0HNFELP66QRLO", Request id "0HNFELP66QRLO:0000001D": done reading request body.
2025-09-08 09:11:50.179 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:11:50.182 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:11:50.183 +01:00 [DBG] Created DbConnection. (0ms).
2025-09-08 09:11:50.184 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:50.186 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:50.189 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:11:50.191 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:11:50.192 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:11:50.193 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:11:50.196 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:11:50.200 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:11:50.202 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:50.204 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 09:11:50.207 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:50.208 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:11:50.275 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 09:11:50.277 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 09:11:50.279 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:11:50.281 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:11:50.283 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:11:50.286 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-08 09:11:50.289 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 130.5251ms
2025-09-08 09:12:18.320 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 09:12:18.330 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 09:12:18.331 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:12:18.333 +01:00 [DBG] Successfully validated the token.
2025-09-08 09:12:18.335 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 09:12:18.336 +01:00 [DBG] Authorization was successful.
2025-09-08 09:12:18.338 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:12:51.418 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:12:51.423 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:12:51.427 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 33107.1419ms
2025-09-08 09:15:52.727 +01:00 [DBG] Connection id "0HNFELP66QRLO" received FIN.
2025-09-08 09:15:52.751 +01:00 [DBG] Connection id "0HNFELP66QRLO" is closed. The last processed stream ID was 31.
2025-09-08 09:15:52.754 +01:00 [DBG] Connection id "0HNFELP66QRLO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 09:15:52.755 +01:00 [DBG] The connection queue processing loop for 0HNFELP66QRLO completed.
2025-09-08 09:15:52.761 +01:00 [DBG] Connection id "0HNFELP66QRLO" stopped.
2025-09-08 09:18:35.000 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:18:35.115 +01:00 [DBG] Hosting starting
2025-09-08 09:18:35.149 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:18:35.161 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:18:35.171 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:18:35.184 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:18:35.191 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:18:35.196 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:18:35.201 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:18:35.210 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:18:35.214 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:18:35.216 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:18:35.217 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:18:35.226 +01:00 [DBG] Middleware loaded
2025-09-08 09:18:35.231 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:18:35.233 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:18:35.365 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:18:35.369 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:18:35.383 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:18:35.566 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:18:35.568 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:18:35.570 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:18:35.571 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:18:35.572 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:18:35.573 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:18:35.581 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:18:35.587 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:18:35.626 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:18:35.629 +01:00 [INF] Hosting environment: Development
2025-09-08 09:18:35.630 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:18:35.632 +01:00 [DBG] Hosting started
2025-09-08 09:18:50.109 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:18:50.208 +01:00 [DBG] Hosting starting
2025-09-08 09:18:50.243 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:18:50.256 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:18:50.267 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:18:50.280 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:18:50.284 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:18:50.287 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:18:50.289 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:18:50.295 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:18:50.298 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:18:50.301 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:18:50.303 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:18:50.309 +01:00 [DBG] Middleware loaded
2025-09-08 09:18:50.312 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:18:50.314 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:18:50.431 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:18:50.437 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:18:50.450 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:18:50.585 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:18:50.587 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:18:50.589 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:18:50.590 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:18:50.591 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:18:50.593 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:18:50.599 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:18:50.605 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:18:50.642 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:18:50.645 +01:00 [INF] Hosting environment: Development
2025-09-08 09:18:50.646 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:18:50.647 +01:00 [DBG] Hosting started
2025-09-08 09:19:06.368 +01:00 [DBG] Connection id "0HNFEM1GE7KVC" accepted.
2025-09-08 09:19:06.371 +01:00 [DBG] Connection id "0HNFEM1GE7KVC" started.
2025-09-08 09:19:06.418 +01:00 [DBG] Connection 0HNFEM1GE7KVC established using the following protocol: "Tls13"
2025-09-08 09:19:06.479 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 09:19:06.526 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 09:19:06.530 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:19:06.705 +01:00 [DBG] Successfully validated the token.
2025-09-08 09:19:06.711 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 09:19:06.719 +01:00 [DBG] Authorization was successful.
2025-09-08 09:19:06.722 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:19:06.845 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:21:08.972 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 09:21:08.975 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at CMSApi.Presentation.Controllers.AccountEndpoint.GetUserProfile(ClaimsPrincipal user, UserManager`1 userManager)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:21:09.001 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 500 null text/plain; charset=utf-8 122527.5257ms
2025-09-08 09:45:00.247 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:45:00.356 +01:00 [DBG] Hosting starting
2025-09-08 09:45:00.389 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:45:00.400 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:45:00.412 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:45:00.424 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:45:00.429 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:45:00.432 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:45:00.434 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:45:00.441 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:45:00.444 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:45:00.446 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:45:00.448 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:45:00.455 +01:00 [DBG] Middleware loaded
2025-09-08 09:45:00.459 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:45:00.461 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:45:00.580 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:45:00.584 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:45:00.595 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:45:00.713 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:45:00.717 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:45:00.718 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:45:00.719 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:45:00.720 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:45:00.721 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:45:00.729 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:45:00.735 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:45:00.771 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:45:00.773 +01:00 [INF] Hosting environment: Development
2025-09-08 09:45:00.776 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:45:00.777 +01:00 [DBG] Hosting started
2025-09-08 09:45:00.912 +01:00 [DBG] Connection id "0HNFEMFVNGPJ6" accepted.
2025-09-08 09:45:00.918 +01:00 [DBG] Connection id "0HNFEMFVNGPJ6" started.
2025-09-08 09:45:00.960 +01:00 [DBG] Connection 0HNFEMFVNGPJ6 established using the following protocol: "Tls13"
2025-09-08 09:45:01.008 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:45:01.116 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:45:01.119 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:45:01.184 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:45:01.187 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:45:01.195 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:45:01.197 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:45:01.202 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 197.2901ms
2025-09-08 09:45:01.209 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:45:01.209 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:45:01.232 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:45:01.234 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 24.525ms
2025-09-08 09:45:01.248 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.2114ms
2025-09-08 09:45:01.415 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:45:01.429 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:45:01.432 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:45:01.551 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.46ms
2025-09-08 09:45:20.518 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:45:20.530 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:45:20.532 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:45:20.534 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:45:20.536 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:45:20.539 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:45:20.541 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:45:20.542 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 24.1719ms
2025-09-08 09:45:20.555 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:45:20.555 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:45:20.575 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:45:20.578 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 23.7683ms
2025-09-08 09:45:20.588 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.1358ms
2025-09-08 09:45:20.645 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:45:20.651 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:45:20.653 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:45:20.667 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.9479ms
2025-09-08 09:45:52.596 +01:00 [DBG] Connection id "0HNFEMFVNGPJ6" received FIN.
2025-09-08 09:45:52.608 +01:00 [DBG] The connection queue processing loop for 0HNFEMFVNGPJ6 completed.
2025-09-08 09:45:52.610 +01:00 [DBG] Connection id "0HNFEMFVNGPJ6" is closed. The last processed stream ID was 15.
2025-09-08 09:45:52.613 +01:00 [DBG] Connection id "0HNFEMFVNGPJ6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 09:45:52.622 +01:00 [DBG] Connection id "0HNFEMFVNGPJ6" stopped.
2025-09-08 09:45:53.498 +01:00 [DBG] Connection id "0HNFEMFVNGPJ7" accepted.
2025-09-08 09:45:53.501 +01:00 [DBG] Connection id "0HNFEMFVNGPJ7" started.
2025-09-08 09:45:53.508 +01:00 [DBG] Connection 0HNFEMFVNGPJ7 established using the following protocol: "Tls13"
2025-09-08 09:45:53.514 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 09:45:53.526 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 09:45:53.529 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:45:53.543 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:45:53.605 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:45:53.611 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:45:53.616 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:45:53.622 +01:00 [DBG] Connection id "0HNFEMFVNGPJ7", Request id "0HNFEMFVNGPJ7:00000001": started reading request body.
2025-09-08 09:45:53.626 +01:00 [DBG] Connection id "0HNFEMFVNGPJ7", Request id "0HNFEMFVNGPJ7:00000001": done reading request body.
2025-09-08 09:45:53.742 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:45:54.252 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:45:54.256 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:45:54.376 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:45:54.489 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:45:54.569 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 09:45:54.842 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:45:54.893 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:45:54.918 +01:00 [DBG] Created DbConnection. (20ms).
2025-09-08 09:45:54.923 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:45:55.131 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:45:55.137 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:45:55.143 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 09:45:55.154 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-09-08 09:45:55.166 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:45:55.222 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:45:55.282 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:45:55.291 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:45:55.300 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 68ms reading results.
2025-09-08 09:45:55.306 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:45:55.315 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 09:45:55.573 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:46:28.872 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.SignIn(UserManager`1 userManager, LoginModel loginModel, IOptions`1 jwtSettings)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:46:28.905 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:46:28.912 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:46:28.915 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-08 09:46:28.918 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 500 null text/plain; charset=utf-8 35403.8567ms
2025-09-08 09:46:29.918 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:46:29.940 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:46:29.943 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:46:29.946 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:46:29.949 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:46:29.952 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:46:29.955 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:46:29.958 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 39.8321ms
2025-09-08 09:46:29.989 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:46:29.989 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:46:30.003 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:46:30.008 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 19.3275ms
2025-09-08 09:46:30.022 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.9046ms
2025-09-08 09:46:30.180 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:46:30.188 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:46:30.190 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:46:30.194 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:46:30.199 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:46:30.216 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.1552ms
2025-09-08 09:46:37.994 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:46:38.130 +01:00 [DBG] Hosting starting
2025-09-08 09:46:38.175 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:46:38.193 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:46:38.205 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:46:38.220 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:46:38.224 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:46:38.227 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:46:38.229 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:46:38.238 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:46:38.240 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:46:38.242 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:46:38.244 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:46:38.255 +01:00 [DBG] Middleware loaded
2025-09-08 09:46:38.258 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:46:38.260 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:46:38.374 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:46:38.376 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:46:38.387 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:46:38.494 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:46:38.498 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:46:38.500 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:46:38.502 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:46:38.504 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:46:38.505 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:46:38.513 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:46:38.522 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:46:38.562 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:46:38.566 +01:00 [INF] Hosting environment: Development
2025-09-08 09:46:38.568 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:46:38.572 +01:00 [DBG] Hosting started
2025-09-08 09:46:58.612 +01:00 [DBG] Connection id "0HNFEMH2PVVC4" accepted.
2025-09-08 09:46:58.621 +01:00 [DBG] Connection id "0HNFEMH2PVVC4" started.
2025-09-08 09:46:58.741 +01:00 [DBG] Connection 0HNFEMH2PVVC4 established using the following protocol: "Tls13"
2025-09-08 09:46:58.795 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 57
2025-09-08 09:46:58.838 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 09:46:58.843 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:46:58.873 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:46:58.941 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:46:58.949 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:46:58.952 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:46:58.958 +01:00 [DBG] Connection id "0HNFEMH2PVVC4", Request id "0HNFEMH2PVVC4:00000001": started reading request body.
2025-09-08 09:46:58.963 +01:00 [DBG] Connection id "0HNFEMH2PVVC4", Request id "0HNFEMH2PVVC4:00000001": done reading request body.
2025-09-08 09:46:59.080 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:46:59.602 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:46:59.607 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:46:59.738 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:46:59.856 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:46:59.948 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 09:47:00.295 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:47:00.353 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:47:00.380 +01:00 [DBG] Created DbConnection. (23ms).
2025-09-08 09:47:00.386 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:47:00.671 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:47:00.677 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:47:00.686 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 09:47:00.700 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2025-09-08 09:47:00.713 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:47:00.789 +01:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:47:00.852 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:47:00.864 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:47:00.873 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 73ms reading results.
2025-09-08 09:47:00.881 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:47:00.888 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-08 09:47:01.190 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 09:48:58.444 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:48:58.551 +01:00 [DBG] Hosting starting
2025-09-08 09:48:58.585 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:48:58.598 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:48:58.607 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:48:58.624 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:48:58.629 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:48:58.633 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:48:58.634 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:48:58.639 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:48:58.641 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:48:58.644 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:48:58.647 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:48:58.655 +01:00 [DBG] Middleware loaded
2025-09-08 09:48:58.657 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:48:58.659 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:48:58.776 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:48:58.779 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:48:58.788 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:48:58.927 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:48:58.934 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:48:58.937 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:48:58.939 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:48:58.940 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:48:58.942 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:48:58.955 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:48:58.967 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:48:59.038 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:48:59.039 +01:00 [INF] Hosting environment: Development
2025-09-08 09:48:59.041 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:48:59.042 +01:00 [DBG] Hosting started
2025-09-08 09:49:00.945 +01:00 [DBG] Connection id "0HNFEMI78L0G9" accepted.
2025-09-08 09:49:00.948 +01:00 [DBG] Connection id "0HNFEMI78L0G9" started.
2025-09-08 09:49:01.006 +01:00 [DBG] Connection 0HNFEMI78L0G9 established using the following protocol: "Tls13"
2025-09-08 09:49:01.067 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 94
2025-09-08 09:49:01.108 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:49:01.113 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:49:01.143 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:49:01.202 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:49:01.208 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:49:01.212 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:49:01.218 +01:00 [DBG] Connection id "0HNFEMI78L0G9", Request id "0HNFEMI78L0G9:00000001": started reading request body.
2025-09-08 09:49:01.219 +01:00 [DBG] Connection id "0HNFEMI78L0G9", Request id "0HNFEMI78L0G9:00000001": done reading request body.
2025-09-08 09:49:01.331 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:49:01.907 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:49:01.912 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:49:02.037 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:49:02.150 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:49:02.234 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 09:49:02.522 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:49:02.575 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:49:02.599 +01:00 [DBG] Created DbConnection. (23ms).
2025-09-08 09:49:02.605 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:49:02.839 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:49:02.847 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:49:02.854 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 09:49:02.867 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-08 09:49:02.878 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:49:02.936 +01:00 [INF] Executed DbCommand (59ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:49:02.993 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:49:03.001 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:49:03.009 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 60ms reading results.
2025-09-08 09:49:03.015 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:49:03.020 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 09:49:03.424 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.743 +01:00 [DBG] Connection id "0HNFEMI78L0G9" received FIN.
2025-09-08 09:50:04.743 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateUserName(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateAsync(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.ValidateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\IdentityUserEndpoints.cs:line 48
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:50:04.843 +01:00 [DBG] Connection id "0HNFEMI78L0GA" accepted.
2025-09-08 09:50:04.847 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 94
2025-09-08 09:50:04.848 +01:00 [DBG] Connection id "0HNFEMI78L0G9" is closed. The last processed stream ID was 3.
2025-09-08 09:50:04.894 +01:00 [DBG] Connection id "0HNFEMI78L0GA" started.
2025-09-08 09:50:04.894 +01:00 [DBG] Connection id "0HNFEMI78L0GB" accepted.
2025-09-08 09:50:04.898 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:50:04.902 +01:00 [DBG] Connection id "0HNFEMI78L0GB" started.
2025-09-08 09:50:04.904 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.904 +01:00 [DBG] Connection 0HNFEMI78L0GA established using the following protocol: "Tls13"
2025-09-08 09:50:04.916 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:50:04.917 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:50:04.899 +01:00 [DBG] Connection id "0HNFEMI78L0G9" sending RST because: "The client closed the connection."
2025-09-08 09:50:04.903 +01:00 [DBG] Connection id "0HNFEMI78L0GB" received FIN.
2025-09-08 09:50:04.925 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 94
2025-09-08 09:50:04.930 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:04.929 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:04.925 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 94
2025-09-08 09:50:04.931 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-09-08 09:50:04.933 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:50:04.935 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-08 09:50:04.935 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:04.939 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:50:04.943 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.945 +01:00 [DBG] Connection id "0HNFEMI78L0GB" stopped.
2025-09-08 09:50:04.946 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 63885.721ms
2025-09-08 09:50:04.946 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.948 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.950 +01:00 [DBG] Connection id "0HNFEMI78L0GB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 09:50:04.950 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:50:04.959 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:50:04.962 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:04.962 +01:00 [DBG] Reading the request body failed with an IOException.
System.IO.IOException: The request stream was aborted.
 ---> Microsoft.AspNetCore.Connections.ConnectionAbortedException: The HTTP/2 connection faulted.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
2025-09-08 09:50:04.963 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:04.965 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:04.968 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.968 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:04.969 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.971 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 499 null null 124.4744ms
2025-09-08 09:50:04.972 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:04.973 +01:00 [DBG] Connection id "0HNFEMI78L0GA", Request id "0HNFEMI78L0GA:00000003": started reading request body.
2025-09-08 09:50:04.978 +01:00 [DBG] The connection queue processing loop for 0HNFEMI78L0G9 completed.
2025-09-08 09:50:04.978 +01:00 [DBG] Connection id "0HNFEMI78L0GA", Request id "0HNFEMI78L0GA:00000001": started reading request body.
2025-09-08 09:50:04.979 +01:00 [DBG] Connection id "0HNFEMI78L0GA", Request id "0HNFEMI78L0GA:00000003": done reading request body.
2025-09-08 09:50:04.981 +01:00 [DBG] Connection id "0HNFEMI78L0G9" stopped.
2025-09-08 09:50:04.981 +01:00 [DBG] Connection id "0HNFEMI78L0GA", Request id "0HNFEMI78L0GA:00000001": done reading request body.
2025-09-08 09:50:05.120 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:50:05.120 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:50:05.127 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:50:05.127 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:50:05.128 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 09:50:05.129 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 09:50:05.131 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.132 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.134 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.139 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:50:05.141 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:50:05.143 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.178 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (38ms).
2025-09-08 09:50:05.186 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:50:05.193 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:50:05.197 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (10ms).
2025-09-08 09:50:05.204 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-09-08 09:50:05.206 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:50:05.208 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:50:05.209 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:50:05.212 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:50:05.214 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:50:05.216 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.219 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.220 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-09-08 09:50:05.222 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-09-08 09:50:05.224 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.225 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:05.227 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 09:50:05.228 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 09:50:05.462 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:05.909 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:27.273 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateUserName(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateAsync(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.ValidateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\IdentityUserEndpoints.cs:line 48
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:50:30.250 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateUserName(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateAsync(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.ValidateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\IdentityUserEndpoints.cs:line 48
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:50:30.263 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:50:30.268 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:30.269 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:50:30.270 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 09:50:30.271 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:30.272 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 25347.6287ms
2025-09-08 09:50:30.274 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 09:50:30.279 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 25354.0296ms
2025-09-08 09:50:37.615 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:50:37.775 +01:00 [DBG] Hosting starting
2025-09-08 09:50:37.824 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:50:37.841 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:50:37.858 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:50:37.872 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:50:37.878 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:50:37.884 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:50:37.887 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:50:37.894 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:50:37.897 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:50:37.900 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:50:37.902 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:50:37.912 +01:00 [DBG] Middleware loaded
2025-09-08 09:50:37.915 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:50:37.918 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:50:38.066 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:50:38.070 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:50:38.079 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:50:38.209 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:50:38.212 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:50:38.214 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:50:38.215 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:50:38.216 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:50:38.218 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:50:38.229 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:50:38.235 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:50:38.277 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:50:38.278 +01:00 [INF] Hosting environment: Development
2025-09-08 09:50:38.279 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:50:38.280 +01:00 [DBG] Hosting started
2025-09-08 09:50:53.349 +01:00 [DBG] Connection id "0HNFEMJ8OK98V" accepted.
2025-09-08 09:50:53.354 +01:00 [DBG] Connection id "0HNFEMJ8OK98V" started.
2025-09-08 09:50:53.403 +01:00 [DBG] Connection 0HNFEMJ8OK98V established using the following protocol: "Tls13"
2025-09-08 09:50:53.459 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 94
2025-09-08 09:50:53.505 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:50:53.509 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:53.537 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:50:53.599 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:53.607 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:50:53.611 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:50:53.617 +01:00 [DBG] Connection id "0HNFEMJ8OK98V", Request id "0HNFEMJ8OK98V:00000001": started reading request body.
2025-09-08 09:50:53.621 +01:00 [DBG] Connection id "0HNFEMJ8OK98V", Request id "0HNFEMJ8OK98V:00000001": done reading request body.
2025-09-08 09:50:53.738 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:50:54.333 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:50:54.337 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:50:54.469 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:50:54.597 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:50:54.688 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 09:50:55.011 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:50:55.071 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:50:55.095 +01:00 [DBG] Created DbConnection. (22ms).
2025-09-08 09:50:55.101 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:55.356 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:55.362 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:50:55.371 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 09:50:55.382 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-08 09:50:55.393 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:50:55.454 +01:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:50:55.509 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:50:55.521 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:55.531 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 67ms reading results.
2025-09-08 09:50:55.540 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:50:55.548 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (9ms).
2025-09-08 09:50:56.012 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:52:08.455 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:52:08.678 +01:00 [DBG] Hosting starting
2025-09-08 09:52:08.739 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:52:08.764 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:52:08.789 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:52:08.808 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:52:08.815 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:52:08.819 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:52:08.824 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:52:08.831 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:52:08.834 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:52:08.839 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:52:08.842 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:52:08.850 +01:00 [DBG] Middleware loaded
2025-09-08 09:52:08.853 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:52:08.856 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:52:08.978 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:52:08.982 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:52:08.993 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:52:09.122 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:52:09.126 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:52:09.127 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:52:09.128 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:52:09.130 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:52:09.131 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:52:09.142 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:52:09.149 +01:00 [DBG] Connection id "0HNFEMJVBGLDF" accepted.
2025-09-08 09:52:09.150 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:52:09.152 +01:00 [DBG] Connection id "0HNFEMJVBGLDF" started.
2025-09-08 09:52:09.199 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:52:09.200 +01:00 [INF] Hosting environment: Development
2025-09-08 09:52:09.201 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:52:09.202 +01:00 [DBG] Hosting started
2025-09-08 09:52:09.204 +01:00 [DBG] Connection 0HNFEMJVBGLDF established using the following protocol: "Tls13"
2025-09-08 09:52:09.263 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:52:09.370 +01:00 [DBG] Connection id "0HNFEMJVBGLDG" accepted.
2025-09-08 09:52:09.372 +01:00 [DBG] Connection id "0HNFEMJVBGLDG" started.
2025-09-08 09:52:09.374 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:52:09.376 +01:00 [DBG] Connection 0HNFEMJVBGLDG established using the following protocol: "Tls13"
2025-09-08 09:52:09.376 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:09.450 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:52:09.456 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:52:09.463 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:52:09.465 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:52:09.471 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 212.3575ms
2025-09-08 09:52:09.500 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:52:09.500 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:52:09.524 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:52:09.532 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 32.1136ms
2025-09-08 09:52:09.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.0226ms
2025-09-08 09:52:09.694 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:52:09.702 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:52:09.716 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:09.881 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.4866ms
2025-09-08 09:52:13.124 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:52:13.132 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:52:13.134 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:13.136 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:52:13.138 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:52:13.139 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:52:13.140 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:52:13.141 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 17.3111ms
2025-09-08 09:52:13.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:52:13.160 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:52:13.167 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:52:13.169 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 9.2768ms
2025-09-08 09:52:13.175 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.3326ms
2025-09-08 09:52:13.201 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:52:13.206 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:52:13.207 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:13.217 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.1053ms
2025-09-08 09:52:15.921 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:52:15.937 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:52:15.941 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:15.944 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:52:15.946 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:52:15.949 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:52:15.953 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:52:15.956 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 35.1309ms
2025-09-08 09:52:15.974 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:52:15.974 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:52:15.985 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:52:15.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 21.3652ms
2025-09-08 09:52:16.001 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.9496ms
2025-09-08 09:52:16.026 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:52:16.030 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:52:16.032 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:16.040 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.9717ms
2025-09-08 09:52:23.851 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:52:23.859 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:52:23.862 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:23.863 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:52:23.865 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:52:23.866 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:52:23.867 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:52:23.868 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 16.437ms
2025-09-08 09:52:23.887 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:52:23.889 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:52:23.899 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:52:23.905 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 17.3562ms
2025-09-08 09:52:23.911 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.7689ms
2025-09-08 09:52:23.945 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:52:23.950 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:52:23.951 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:52:23.964 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.8965ms
2025-09-08 09:52:38.219 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 95
2025-09-08 09:52:38.229 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:52:38.232 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:52:38.247 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:52:38.332 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:52:38.340 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:52:38.344 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:52:38.348 +01:00 [DBG] Connection id "0HNFEMJVBGLDF", Request id "0HNFEMJVBGLDF:00000021": started reading request body.
2025-09-08 09:52:38.350 +01:00 [DBG] Connection id "0HNFEMJVBGLDF", Request id "0HNFEMJVBGLDF:00000021": done reading request body.
2025-09-08 09:52:38.360 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:52:38.363 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "RegisterModel userRegistrationModel" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON value could not be converted to CMSApi.Presentation.Controllers.RegisterModel. Path: $ | LineNumber: 0 | BytePositionInLine: 9.
   at System.Text.Json.ThrowHelper.ThrowJsonException_DeserializeUnableToConvertValue(Type propertyType)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:52:38.402 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 400 null text/plain; charset=utf-8 183.0133ms
2025-09-08 09:54:03.757 +01:00 [DBG] Connection id "0HNFEMJVBGLDG" received FIN.
2025-09-08 09:54:03.768 +01:00 [DBG] Connection id "0HNFEMJVBGLDG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 09:54:03.771 +01:00 [DBG] Connection id "0HNFEMJVBGLDG" is closed. The last processed stream ID was 0.
2025-09-08 09:54:03.774 +01:00 [DBG] The connection queue processing loop for 0HNFEMJVBGLDG completed.
2025-09-08 09:54:03.778 +01:00 [DBG] Connection id "0HNFEMJVBGLDG" stopped.
2025-09-08 09:56:04.902 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 99
2025-09-08 09:56:04.907 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:56:04.909 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:56:04.910 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:56:04.916 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:56:04.919 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:56:04.921 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:56:04.923 +01:00 [DBG] Connection id "0HNFEMJVBGLDF", Request id "0HNFEMJVBGLDF:00000023": started reading request body.
2025-09-08 09:56:04.924 +01:00 [DBG] Connection id "0HNFEMJVBGLDF", Request id "0HNFEMJVBGLDF:00000023": done reading request body.
2025-09-08 09:56:05.036 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:56:05.674 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:56:05.679 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:56:05.820 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:56:05.955 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:56:06.037 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 09:56:06.309 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:56:06.355 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:56:06.376 +01:00 [DBG] Created DbConnection. (18ms).
2025-09-08 09:56:06.382 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.585 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.591 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:56:06.596 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 09:56:06.605 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-09-08 09:56:06.614 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:56:06.667 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:56:06.681 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.689 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-09-08 09:56:06.695 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.702 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 09:56:06.709 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 09:56:06.718 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16], [Property: AppUser.ID (int) Required, 17] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname, a.ID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<ID>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:56:06.726 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.730 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.733 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:56:06.734 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:56:06.736 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:56:06.738 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:56:06.748 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:56:06.751 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.752 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 09:56:06.754 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.755 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:56:06.781 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:56:06.847 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:56:06.852 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 09:56:06.857 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 09:56:06.877 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 09:56:06.942 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.945 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.950 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:56:06.951 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:56:06.953 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:56:06.955 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [ID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-09-08 09:56:06.963 +01:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [ID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-09-08 09:56:06.969 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:56:06.971 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:56:06.981 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:333946f4-70a4-42a1-9c30-991cc6291c94
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:333946f4-70a4-42a1-9c30-991cc6291c94
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-08 09:56:07.439 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:57:50.437 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:333946f4-70a4-42a1-9c30-991cc6291c94
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserOnlyStore`6.CreateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.CreateUser(UserManager`1 userManager, RegisterModel userRegistrationModel)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:57:50.497 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 99
2025-09-08 09:57:50.518 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:57:50.524 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:57:50.526 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:57:50.527 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:57:50.527 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:57:50.531 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:57:50.533 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.533 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:57:50.535 +01:00 [DBG] Connection id "0HNFEMJVBGLDF", Request id "0HNFEMJVBGLDF:00000025": started reading request body.
2025-09-08 09:57:50.535 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 09:57:50.537 +01:00 [DBG] Connection id "0HNFEMJVBGLDF", Request id "0HNFEMJVBGLDF:00000025": done reading request body.
2025-09-08 09:57:50.539 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 500 null text/plain; charset=utf-8 105636.9565ms
2025-09-08 09:57:50.716 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:57:50.739 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:57:50.741 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 09:57:50.743 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.745 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.789 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:57:50.790 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:57:50.792 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:57:50.794 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:57:50.806 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:57:50.809 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.811 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 09:57:50.813 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.817 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (3ms).
2025-09-08 09:57:50.821 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.823 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.825 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:57:50.826 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:57:50.828 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:57:50.831 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:57:50.839 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname], [a].[ID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:57:50.842 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.843 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 09:57:50.845 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.847 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 09:57:50.853 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:57:50.855 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:57:50.857 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 09:57:50.858 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 09:57:50.859 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 09:57:50.861 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.866 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.870 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:57:50.871 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:57:50.873 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 09:57:50.875 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [ID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-09-08 09:57:50.883 +01:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [ID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-09-08 09:57:50.890 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:57:50.891 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:57:50.897 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:333946f4-70a4-42a1-9c30-991cc6291c94
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column name 'Id' is specified more than once in the SET clause or column list of an INSERT. A column cannot be assigned more than one value in the same clause. Modify the clause to make sure that a column is updated only once. If this statement updates or inserts columns into a view, column aliasing can conceal the duplication in your code.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:333946f4-70a4-42a1-9c30-991cc6291c94
Error Number:264,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-08 09:57:51.209 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:59:16.288 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 09:59:16.401 +01:00 [DBG] Hosting starting
2025-09-08 09:59:16.434 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:59:16.453 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 09:59:16.467 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 09:59:16.482 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 09:59:16.489 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:59:16.493 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 09:59:16.496 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 09:59:16.506 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 09:59:16.509 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 09:59:16.512 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 09:59:16.514 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 09:59:16.521 +01:00 [DBG] Middleware loaded
2025-09-08 09:59:16.524 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 09:59:16.526 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 09:59:16.659 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 09:59:16.663 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 09:59:16.681 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 09:59:16.825 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 09:59:16.828 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 09:59:16.830 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 09:59:16.831 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 09:59:16.832 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 09:59:16.833 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 09:59:16.844 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:59:16.851 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 09:59:16.906 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:59:16.908 +01:00 [INF] Hosting environment: Development
2025-09-08 09:59:16.909 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 09:59:16.911 +01:00 [DBG] Hosting started
2025-09-08 09:59:16.956 +01:00 [DBG] Connection id "0HNFEMNURCS1K" accepted.
2025-09-08 09:59:16.959 +01:00 [DBG] Connection id "0HNFEMNURCS1K" started.
2025-09-08 09:59:16.986 +01:00 [DBG] Connection id "0HNFEMNURCS1L" accepted.
2025-09-08 09:59:16.988 +01:00 [DBG] Connection id "0HNFEMNURCS1L" started.
2025-09-08 09:59:17.006 +01:00 [DBG] Connection 0HNFEMNURCS1L established using the following protocol: "Tls13"
2025-09-08 09:59:17.006 +01:00 [DBG] Connection 0HNFEMNURCS1K established using the following protocol: "Tls13"
2025-09-08 09:59:17.055 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 09:59:17.178 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 09:59:17.180 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:59:17.259 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 09:59:17.263 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 09:59:17.270 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 09:59:17.274 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 09:59:17.278 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 227.4297ms
2025-09-08 09:59:17.292 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 09:59:17.293 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 09:59:17.324 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 09:59:17.326 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 34.2446ms
2025-09-08 09:59:17.347 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.4326ms
2025-09-08 09:59:17.397 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 09:59:17.401 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 09:59:17.403 +01:00 [DBG] Request did not match any endpoints
2025-09-08 09:59:17.544 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 147.5623ms
2025-09-08 09:59:30.430 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 99
2025-09-08 09:59:30.442 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 09:59:30.445 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:59:30.458 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 09:59:30.531 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:59:30.538 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 09:59:30.542 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:59:30.547 +01:00 [DBG] Connection id "0HNFEMNURCS1K", Request id "0HNFEMNURCS1K:00000009": started reading request body.
2025-09-08 09:59:30.549 +01:00 [DBG] Connection id "0HNFEMNURCS1K", Request id "0HNFEMNURCS1K:00000009": done reading request body.
2025-09-08 09:59:30.691 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 09:59:31.347 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 09:59:31.351 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 09:59:31.501 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 09:59:31.632 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 09:59:31.726 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 09:59:32.049 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:59:32.111 +01:00 [DBG] Creating DbConnection.
2025-09-08 09:59:32.137 +01:00 [DBG] Created DbConnection. (23ms).
2025-09-08 09:59:32.145 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.391 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.398 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:59:32.408 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 09:59:32.419 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-08 09:59:32.430 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:59:32.497 +01:00 [INF] Executed DbCommand (68ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 09:59:32.516 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.526 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-09-08 09:59:32.532 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.541 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (8ms).
2025-09-08 09:59:32.549 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 09:59:32.559 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 09:59:32.567 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.570 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.571 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:59:32.573 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 09:59:32.574 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 09:59:32.576 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:59:32.581 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 09:59:32.583 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.585 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 09:59:32.587 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.589 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:59:32.618 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:59:32.691 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:59:32.698 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 09:59:32.705 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 09:59:32.731 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 09:59:32.794 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.798 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.804 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 09:59:32.807 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 09:59:32.809 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-08 09:59:32.812 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-09-08 09:59:32.817 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [Fullname], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-09-08 09:59:32.824 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.827 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 09:59:32.830 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.832 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 09:59:32.842 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 09:59:32.847 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 09:59:32.851 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 09:59:32.856 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 09:59:32.861 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 09:59:32.866 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 09:59:32.873 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 09:59:32.877 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-08 09:59:32.880 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 2450.0977ms
2025-09-08 10:00:10.554 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 10:00:10.561 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 10:00:10.563 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 10:00:10.565 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 10:00:10.568 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 10:00:10.569 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 10:00:10.570 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 10:00:10.571 +01:00 [DBG] Connection id "0HNFEMNURCS1K", Request id "0HNFEMNURCS1K:0000000B": started reading request body.
2025-09-08 10:00:10.573 +01:00 [DBG] Connection id "0HNFEMNURCS1K", Request id "0HNFEMNURCS1K:0000000B": done reading request body.
2025-09-08 10:00:10.635 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 10:00:10.642 +01:00 [DBG] Creating DbConnection.
2025-09-08 10:00:10.645 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 10:00:10.647 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:00:10.649 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:00:10.650 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 10:00:10.652 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 10:00:10.653 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 10:00:10.654 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 10:00:10.663 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 10:00:10.675 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 10:00:10.678 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:00:10.681 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-09-08 10:00:10.683 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:00:10.684 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 10:00:10.783 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 10:00:10.787 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 10:00:10.790 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 10:00:10.792 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 10:00:10.794 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:00:10.797 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 10:00:10.799 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 244.7088ms
2025-09-08 10:00:36.944 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 10:00:36.949 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 10:00:36.951 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 10:00:37.001 +01:00 [DBG] Successfully validated the token.
2025-09-08 10:00:37.004 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 10:00:37.011 +01:00 [DBG] Authorization was successful.
2025-09-08 10:00:37.014 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 10:00:37.169 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 10:18:58.000 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 10:18:58.106 +01:00 [DBG] Hosting starting
2025-09-08 10:18:58.141 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 10:18:58.153 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 10:18:58.163 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 10:18:58.174 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 10:18:58.179 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 10:18:58.182 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 10:18:58.184 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 10:18:58.190 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 10:18:58.192 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 10:18:58.195 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 10:18:58.197 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 10:18:58.205 +01:00 [DBG] Middleware loaded
2025-09-08 10:18:58.208 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 10:18:58.211 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 10:18:58.331 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 10:18:58.335 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 10:18:58.348 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 10:18:58.452 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 10:18:58.456 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 10:18:58.458 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 10:18:58.460 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 10:18:58.461 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 10:18:58.462 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 10:18:58.469 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 10:18:58.475 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 10:18:58.511 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 10:18:58.513 +01:00 [INF] Hosting environment: Development
2025-09-08 10:18:58.515 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 10:18:58.516 +01:00 [DBG] Hosting started
2025-09-08 10:19:23.307 +01:00 [DBG] Connection id "0HNFEN36C1UCC" accepted.
2025-09-08 10:19:23.319 +01:00 [DBG] Connection id "0HNFEN36C1UCC" started.
2025-09-08 10:19:23.375 +01:00 [DBG] Connection 0HNFEN36C1UCC established using the following protocol: "Tls13"
2025-09-08 10:19:23.457 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 10:19:23.583 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 10:19:23.587 +01:00 [DBG] Request did not match any endpoints
2025-09-08 10:19:23.662 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 10:19:23.668 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 10:19:23.676 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 10:19:23.680 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 10:19:23.718 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 265.9985ms
2025-09-08 10:19:23.720 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 10:19:23.720 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 10:19:23.754 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 10:19:23.757 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 36.9088ms
2025-09-08 10:19:23.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.0875ms
2025-09-08 10:19:23.887 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 10:19:23.892 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 10:19:23.894 +01:00 [DBG] Request did not match any endpoints
2025-09-08 10:19:24.019 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 132.2988ms
2025-09-08 10:19:59.028 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 59
2025-09-08 10:19:59.071 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 10:19:59.074 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 10:19:59.087 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 10:19:59.152 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 10:19:59.157 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 10:19:59.160 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 10:19:59.166 +01:00 [DBG] Connection id "0HNFEN36C1UCC", Request id "0HNFEN36C1UCC:00000009": started reading request body.
2025-09-08 10:19:59.169 +01:00 [DBG] Connection id "0HNFEN36C1UCC", Request id "0HNFEN36C1UCC:00000009": done reading request body.
2025-09-08 10:19:59.282 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 10:19:59.843 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 10:19:59.847 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 10:19:59.967 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 10:20:00.092 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 10:20:00.170 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 10:20:00.452 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 10:20:00.502 +01:00 [DBG] Creating DbConnection.
2025-09-08 10:20:00.525 +01:00 [DBG] Created DbConnection. (20ms).
2025-09-08 10:20:00.531 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:00.745 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:00.751 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 10:20:00.760 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 10:20:00.770 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-09-08 10:20:00.783 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 10:20:00.848 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 10:20:00.902 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 10:20:00.948 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:00.959 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 100ms reading results.
2025-09-08 10:20:00.964 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:00.970 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 10:20:01.079 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 10:20:01.084 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 10:20:01.089 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 10:20:01.095 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 10:20:01.101 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:01.105 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-08 10:20:01.111 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2083.3463ms
2025-09-08 10:20:25.829 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 10:20:25.840 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 10:20:25.843 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 10:20:25.898 +01:00 [DBG] Successfully validated the token.
2025-09-08 10:20:25.901 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 10:20:25.907 +01:00 [DBG] Authorization was successful.
2025-09-08 10:20:25.909 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 10:20:25.968 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 10:20:25.989 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(e => EF.Property<string>(e, "Id") == __p_0)'
2025-09-08 10:20:26.020 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.Id == @__p_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.Fullname (string) Required, 16] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.Fullname
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.Id == @__p_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 10:20:26.030 +01:00 [DBG] Creating DbConnection.
2025-09-08 10:20:26.033 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 10:20:26.035 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:26.037 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:26.039 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 10:20:26.040 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 10:20:26.042 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 10:20:26.043 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[Id] = @__p_0
2025-09-08 10:20:26.053 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Fullname]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[Id] = @__p_0
2025-09-08 10:20:26.058 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 10:20:26.060 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:26.063 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 10:20:26.065 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:26.067 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 10:20:26.069 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 10:20:26.071 +01:00 [INF] Writing value of type '<>f__AnonymousType11`2' as Json.
2025-09-08 10:20:26.073 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 10:20:26.075 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 10:20:26.076 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:20:26.078 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 10:20:26.080 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 200 null application/json; charset=utf-8 250.7183ms
2025-09-08 10:32:40.605 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 10:32:41.006 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 10:32:41.007 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 10:32:41.088 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 10:32:41.145 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 10:32:41.750 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 10:36:47.961 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 10:36:48.338 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 10:36:48.339 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 10:36:48.431 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 10:36:48.493 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 10:36:48.893 +01:00 [DBG] Creating DbConnection.
2025-09-08 10:36:48.936 +01:00 [DBG] Created DbConnection. (38ms).
2025-09-08 10:36:48.940 +01:00 [DBG] Migrating using database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:48.946 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.138 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.144 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.152 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2025-09-08 10:36:49.153 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (11ms).
2025-09-08 10:36:49.159 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 10:36:49.197 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 10:36:49.199 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.208 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 10:36:49.208 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.209 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.209 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-08 10:36:49.211 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-08 10:36:49.211 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 10:36:49.211 +01:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 10:36:49.212 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-08 10:36:49.232 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-08 10:36:49.302 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 10:36:49.307 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 10:36:49.308 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.308 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.309 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-09-08 10:36:49.310 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-08 10:36:49.311 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-08 10:36:49.313 +01:00 [DBG] Committing transaction.
2025-09-08 10:36:49.316 +01:00 [DBG] Committed transaction.
2025-09-08 10:36:49.318 +01:00 [DBG] Disposing transaction.
2025-09-08 10:36:49.320 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 10:36:49.320 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 10:36:49.321 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.321 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.321 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.321 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 10:36:49.322 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 10:36:49.322 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-08 10:36:49.322 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 10:36:49.322 +01:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 10:36:49.322 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-08 10:36:49.323 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-08 10:36:49.324 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 10:36:49.324 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-08 10:36:49.324 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-08 10:36:49.325 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-08 10:36:49.328 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-08 10:36:49.379 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.381 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 10:36:49.387 +01:00 [INF] Applying migration '20250908093241_AddedGenderDOBLibraryID'.
2025-09-08 10:36:49.404 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.404 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.404 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.404 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUsers] ADD [DOB] nvarchar(max) NULL;
2025-09-08 10:36:49.409 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUsers] ADD [DOB] nvarchar(max) NULL;
2025-09-08 10:36:49.409 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.409 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.409 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.409 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUsers] ADD [Gender] nvarchar(10) NULL;
2025-09-08 10:36:49.410 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUsers] ADD [Gender] nvarchar(10) NULL;
2025-09-08 10:36:49.410 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.410 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.410 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.410 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUsers] ADD [LibraryID] int NULL;
2025-09-08 10:36:49.411 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUsers] ADD [LibraryID] int NULL;
2025-09-08 10:36:49.411 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 10:36:49.412 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.412 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 10:36:49.412 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250908093241_AddedGenderDOBLibraryID', N'9.0.8');
2025-09-08 10:36:49.413 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250908093241_AddedGenderDOBLibraryID', N'9.0.8');
2025-09-08 10:36:49.413 +01:00 [DBG] Committing transaction.
2025-09-08 10:36:49.414 +01:00 [DBG] Committed transaction.
2025-09-08 10:36:49.414 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-08 10:36:49.414 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 10:36:49.414 +01:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 10:36:49.414 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-08 10:36:49.417 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-08 10:36:49.417 +01:00 [DBG] Disposing transaction.
2025-09-08 10:36:49.417 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.418 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (0ms).
2025-09-08 10:36:49.419 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 10:36:49.422 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 10:36:49.422 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 11:15:51.129 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 11:15:51.315 +01:00 [DBG] Hosting starting
2025-09-08 11:15:51.358 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 11:15:51.372 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 11:15:51.385 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 11:15:51.400 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 11:15:51.411 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:15:51.417 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 11:15:51.421 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:15:51.429 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 11:15:51.432 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 11:15:51.435 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 11:15:51.437 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 11:15:51.447 +01:00 [DBG] Middleware loaded
2025-09-08 11:15:51.451 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 11:15:51.455 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 11:15:51.601 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 11:15:51.606 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 11:15:51.619 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 11:15:51.766 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 11:15:51.770 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 11:15:51.772 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 11:15:51.774 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 11:15:51.776 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 11:15:51.777 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 11:15:51.784 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:15:51.792 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:15:51.830 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 11:15:51.834 +01:00 [INF] Hosting environment: Development
2025-09-08 11:15:51.836 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 11:15:51.837 +01:00 [DBG] Hosting started
2025-09-08 11:15:51.983 +01:00 [DBG] Connection id "0HNFEO2O8VRFC" accepted.
2025-09-08 11:15:51.990 +01:00 [DBG] Connection id "0HNFEO2O8VRFC" started.
2025-09-08 11:15:52.042 +01:00 [DBG] Connection 0HNFEO2O8VRFC established using the following protocol: "Tls13"
2025-09-08 11:15:52.099 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 11:15:52.285 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 11:15:52.289 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:15:52.358 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 11:15:52.362 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 11:15:52.370 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 11:15:52.376 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 11:15:52.381 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 285.8191ms
2025-09-08 11:15:52.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 11:15:52.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 11:15:52.459 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 11:15:52.463 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 64.9802ms
2025-09-08 11:15:52.481 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.8573ms
2025-09-08 11:15:52.616 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 11:15:52.623 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 11:15:52.626 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:15:52.771 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 155.5313ms
2025-09-08 11:15:53.932 +01:00 [DBG] Connection id "0HNFEO2O8VRFC" received FIN.
2025-09-08 11:15:53.941 +01:00 [DBG] Connection id "0HNFEO2O8VRFC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 11:15:53.950 +01:00 [DBG] Connection id "0HNFEO2O8VRFC" is closed. The last processed stream ID was 7.
2025-09-08 11:15:53.961 +01:00 [DBG] The connection queue processing loop for 0HNFEO2O8VRFC completed.
2025-09-08 11:15:53.978 +01:00 [DBG] Connection id "0HNFEO2O8VRFC" stopped.
2025-09-08 11:16:11.190 +01:00 [DBG] Connection id "0HNFEO2O8VRFD" accepted.
2025-09-08 11:16:11.193 +01:00 [DBG] Connection id "0HNFEO2O8VRFD" started.
2025-09-08 11:16:11.198 +01:00 [DBG] Connection 0HNFEO2O8VRFD established using the following protocol: "Tls13"
2025-09-08 11:16:11.203 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 144
2025-09-08 11:16:11.225 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:16:11.229 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:16:11.258 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:16:11.431 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:16:11.443 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:16:11.449 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:16:11.463 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000001": started reading request body.
2025-09-08 11:16:11.470 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000001": done reading request body.
2025-09-08 11:16:11.752 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 11:16:13.196 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 11:16:13.203 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 11:16:13.496 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 11:16:13.747 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:16:13.939 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-08 11:16:14.574 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedUserName == @__normalizedUserName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:16:14.694 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:16:14.751 +01:00 [DBG] Created DbConnection. (52ms).
2025-09-08 11:16:14.763 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.283 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.297 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:15.310 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-09-08 11:16:15.334 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (38ms).
2025-09-08 11:16:15.360 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:16:15.513 +01:00 [INF] Executed DbCommand (157ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:16:15.550 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.573 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-09-08 11:16:15.591 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.607 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (16ms).
2025-09-08 11:16:15.624 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 11:16:15.644 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:16:15.663 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.671 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.678 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:15.683 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:15.689 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:16:15.695 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:16:15.709 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:16:15.716 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.722 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:16:15.730 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:15.736 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:15.812 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:15.973 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:15.987 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:16:15.999 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:16:16.062 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:16:16.205 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.212 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.224 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:16.229 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:16.234 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 11:16:16.241 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:16:16.273 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:16:16.289 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.295 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-09-08 11:16:16.306 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.313 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:16.338 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:16.351 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:16:16.369 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-09-08 11:16:16.387 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: SingleQueryingEnumerable.Create<IdentityRole>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            IdentityRole entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                IdentityRole instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(IdentityRole);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityRole.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (IdentityRole)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]: 
                            {
                                return 
                                {
                                    IdentityRole instance;
                                    instance = new IdentityRole();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<NormalizedName>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: IdentityRole | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityRole")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(IdentityRole)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:16:16.402 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.409 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.415 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:16.421 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:16.427 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:16:16.436 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:16:16.465 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:16:16.497 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:16.518 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.525 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 49ms reading results.
2025-09-08 11:16:16.532 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.538 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:16.574 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-09-08 11:16:16.635 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: SingleQueryingEnumerable.Create<IdentityUserRole<string>>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            IdentityUserRole<string> entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                IdentityUserRole<string> instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(IdentityUserRole<string>);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUserRole<string>.UserId, IdentityUserRole<string>.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        (object)dataReader.GetString(0), 
                        (object)dataReader.GetString(1) 
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (IdentityUserRole<string>)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: IdentityUserRole<string> | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: IdentityUserRole<string> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>")]: 
                            {
                                return 
                                {
                                    IdentityUserRole<string> instance;
                                    instance = new IdentityUserRole<string>();
                                    instance.<UserId>k__BackingField = dataReader.GetString(0);
                                    instance.<RoleId>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: IdentityUserRole<string> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Microsoft.AspNetCore.Identity.IdentityUserRole<string>")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(IdentityUserRole<string>)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:16:16.649 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.656 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.662 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:16.667 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:16.673 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:16:16.680 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:16:16.692 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:16:16.702 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.709 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:16:16.717 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.723 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:16.741 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.747 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.754 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:16.759 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:16.766 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 11:16:16.773 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:16:16.783 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:16:16.793 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.799 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-09-08 11:16:16.807 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.814 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:16.845 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:16.855 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.862 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.868 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:16.873 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:16:16.880 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:16:16.886 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:16:16.903 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:16:16.915 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.922 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-09-08 11:16:16.930 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.937 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:16.948 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.955 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:16.961 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:16.967 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:16.973 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:16:16.980 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:16:16.996 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:16:17.007 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.013 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:16:17.020 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.025 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 11:16:17.037 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:17.047 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:16:17.052 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:16:17.067 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:16:17.109 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:16:17.120 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.126 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.135 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:16:17.152 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:16:17.159 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:16:17.164 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:16:17.172 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-09-08 11:16:17.178 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:16:17.225 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:16:17.243 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.251 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 11:16:17.264 +01:00 [DBG] Committing transaction.
2025-09-08 11:16:17.275 +01:00 [DBG] Committed transaction.
2025-09-08 11:16:17.282 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.289 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:16:17.301 +01:00 [DBG] Disposing transaction.
2025-09-08 11:16:17.306 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:17.314 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:16:17.323 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:16:17.335 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:16:17.345 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:16:17.352 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:16:17.363 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:16:17.371 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:16:17.377 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 11:16:17.382 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 6178.4082ms
2025-09-08 11:19:51.117 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 154
2025-09-08 11:19:51.145 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:19:51.151 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:19:51.157 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:19:51.165 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:19:51.171 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:19:51.176 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:19:51.182 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000003": started reading request body.
2025-09-08 11:19:51.189 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000003": done reading request body.
2025-09-08 11:19:51.510 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:19:51.520 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:19:51.525 +01:00 [DBG] Created DbConnection. (5ms).
2025-09-08 11:19:51.530 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.536 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.543 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:51.549 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:19:51.557 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-09-08 11:19:51.563 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:19:51.581 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:19:51.592 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.597 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:19:51.603 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.607 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 11:19:51.611 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.614 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.616 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:51.619 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:19:51.622 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-08 11:19:51.625 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:19:51.633 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:19:51.641 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.644 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 11:19:51.649 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.655 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:19:51.663 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:51.669 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:51.674 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:19:51.677 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:19:51.681 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:19:51.687 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.695 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.702 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:51.707 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:19:51.714 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 11:19:51.721 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:19:51.754 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:19:51.764 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.770 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:19:51.777 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.784 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:19:51.792 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:51.801 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:19:51.807 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.816 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.823 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:51.829 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 11:19:51.835 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 11:19:51.842 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:19:51.855 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:19:51.867 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:51.873 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.878 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-09-08 11:19:51.886 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.892 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:19:51.903 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.909 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.915 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:51.920 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:19:51.927 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:19:51.934 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:19:51.954 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:19:51.965 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.970 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:19:51.979 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:51.985 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:19:51.995 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.002 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.009 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:52.014 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:19:52.019 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 11:19:52.024 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:19:52.035 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:19:52.046 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.052 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:19:52.060 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.067 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:19:52.074 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:52.083 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.089 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.097 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:52.102 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:19:52.108 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 11:19:52.114 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:19:52.123 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:19:52.134 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.139 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:19:52.146 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.151 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:19:52.158 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.164 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.171 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:52.175 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:19:52.182 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:19:52.189 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:19:52.200 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:19:52.212 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.218 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-09-08 11:19:52.224 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.231 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:19:52.239 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:52.248 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:19:52.253 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:19:52.259 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:19:52.267 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:19:52.271 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.278 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.285 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:19:52.289 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:19:52.295 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:19:52.300 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:19:52.305 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 11:19:52.313 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:19:52.334 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:19:52.347 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.352 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:19:52.359 +01:00 [DBG] Committing transaction.
2025-09-08 11:19:52.363 +01:00 [DBG] Committed transaction.
2025-09-08 11:19:52.367 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.371 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 11:19:52.377 +01:00 [DBG] Disposing transaction.
2025-09-08 11:19:52.380 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:52.387 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:19:52.394 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:19:52.397 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:19:52.401 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:19:52.406 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:19:52.412 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:19:52.418 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:19:52.423 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 11:19:52.431 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 1314.5627ms
2025-09-08 11:20:06.723 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 146
2025-09-08 11:20:06.734 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:20:06.738 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:06.741 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:20:06.742 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:06.746 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:06.748 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:06.749 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000005": started reading request body.
2025-09-08 11:20:06.751 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000005": done reading request body.
2025-09-08 11:20:06.840 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:20:06.849 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:20:06.850 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 11:20:06.852 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.853 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.855 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:06.856 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:20:06.857 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:20:06.858 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:06.863 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:06.866 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.868 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:20:06.869 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.871 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:20:06.873 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.874 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.876 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:06.879 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:20:06.881 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:06.882 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:06.885 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:06.888 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.889 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:20:06.891 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.893 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:20:06.896 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:06.898 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:06.900 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:06.901 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:06.903 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:06.904 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.906 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.907 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:06.909 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:20:06.912 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:06.914 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:06.934 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:06.940 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.941 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:20:06.944 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.946 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:20:06.948 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:06.950 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:20:06.953 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.955 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.956 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:06.957 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:20:06.960 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:06.963 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:06.966 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:06.969 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:06.970 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.972 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 11:20:06.974 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.976 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:20:06.979 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.981 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.983 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:06.984 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:20:06.985 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:20:06.987 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:06.990 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:06.992 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.994 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-08 11:20:06.997 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:06.998 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:20:07.000 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.002 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.003 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:07.005 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:20:07.007 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:07.009 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:07.013 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:07.016 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.018 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:20:07.021 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.023 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 11:20:07.032 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:07.037 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.040 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.042 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:07.046 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:07.049 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-08 11:20:07.051 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:07.057 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:07.061 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.065 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 11:20:07.068 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.071 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 11:20:07.075 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.077 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.080 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:07.082 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:20:07.086 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:07.089 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:07.094 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:07.098 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.101 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 11:20:07.104 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.107 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 11:20:07.110 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:07.114 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:07.117 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:07.119 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:07.121 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:20:07.123 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.126 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.128 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:20:07.134 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:20:07.136 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:07.138 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:20:07.140 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:07.143 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:07.150 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:07.153 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.155 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:20:07.157 +01:00 [DBG] Committing transaction.
2025-09-08 11:20:07.180 +01:00 [DBG] Committed transaction.
2025-09-08 11:20:07.182 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.184 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 11:20:07.187 +01:00 [DBG] Disposing transaction.
2025-09-08 11:20:07.188 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:07.190 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:07.194 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:20:07.197 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:20:07.198 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:20:07.200 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:07.202 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:20:07.204 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:07.206 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 11:20:07.208 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 485.2361ms
2025-09-08 11:20:24.058 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 198
2025-09-08 11:20:24.075 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:20:24.077 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:24.081 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:20:24.084 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:24.089 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:24.093 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:24.097 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000007": started reading request body.
2025-09-08 11:20:24.102 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000007": done reading request body.
2025-09-08 11:20:24.291 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:20:24.302 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:20:24.306 +01:00 [DBG] Created DbConnection. (4ms).
2025-09-08 11:20:24.312 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.318 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.324 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.329 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:24.336 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:24.341 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:24.351 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:24.359 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.365 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:24.371 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.377 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:24.382 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.386 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.388 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.391 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:20:24.396 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-08 11:20:24.398 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:24.402 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:24.409 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.415 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:24.421 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.426 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 11:20:24.430 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:24.439 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:24.445 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:24.449 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:24.457 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:24.462 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.468 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.474 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.479 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:24.483 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-08 11:20:24.488 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:24.514 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:24.523 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.528 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:24.534 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.540 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:24.546 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:24.554 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:20:24.561 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.571 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.577 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.582 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:24.589 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:24.596 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:24.604 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:24.614 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:24.619 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.629 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-09-08 11:20:24.643 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.648 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:24.655 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.661 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.666 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.671 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:24.678 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:24.683 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:24.691 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:24.699 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.705 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:24.712 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.717 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:24.724 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.730 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.736 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.741 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:24.748 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:24.754 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:24.764 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:24.774 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.779 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:24.784 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.789 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 11:20:24.796 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:24.804 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.810 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.817 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.822 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:24.828 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:24.834 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:24.844 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:24.855 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.862 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-09-08 11:20:24.869 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.876 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-08 11:20:24.884 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.891 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.898 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:24.902 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:24.910 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 11:20:24.916 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:24.927 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:24.937 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.943 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:24.949 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.953 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 11:20:24.959 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:24.969 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:24.975 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:24.981 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:24.986 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:20:24.991 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:24.998 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:25.003 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:20:25.008 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:20:25.013 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:25.016 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:25.022 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-08 11:20:25.029 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:25.040 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:25.051 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:25.056 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:25.061 +01:00 [DBG] Committing transaction.
2025-09-08 11:20:25.092 +01:00 [DBG] Committed transaction.
2025-09-08 11:20:25.096 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:25.101 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:25.108 +01:00 [DBG] Disposing transaction.
2025-09-08 11:20:25.113 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:25.120 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:25.129 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:20:25.135 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:20:25.140 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:20:25.145 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:25.150 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:20:25.154 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:25.160 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 11:20:25.166 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 1108.1785ms
2025-09-08 11:20:37.132 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 152
2025-09-08 11:20:37.138 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:20:37.141 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:37.143 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:20:37.145 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:37.148 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:37.151 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:37.154 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000009": started reading request body.
2025-09-08 11:20:37.159 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:00000009": done reading request body.
2025-09-08 11:20:37.348 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:20:37.355 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:20:37.358 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 11:20:37.362 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.367 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.372 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.376 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:37.383 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:37.390 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:37.400 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:37.411 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.417 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:37.425 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.431 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:37.438 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.445 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.451 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.456 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:37.462 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:37.469 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:37.480 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:37.490 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.496 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:37.503 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.510 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:37.517 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:37.525 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:37.530 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:37.534 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:37.538 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:37.543 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.548 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.554 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.557 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:37.561 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-08 11:20:37.565 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:37.577 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:37.582 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.587 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 11:20:37.590 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.594 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (3ms).
2025-09-08 11:20:37.599 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:37.605 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:20:37.609 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.611 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.615 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.618 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:37.622 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-08 11:20:37.628 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:37.639 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:37.650 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:37.656 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.663 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 11:20:37.671 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.677 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:37.685 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.692 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.699 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.704 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:37.711 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:37.719 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:37.729 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:37.740 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.746 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:37.754 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.760 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:37.768 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.775 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.781 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.786 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:37.792 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 11:20:37.799 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:37.809 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:37.820 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.827 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:37.835 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.842 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-08 11:20:37.851 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:37.857 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.865 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.870 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.876 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:37.882 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:37.888 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:37.899 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:37.908 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.915 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:37.921 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.927 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:37.936 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.941 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.946 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:37.952 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:37.958 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:37.965 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:37.975 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:37.991 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:37.996 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 11:20:38.002 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:38.009 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:38.015 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:38.021 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:38.023 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:38.027 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:38.031 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:20:38.034 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:38.038 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:38.043 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:20:38.047 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:20:38.050 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:38.053 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:20:38.056 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-08 11:20:38.059 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:38.065 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:38.073 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:38.076 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 11:20:38.080 +01:00 [DBG] Committing transaction.
2025-09-08 11:20:38.106 +01:00 [DBG] Committed transaction.
2025-09-08 11:20:38.109 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:38.116 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:38.123 +01:00 [DBG] Disposing transaction.
2025-09-08 11:20:38.127 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:38.135 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:38.141 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:20:38.148 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:20:38.152 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:20:38.156 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:38.160 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:20:38.165 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:38.171 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 11:20:38.177 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 1045.031ms
2025-09-08 11:20:58.032 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 167
2025-09-08 11:20:58.042 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:20:58.047 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:58.051 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:20:58.054 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:58.059 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:20:58.063 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:58.066 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:0000000B": started reading request body.
2025-09-08 11:20:58.071 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:0000000B": done reading request body.
2025-09-08 11:20:58.275 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:20:58.284 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:20:58.288 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 11:20:58.293 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.299 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.306 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.311 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:58.317 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:58.327 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:58.348 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:58.359 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.365 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:58.373 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.380 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:58.388 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.395 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.399 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.403 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:58.410 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 11:20:58.442 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:58.458 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:58.469 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.476 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:58.483 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.489 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:58.498 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:58.506 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:58.513 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:58.518 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:58.523 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:58.529 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.535 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.543 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.547 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:58.552 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-08 11:20:58.562 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:58.595 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:20:58.605 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.612 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-09-08 11:20:58.620 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.627 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:58.634 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:58.644 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:20:58.651 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.658 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.663 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.666 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:20:58.672 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-08 11:20:58.678 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:58.692 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:58.701 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:58.707 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.712 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-09-08 11:20:58.720 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.726 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:58.734 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.741 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.748 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.753 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:58.761 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-09-08 11:20:58.768 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:58.781 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:20:58.792 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.798 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:58.806 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.813 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:58.821 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.827 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.833 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.838 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:58.845 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:58.851 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:58.862 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:20:58.871 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.877 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:58.883 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.888 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:58.896 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:58.903 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.910 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.916 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:58.921 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:58.928 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 11:20:58.934 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:58.945 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:20:58.955 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.961 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:58.968 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.975 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:58.984 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.989 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:58.996 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:59.000 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:20:59.005 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-08 11:20:59.012 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:59.024 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:20:59.033 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.039 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 11:20:59.047 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.053 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 11:20:59.061 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:59.068 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:20:59.073 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:20:59.078 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:20:59.084 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:20:59.090 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.096 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.101 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:20:59.107 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:20:59.113 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:20:59.118 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 11:20:59.125 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 11:20:59.132 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:59.153 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:20:59.165 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.171 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 11:20:59.179 +01:00 [DBG] Committing transaction.
2025-09-08 11:20:59.200 +01:00 [DBG] Committed transaction.
2025-09-08 11:20:59.207 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.214 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 11:20:59.221 +01:00 [DBG] Disposing transaction.
2025-09-08 11:20:59.226 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:59.233 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:20:59.242 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:20:59.248 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:20:59.253 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:20:59.259 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:20:59.264 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:20:59.269 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:20:59.274 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 11:20:59.281 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 1249.7107ms
2025-09-08 11:21:12.921 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signup - application/json 194
2025-09-08 11:21:12.928 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signup'
2025-09-08 11:21:12.931 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:21:12.933 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:21:12.934 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:21:12.936 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:21:12.938 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:21:12.941 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:0000000D": started reading request body.
2025-09-08 11:21:12.943 +01:00 [DBG] Connection id "0HNFEO2O8VRFD", Request id "0HNFEO2O8VRFD:0000000D": done reading request body.
2025-09-08 11:21:13.022 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:21:13.028 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:21:13.029 +01:00 [DBG] Created DbConnection. (0ms).
2025-09-08 11:21:13.030 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.032 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.033 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.034 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.036 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.037 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:21:13.042 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:21:13.045 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.046 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:21:13.048 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.050 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.052 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.054 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.056 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.057 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.059 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.060 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:21:13.063 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:21:13.065 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.067 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:21:13.068 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.070 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.072 +01:00 [DBG] 'CMSDbContext' generated a value for the property 'AppUser.Discriminator'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.074 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.076 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:21:13.077 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:21:13.078 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:21:13.079 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.081 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.082 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.083 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.084 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.086 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:21:13.107 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 13), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DOB], [Discriminator], [Email], [EmailConfirmed], [Fullname], [Gender], [LibraryID], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-08 11:21:13.117 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.124 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-09-08 11:21:13.128 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.129 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.131 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.133 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 1 entities written to the database.
2025-09-08 11:21:13.135 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.136 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.139 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.141 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.143 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 11:21:13.144 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:21:13.147 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:21:13.149 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.151 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.152 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 11:21:13.154 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.157 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 11:21:13.159 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.160 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.162 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.163 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.164 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.165 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:21:13.168 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-08 11:21:13.171 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.174 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-08 11:21:13.176 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.178 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.181 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.183 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.185 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.187 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.189 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-08 11:21:13.191 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:21:13.194 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-08 11:21:13.196 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.198 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:21:13.199 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.201 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.203 +01:00 [DBG] Context 'CMSDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.205 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.207 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.208 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.209 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.211 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.212 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:21:13.215 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-08 11:21:13.218 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.219 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:21:13.221 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.223 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.225 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.226 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.228 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.229 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.230 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.232 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:21:13.234 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:21:13.237 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.240 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 11:21:13.242 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.244 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 11:21:13.245 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.248 +01:00 [DBG] SaveChanges starting for 'CMSDbContext'.
2025-09-08 11:21:13.249 +01:00 [DBG] DetectChanges starting for 'CMSDbContext'.
2025-09-08 11:21:13.250 +01:00 [DBG] DetectChanges completed for 'CMSDbContext'.
2025-09-08 11:21:13.251 +01:00 [DBG] Executing 2 update commands as a batch.
2025-09-08 11:21:13.252 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.254 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.257 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 11:21:13.259 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 11:21:13.260 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:21:13.261 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 11:21:13.262 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 11:21:13.264 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:21:13.266 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = Date), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DOB] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [Fullname] = @p7, [Gender] = @p8, [LibraryID] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-09-08 11:21:13.269 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.270 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 11:21:13.272 +01:00 [DBG] Committing transaction.
2025-09-08 11:21:13.291 +01:00 [DBG] Committed transaction.
2025-09-08 11:21:13.294 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.297 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (3ms).
2025-09-08 11:21:13.301 +01:00 [DBG] Disposing transaction.
2025-09-08 11:21:13.304 +01:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'CMSDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.313 +01:00 [DBG] An entity of type 'AppUser' tracked by 'CMSDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 11:21:13.318 +01:00 [DBG] SaveChanges completed for 'CMSDbContext' with 2 entities written to the database.
2025-09-08 11:21:13.323 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 11:21:13.328 +01:00 [INF] Writing value of type 'IdentityResult' as Json.
2025-09-08 11:21:13.331 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signup => CreateUser'
2025-09-08 11:21:13.335 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:21:13.340 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:21:13.346 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 11:21:13.350 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signup - 200 null application/json; charset=utf-8 429.4543ms
2025-09-08 11:27:53.128 +01:00 [DBG] Connection id "0HNFEO2O8VRFD" received FIN.
2025-09-08 11:27:53.141 +01:00 [DBG] Connection id "0HNFEO2O8VRFD" is closed. The last processed stream ID was 13.
2025-09-08 11:27:53.160 +01:00 [DBG] The connection queue processing loop for 0HNFEO2O8VRFD completed.
2025-09-08 11:27:53.179 +01:00 [DBG] Connection id "0HNFEO2O8VRFD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 11:27:53.214 +01:00 [DBG] Connection id "0HNFEO2O8VRFD" stopped.
2025-09-08 11:39:47.081 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 11:39:47.215 +01:00 [DBG] Hosting starting
2025-09-08 11:39:47.257 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 11:39:47.273 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 11:39:47.284 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 11:39:47.299 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 11:39:47.307 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:39:47.313 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 11:39:47.318 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:39:47.327 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 11:39:47.332 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 11:39:47.335 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 11:39:47.338 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 11:39:47.345 +01:00 [DBG] Middleware loaded
2025-09-08 11:39:47.348 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 11:39:47.350 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 11:39:47.514 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 11:39:47.520 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 11:39:47.533 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 11:39:47.687 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 11:39:47.694 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 11:39:47.699 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 11:39:47.703 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 11:39:47.705 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 11:39:47.706 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 11:39:47.714 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:39:47.722 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:39:47.762 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 11:39:47.765 +01:00 [INF] Hosting environment: Development
2025-09-08 11:39:47.769 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 11:39:47.771 +01:00 [DBG] Hosting started
2025-09-08 11:40:11.253 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" accepted.
2025-09-08 11:40:11.277 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" started.
2025-09-08 11:40:11.406 +01:00 [DBG] Connection 0HNFEOGB5LFM4 established using the following protocol: "Tls13"
2025-09-08 11:40:11.489 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 11:40:11.753 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 11:40:11.760 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:40:11.896 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 11:40:11.904 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 11:40:11.922 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 11:40:11.928 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 11:40:11.939 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 460.7166ms
2025-09-08 11:40:11.959 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 11:40:11.959 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 11:40:11.984 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 11:40:11.987 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 28.4154ms
2025-09-08 11:40:12.029 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.3057ms
2025-09-08 11:40:12.188 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 11:40:12.196 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 11:40:12.199 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:40:12.361 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.1482ms
2025-09-08 11:41:36.784 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-08 11:41:36.824 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 11:41:36.830 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:41:36.864 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:41:37.010 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:41:37.023 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:41:37.029 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:41:37.043 +01:00 [DBG] Connection id "0HNFEOGB5LFM4", Request id "0HNFEOGB5LFM4:00000009": started reading request body.
2025-09-08 11:41:37.050 +01:00 [DBG] Connection id "0HNFEOGB5LFM4", Request id "0HNFEOGB5LFM4:00000009": done reading request body.
2025-09-08 11:41:37.075 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:41:37.084 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "LoginModel loginModel" from the request body as JSON.
 ---> System.Text.Json.JsonException: 'e' is an invalid start of a property name. Expected a '"'. Path: $ | LineNumber: 1 | BytePositionInLine: 2.
 ---> System.Text.Json.JsonReaderException: 'e' is an invalid start of a property name. Expected a '"'. LineNumber: 1 | BytePositionInLine: 2.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 11:41:37.181 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null text/plain; charset=utf-8 397.4231ms
2025-09-08 11:42:17.425 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 74
2025-09-08 11:42:17.439 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 11:42:17.444 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:42:17.450 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:42:17.459 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:42:17.465 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:42:17.470 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:42:17.476 +01:00 [DBG] Connection id "0HNFEOGB5LFM4", Request id "0HNFEOGB5LFM4:0000000B": started reading request body.
2025-09-08 11:42:17.482 +01:00 [DBG] Connection id "0HNFEOGB5LFM4", Request id "0HNFEOGB5LFM4:0000000B": done reading request body.
2025-09-08 11:42:17.750 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 11:42:18.939 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 11:42:18.947 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 11:42:19.238 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 11:42:19.515 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:42:19.715 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 11:42:20.354 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:42:20.477 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:42:20.523 +01:00 [DBG] Created DbConnection. (42ms).
2025-09-08 11:42:20.535 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:42:21.036 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:42:21.050 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:42:21.071 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2025-09-08 11:42:21.098 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (50ms).
2025-09-08 11:42:21.125 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:42:21.246 +01:00 [INF] Executed DbCommand (127ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:42:21.350 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 11:42:21.371 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:42:21.392 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 125ms reading results.
2025-09-08 11:42:21.409 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:42:21.427 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (18ms).
2025-09-08 11:42:22.129 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:42:53.237 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.SignIn(UserManager`1 userManager, LoginModel loginModel, IOptions`1 jwtSettings) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\IdentityUserEndpoints.cs:line 71
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 11:42:53.293 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" received FIN.
2025-09-08 11:42:53.329 +01:00 [DBG] Connection id "0HNFEOGB5LFM5" accepted.
2025-09-08 11:42:53.409 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" is closing.
2025-09-08 11:42:53.473 +01:00 [DBG] Connection id "0HNFEOGB5LFM5" started.
2025-09-08 11:42:53.474 +01:00 [DBG] Connection id "0HNFEOGB5LFM6" accepted.
2025-09-08 11:42:53.464 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" is closed. The last processed stream ID was 13.
2025-09-08 11:42:53.485 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:42:53.489 +01:00 [DBG] Connection id "0HNFEOGB5LFM6" started.
2025-09-08 11:42:53.406 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 11:42:53.474 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" reset.
2025-09-08 11:42:53.527 +01:00 [DBG] Connection id "0HNFEOGB5LFM7" accepted.
2025-09-08 11:42:53.550 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:42:53.534 +01:00 [DBG] Connection 0HNFEOGB5LFM5 established using the following protocol: "Tls13"
2025-09-08 11:42:53.537 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" sending RST because: "The client closed the connection."
2025-09-08 11:42:53.552 +01:00 [DBG] Connection 0HNFEOGB5LFM6 established using the following protocol: "Tls13"
2025-09-08 11:42:53.567 +01:00 [DBG] Connection id "0HNFEOGB5LFM7" started.
2025-09-08 11:42:53.574 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 11:42:53.575 +01:00 [DBG] Disposed connection to database '' on server '' (25ms).
2025-09-08 11:42:53.579 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 11:42:53.598 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:42:53.601 +01:00 [DBG] Connection 0HNFEOGB5LFM7 established using the following protocol: "Tls13"
2025-09-08 11:42:53.606 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 500 null text/plain; charset=utf-8 36181.2699ms
2025-09-08 11:42:53.623 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 11:42:53.625 +01:00 [DBG] The request was aborted by the client.
2025-09-08 11:42:53.646 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:42:53.650 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 499 null text/html;charset=utf-8 243.7772ms
2025-09-08 11:42:53.654 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 11:42:53.671 +01:00 [DBG] The connection queue processing loop for 0HNFEOGB5LFM4 completed.
2025-09-08 11:42:53.672 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 11:42:53.681 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 11:42:53.685 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 11:42:53.685 +01:00 [DBG] Connection id "0HNFEOGB5LFM4" stopped.
2025-09-08 11:42:53.689 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 109.9262ms
2025-09-08 11:42:53.719 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 11:42:53.719 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 11:42:53.729 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 11:42:53.737 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 18.6979ms
2025-09-08 11:42:53.752 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.2612ms
2025-09-08 11:42:53.925 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 11:42:53.932 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 11:42:53.935 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:42:53.946 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.2021ms
2025-09-08 11:43:03.410 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 11:43:03.568 +01:00 [DBG] Hosting starting
2025-09-08 11:43:03.611 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 11:43:03.629 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 11:43:03.650 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 11:43:03.669 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 11:43:03.678 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:43:03.684 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 11:43:03.688 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:43:03.697 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 11:43:03.700 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 11:43:03.704 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 11:43:03.707 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 11:43:03.716 +01:00 [DBG] Middleware loaded
2025-09-08 11:43:03.720 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 11:43:03.723 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 11:43:03.934 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 11:43:03.937 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 11:43:03.949 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 11:43:04.110 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 11:43:04.114 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 11:43:04.118 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 11:43:04.119 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 11:43:04.120 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 11:43:04.122 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 11:43:04.130 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:43:04.137 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:43:04.176 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 11:43:04.178 +01:00 [INF] Hosting environment: Development
2025-09-08 11:43:04.180 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 11:43:04.183 +01:00 [DBG] Hosting started
2025-09-08 11:43:07.411 +01:00 [DBG] Connection id "0HNFEOHVLKNRR" accepted.
2025-09-08 11:43:07.415 +01:00 [DBG] Connection id "0HNFEOHVLKNRR" started.
2025-09-08 11:43:07.467 +01:00 [DBG] Connection 0HNFEOHVLKNRR established using the following protocol: "Tls13"
2025-09-08 11:43:07.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 11:43:07.662 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 11:43:07.667 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:43:07.745 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 11:43:07.751 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 11:43:07.761 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 11:43:07.765 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 11:43:07.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 246.7642ms
2025-09-08 11:43:07.779 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 11:43:07.779 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 11:43:07.813 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 11:43:07.816 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 36.6338ms
2025-09-08 11:43:07.831 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.113ms
2025-09-08 11:43:07.859 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 11:43:07.866 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 11:43:07.870 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:43:07.998 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 138.8931ms
2025-09-08 11:44:14.788 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 11:44:14.858 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 11:44:14.865 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:44:14.898 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:44:15.069 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:44:15.082 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:44:15.089 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:44:15.101 +01:00 [DBG] Connection id "0HNFEOHVLKNRR", Request id "0HNFEOHVLKNRR:00000009": started reading request body.
2025-09-08 11:44:15.108 +01:00 [DBG] Connection id "0HNFEOHVLKNRR", Request id "0HNFEOHVLKNRR:00000009": done reading request body.
2025-09-08 11:44:15.386 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 11:44:16.619 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 11:44:16.627 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 11:44:16.938 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 11:44:17.204 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:44:17.387 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 11:44:18.016 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:44:18.131 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:44:18.179 +01:00 [DBG] Created DbConnection. (42ms).
2025-09-08 11:44:18.192 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:44:18.709 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:44:18.725 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:44:18.745 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-09-08 11:44:18.769 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (45ms).
2025-09-08 11:44:18.792 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:44:18.935 +01:00 [INF] Executed DbCommand (141ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:44:19.060 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 11:44:19.081 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:44:19.105 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 147ms reading results.
2025-09-08 11:44:19.119 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:44:19.135 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (15ms).
2025-09-08 11:44:19.796 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:52:58.475 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.SignIn(UserManager`1 userManager, LoginModel loginModel, IOptions`1 jwtSettings) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\IdentityUserEndpoints.cs:line 71
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 11:52:58.616 +01:00 [DBG] Connection id "0HNFEOHVLKNRR" received FIN.
2025-09-08 11:52:58.620 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 11:52:58.625 +01:00 [DBG] Connection id "0HNFEOHVLKNRR" is closed. The last processed stream ID was 9.
2025-09-08 11:52:58.623 +01:00 [DBG] Connection id "0HNFEOHVLKNRR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 11:52:58.634 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:52:58.644 +01:00 [DBG] Disposed connection to database '' on server '' (10ms).
2025-09-08 11:52:58.652 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 500 null text/plain; charset=utf-8 523864.4216ms
2025-09-08 11:52:58.670 +01:00 [DBG] The connection queue processing loop for 0HNFEOHVLKNRR completed.
2025-09-08 11:52:58.689 +01:00 [DBG] Connection id "0HNFEOHVLKNRR" stopped.
2025-09-08 11:53:46.987 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 11:53:47.124 +01:00 [DBG] Hosting starting
2025-09-08 11:53:47.160 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 11:53:47.173 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 11:53:47.185 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 11:53:47.199 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 11:53:47.208 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:53:47.213 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 11:53:47.217 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:53:47.224 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 11:53:47.227 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 11:53:47.229 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 11:53:47.231 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 11:53:47.240 +01:00 [DBG] Middleware loaded
2025-09-08 11:53:47.242 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 11:53:47.245 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 11:53:47.377 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 11:53:47.382 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 11:53:47.394 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 11:53:47.563 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 11:53:47.567 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 11:53:47.570 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 11:53:47.572 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 11:53:47.573 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 11:53:47.574 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 11:53:47.581 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:53:47.591 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:53:47.628 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 11:53:47.631 +01:00 [INF] Hosting environment: Development
2025-09-08 11:53:47.634 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 11:53:47.636 +01:00 [DBG] Hosting started
2025-09-08 11:53:57.955 +01:00 [DBG] Connection id "0HNFEOO1HMUM3" accepted.
2025-09-08 11:53:57.961 +01:00 [DBG] Connection id "0HNFEOO1HMUM3" started.
2025-09-08 11:53:58.060 +01:00 [DBG] Connection 0HNFEOO1HMUM3 established using the following protocol: "Tls13"
2025-09-08 11:53:58.175 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 11:53:58.268 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 11:53:58.274 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:53:58.333 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:53:58.476 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:53:58.488 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:53:58.495 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:53:58.508 +01:00 [DBG] Connection id "0HNFEOO1HMUM3", Request id "0HNFEOO1HMUM3:00000001": started reading request body.
2025-09-08 11:53:58.515 +01:00 [DBG] Connection id "0HNFEOO1HMUM3", Request id "0HNFEOO1HMUM3:00000001": done reading request body.
2025-09-08 11:53:58.783 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 11:53:59.966 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 11:53:59.974 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 11:54:00.278 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 11:54:00.539 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 11:54:00.744 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 11:54:01.415 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 11:54:01.519 +01:00 [DBG] Creating DbConnection.
2025-09-08 11:54:01.564 +01:00 [DBG] Created DbConnection. (40ms).
2025-09-08 11:54:01.575 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:54:02.050 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:54:02.064 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 11:54:02.082 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2025-09-08 11:54:02.114 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (51ms).
2025-09-08 11:54:02.145 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:54:02.268 +01:00 [INF] Executed DbCommand (131ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 11:54:02.398 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 11:54:02.419 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:54:02.445 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 153ms reading results.
2025-09-08 11:54:02.457 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 11:54:02.473 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (16ms).
2025-09-08 11:54:03.113 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:57:31.418 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 11:57:31.545 +01:00 [DBG] Hosting starting
2025-09-08 11:57:31.578 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 11:57:31.596 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 11:57:31.613 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 11:57:31.627 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 11:57:31.641 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:57:31.646 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 11:57:31.649 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 11:57:31.657 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 11:57:31.661 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 11:57:31.664 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 11:57:31.666 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 11:57:31.676 +01:00 [DBG] Middleware loaded
2025-09-08 11:57:31.679 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 11:57:31.682 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 11:57:31.834 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 11:57:31.838 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 11:57:31.849 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 11:57:31.962 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 11:57:31.967 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 11:57:31.971 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 11:57:31.974 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 11:57:31.977 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 11:57:31.979 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 11:57:31.989 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:57:31.995 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 11:57:32.030 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 11:57:32.034 +01:00 [INF] Hosting environment: Development
2025-09-08 11:57:32.039 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 11:57:32.043 +01:00 [DBG] Hosting started
2025-09-08 11:58:25.971 +01:00 [DBG] Connection id "0HNFEOQHDMDD8" accepted.
2025-09-08 11:58:26.017 +01:00 [DBG] Connection id "0HNFEOQHDMDD8" started.
2025-09-08 11:58:26.199 +01:00 [DBG] Connection 0HNFEOQHDMDD8 established using the following protocol: "Tls13"
2025-09-08 11:58:26.326 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 11:58:26.599 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 11:58:26.606 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:58:26.758 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 11:58:26.765 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 11:58:26.781 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 11:58:26.785 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 11:58:26.807 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 496.0245ms
2025-09-08 11:58:26.808 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 11:58:26.808 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 11:58:26.844 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 11:58:26.854 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 46.1573ms
2025-09-08 11:58:26.897 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.4109ms
2025-09-08 11:58:27.020 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 11:58:27.027 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 11:58:27.031 +01:00 [DBG] Request did not match any endpoints
2025-09-08 11:58:27.295 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 274.7381ms
2025-09-08 11:59:53.491 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-08 11:59:53.533 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 11:59:53.539 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:59:53.571 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 11:59:53.757 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:59:53.768 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 11:59:53.773 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:59:53.788 +01:00 [DBG] Connection id "0HNFEOQHDMDD8", Request id "0HNFEOQHDMDD8:00000009": started reading request body.
2025-09-08 11:59:53.795 +01:00 [DBG] Connection id "0HNFEOQHDMDD8", Request id "0HNFEOQHDMDD8:00000009": done reading request body.
2025-09-08 11:59:53.823 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 11:59:53.833 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "LoginModel loginModel" from the request body as JSON.
 ---> System.Text.Json.JsonException: Expected depth to be zero at the end of the JSON payload. There is an open JSON object or array that should be closed. Path: $ | LineNumber: 2 | BytePositionInLine: 31.
 ---> System.Text.Json.JsonReaderException: Expected depth to be zero at the end of the JSON payload. There is an open JSON object or array that should be closed. LineNumber: 2 | BytePositionInLine: 31.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 11:59:53.964 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null text/plain; charset=utf-8 473.1763ms
2025-09-08 12:00:05.224 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 12:00:05.252 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 12:00:05.257 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:00:05.262 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 12:00:05.272 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:00:05.277 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:00:05.282 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:00:05.288 +01:00 [DBG] Connection id "0HNFEOQHDMDD8", Request id "0HNFEOQHDMDD8:0000000B": started reading request body.
2025-09-08 12:00:05.295 +01:00 [DBG] Connection id "0HNFEOQHDMDD8", Request id "0HNFEOQHDMDD8:0000000B": done reading request body.
2025-09-08 12:00:05.568 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 12:00:06.805 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 12:00:06.814 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 12:00:07.177 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 12:00:07.488 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:00:07.690 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 12:00:08.393 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 12:00:08.505 +01:00 [DBG] Creating DbConnection.
2025-09-08 12:00:08.554 +01:00 [DBG] Created DbConnection. (40ms).
2025-09-08 12:00:08.566 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:00:09.025 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:00:09.033 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:00:09.041 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 12:00:09.054 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-09-08 12:00:09.070 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:00:09.197 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:00:09.324 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 12:00:09.347 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:00:09.370 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 131ms reading results.
2025-09-08 12:00:09.381 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:00:09.400 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (18ms).
2025-09-08 12:00:09.997 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:05:32.358 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 12:05:32.721 +01:00 [DBG] Hosting starting
2025-09-08 12:05:32.781 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 12:05:32.810 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 12:05:32.827 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 12:05:32.849 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 12:05:32.858 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 12:05:32.863 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 12:05:32.866 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 12:05:32.873 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 12:05:32.877 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 12:05:32.881 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 12:05:32.884 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 12:05:32.902 +01:00 [DBG] Middleware loaded
2025-09-08 12:05:32.906 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 12:05:32.912 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 12:05:33.110 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 12:05:33.114 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 12:05:33.125 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 12:05:33.272 +01:00 [DBG] Connection id "0HNFEOUGOP2MR" accepted.
2025-09-08 12:05:33.277 +01:00 [DBG] Connection id "0HNFEOUGOP2MR" started.
2025-09-08 12:05:33.285 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 12:05:33.288 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 12:05:33.296 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 12:05:33.298 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 12:05:33.300 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 12:05:33.302 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 12:05:33.316 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 12:05:33.331 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 12:05:33.361 +01:00 [DBG] Connection 0HNFEOUGOP2MR established using the following protocol: "Tls13"
2025-09-08 12:05:33.395 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 12:05:33.397 +01:00 [INF] Hosting environment: Development
2025-09-08 12:05:33.400 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 12:05:33.403 +01:00 [DBG] Hosting started
2025-09-08 12:05:33.428 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 12:05:33.667 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 12:05:33.673 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:05:33.810 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 12:05:33.816 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 12:05:33.833 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 12:05:33.841 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 12:05:33.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 433.7173ms
2025-09-08 12:05:33.903 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 12:05:33.906 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 12:05:33.939 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 12:05:33.943 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 39.3245ms
2025-09-08 12:05:33.971 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.0801ms
2025-09-08 12:05:34.143 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 12:05:34.150 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 12:05:34.152 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:05:34.290 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.623ms
2025-09-08 12:05:54.907 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 12:05:54.981 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 12:05:54.988 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:05:55.024 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 12:05:55.242 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:05:55.260 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:05:55.276 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:05:55.294 +01:00 [DBG] Connection id "0HNFEOUGOP2MR", Request id "0HNFEOUGOP2MR:00000009": started reading request body.
2025-09-08 12:05:55.296 +01:00 [DBG] Connection id "0HNFEOUGOP2MR", Request id "0HNFEOUGOP2MR:00000009": done reading request body.
2025-09-08 12:05:55.593 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 12:05:56.906 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 12:05:56.914 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 12:05:57.191 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 12:05:57.432 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:05:57.638 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 12:05:58.418 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 12:05:58.545 +01:00 [DBG] Creating DbConnection.
2025-09-08 12:05:58.591 +01:00 [DBG] Created DbConnection. (43ms).
2025-09-08 12:05:58.602 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:05:59.151 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:05:59.163 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:05:59.183 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2025-09-08 12:05:59.206 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (43ms).
2025-09-08 12:05:59.230 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:05:59.363 +01:00 [INF] Executed DbCommand (134ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:05:59.491 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 12:05:59.514 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:05:59.538 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 154ms reading results.
2025-09-08 12:05:59.554 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:05:59.573 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (18ms).
2025-09-08 12:18:32.587 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:31:41.823 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at CMSApi.Presentation.Controllers.IdentityUserEndpoints.SignIn(UserManager`1 userManager, LoginModel loginModel, IOptions`1 jwtSettings) in C:\Users\HP\Documents\repos\CMSApi\CMSApi\Presentation\Controllers\IdentityUserEndpoints.cs:line 71
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 12:31:41.957 +01:00 [DBG] Connection id "0HNFEOUGOP2MR" received FIN.
2025-09-08 12:31:41.959 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 12:31:41.966 +01:00 [DBG] Connection id "0HNFEOUGOP2MR" is closed. The last processed stream ID was 9.
2025-09-08 12:31:41.972 +01:00 [DBG] Connection id "0HNFEOUGOP2MR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 12:31:41.974 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:31:41.988 +01:00 [DBG] Disposed connection to database '' on server '' (13ms).
2025-09-08 12:31:41.997 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 500 null text/plain; charset=utf-8 1547089.2399ms
2025-09-08 12:31:42.011 +01:00 [DBG] The connection queue processing loop for 0HNFEOUGOP2MR completed.
2025-09-08 12:31:42.017 +01:00 [DBG] Connection id "0HNFEOUGOP2MR" stopped.
2025-09-08 12:34:43.108 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 12:34:43.310 +01:00 [DBG] Hosting starting
2025-09-08 12:34:43.400 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 12:34:43.435 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 12:34:43.465 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 12:34:43.493 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 12:34:43.505 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 12:34:43.514 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 12:34:43.519 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 12:34:43.533 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 12:34:43.539 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 12:34:43.547 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 12:34:43.551 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 12:34:43.565 +01:00 [DBG] Middleware loaded
2025-09-08 12:34:43.570 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 12:34:43.573 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 12:34:43.755 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 12:34:43.760 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 12:34:43.779 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 12:34:43.961 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 12:34:43.964 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 12:34:43.966 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 12:34:43.969 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 12:34:43.970 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 12:34:43.972 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 12:34:43.983 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 12:34:43.991 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 12:34:44.035 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 12:34:44.037 +01:00 [INF] Hosting environment: Development
2025-09-08 12:34:44.040 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 12:34:44.042 +01:00 [DBG] Hosting started
2025-09-08 12:36:11.607 +01:00 [DBG] Connection id "0HNFEPFKKG4QH" accepted.
2025-09-08 12:36:11.659 +01:00 [DBG] Connection id "0HNFEPFKKG4QH" started.
2025-09-08 12:36:11.793 +01:00 [DBG] Connection 0HNFEPFKKG4QH established using the following protocol: "Tls13"
2025-09-08 12:36:11.942 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 12:36:12.051 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 12:36:12.060 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:36:12.143 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 12:36:12.353 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:36:12.368 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:36:12.375 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:36:12.390 +01:00 [DBG] Connection id "0HNFEPFKKG4QH", Request id "0HNFEPFKKG4QH:00000001": started reading request body.
2025-09-08 12:36:12.397 +01:00 [DBG] Connection id "0HNFEPFKKG4QH", Request id "0HNFEPFKKG4QH:00000001": done reading request body.
2025-09-08 12:36:12.745 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 12:36:14.173 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 12:36:14.181 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 12:36:14.524 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 12:36:14.804 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:36:15.045 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 12:36:15.846 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 12:36:15.993 +01:00 [DBG] Creating DbConnection.
2025-09-08 12:36:16.051 +01:00 [DBG] Created DbConnection. (51ms).
2025-09-08 12:36:16.064 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:36:16.710 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:36:16.724 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:36:16.743 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-09-08 12:36:16.773 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (50ms).
2025-09-08 12:36:16.808 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:36:16.981 +01:00 [INF] Executed DbCommand (174ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:36:17.134 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CMSApi.Infrastructure.Data.CMSDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.DateOnly'.
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueFromSqlBufferInternal[T](SqlBuffer data, _SqlMetaData metaData, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValueInternal[T](Int32 i, Boolean isAsync)
   at Microsoft.Data.SqlClient.SqlDataReader.GetFieldValue[T](Int32 i)
   at lambda_method30(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 12:36:17.159 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:36:17.184 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 177ms reading results.
2025-09-08 12:36:17.199 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:36:17.221 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (21ms).
2025-09-08 12:40:02.361 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 12:40:02.790 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 12:40:02.792 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 12:40:02.894 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 12:40:02.968 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:40:03.496 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 12:47:35.328 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 12:47:35.745 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 12:47:35.747 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 12:47:35.846 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 12:47:35.917 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:47:36.040 +01:00 [DBG] Creating DbConnection.
2025-09-08 12:47:36.071 +01:00 [DBG] Created DbConnection. (28ms).
2025-09-08 12:47:36.073 +01:00 [DBG] Migrating using database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.076 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.235 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.240 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 12:47:36.245 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-09-08 12:47:36.247 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2025-09-08 12:47:36.253 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 12:47:36.280 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 12:47:36.282 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.288 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (3ms).
2025-09-08 12:47:36.288 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.289 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.290 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-08 12:47:36.291 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-08 12:47:36.291 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 12:47:36.291 +01:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 12:47:36.292 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-08 12:47:36.309 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-08 12:47:36.362 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 12:47:36.366 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 12:47:36.367 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 12:47:36.367 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.368 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.368 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-08 12:47:36.370 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-08 12:47:36.371 +01:00 [DBG] Committing transaction.
2025-09-08 12:47:36.373 +01:00 [DBG] Committed transaction.
2025-09-08 12:47:36.374 +01:00 [DBG] Disposing transaction.
2025-09-08 12:47:36.376 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-09-08 12:47:36.377 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-09-08 12:47:36.379 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 12:47:36.379 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.379 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.379 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 12:47:36.380 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-08 12:47:36.380 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-08 12:47:36.380 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 12:47:36.380 +01:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 12:47:36.380 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-08 12:47:36.381 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-08 12:47:36.384 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:47:36.384 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-08 12:47:36.384 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-08 12:47:36.384 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-08 12:47:36.389 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-08 12:47:36.639 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.641 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 12:47:36.650 +01:00 [INF] Applying migration '20250908114003_FixDOBDataType'.
2025-09-08 12:47:36.682 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 12:47:36.682 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.682 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.682 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AspNetUsers]') AND [c].[name] = N'DOB');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [AspNetUsers] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [AspNetUsers] ALTER COLUMN [DOB] date NULL;
2025-09-08 12:47:36.738 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AspNetUsers]') AND [c].[name] = N'DOB');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [AspNetUsers] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [AspNetUsers] ALTER COLUMN [DOB] date NULL;
2025-09-08 12:47:36.738 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-09-08 12:47:36.738 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.738 +01:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-09-08 12:47:36.738 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250908114003_FixDOBDataType', N'9.0.8');
2025-09-08 12:47:36.741 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250908114003_FixDOBDataType', N'9.0.8');
2025-09-08 12:47:36.742 +01:00 [DBG] Committing transaction.
2025-09-08 12:47:36.759 +01:00 [DBG] Committed transaction.
2025-09-08 12:47:36.759 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-09-08 12:47:36.760 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 12:47:36.760 +01:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-09-08 12:47:36.760 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-08 12:47:36.763 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-08 12:47:36.763 +01:00 [DBG] Disposing transaction.
2025-09-08 12:47:36.763 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.764 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (0ms).
2025-09-08 12:47:36.766 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 12:47:36.769 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:47:36.770 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 12:48:11.452 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 12:48:11.590 +01:00 [DBG] Hosting starting
2025-09-08 12:48:11.685 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 12:48:11.722 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 12:48:11.747 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 12:48:11.776 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 12:48:11.790 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 12:48:11.800 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 12:48:11.808 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 12:48:11.825 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 12:48:11.833 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 12:48:11.844 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 12:48:11.850 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 12:48:11.875 +01:00 [DBG] Middleware loaded
2025-09-08 12:48:11.884 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 12:48:11.888 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 12:48:12.065 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 12:48:12.072 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 12:48:12.098 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 12:48:12.404 +01:00 [DBG] Connection id "0HNFEPMBEHTTB" accepted.
2025-09-08 12:48:12.412 +01:00 [DBG] Connection id "0HNFEPMBEHTTB" started.
2025-09-08 12:48:12.424 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 12:48:12.430 +01:00 [DBG] Connection id "0HNFEPMBEHTTC" accepted.
2025-09-08 12:48:12.430 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 12:48:12.446 +01:00 [DBG] Connection id "0HNFEPMBEHTTC" started.
2025-09-08 12:48:12.450 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 12:48:12.455 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 12:48:12.456 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 12:48:12.459 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 12:48:12.469 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 12:48:12.482 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 12:48:12.484 +01:00 [DBG] Connection id "0HNFEPMBEHTTB" received FIN.
2025-09-08 12:48:12.514 +01:00 [DBG] Connection 0HNFEPMBEHTTB established using the following protocol: "Tls13"
2025-09-08 12:48:12.514 +01:00 [DBG] Connection 0HNFEPMBEHTTC established using the following protocol: "Tls13"
2025-09-08 12:48:12.560 +01:00 [DBG] Connection id "0HNFEPMBEHTTB" is closed. The last processed stream ID was 0.
2025-09-08 12:48:12.565 +01:00 [DBG] Connection id "0HNFEPMBEHTTB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 12:48:12.570 +01:00 [DBG] The connection queue processing loop for 0HNFEPMBEHTTB completed.
2025-09-08 12:48:12.570 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 12:48:12.574 +01:00 [INF] Hosting environment: Development
2025-09-08 12:48:12.576 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 12:48:12.576 +01:00 [DBG] Connection id "0HNFEPMBEHTTB" stopped.
2025-09-08 12:48:12.577 +01:00 [DBG] Hosting started
2025-09-08 12:48:12.595 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:12.870 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:12.878 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:13.107 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:13.119 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:13.126 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:13.139 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:13.153 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:13.167 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 577.1898ms
2025-09-08 12:48:15.532 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:15.561 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:15.566 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:15.576 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:15.581 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:15.586 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:15.593 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:15.598 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:15.603 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 70.587ms
2025-09-08 12:48:22.070 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:22.078 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:22.081 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:22.086 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:22.090 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:22.093 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:22.095 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:22.098 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:22.102 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 31.6677ms
2025-09-08 12:48:23.706 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:23.720 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:23.725 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:23.727 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:23.731 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:23.733 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:23.736 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:23.738 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:23.740 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 34.2145ms
2025-09-08 12:48:25.644 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:25.651 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:25.654 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:25.656 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:25.658 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:25.660 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:25.662 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:25.665 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:25.668 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 24.633ms
2025-09-08 12:48:26.401 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:26.410 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:26.414 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:26.416 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:26.419 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:26.422 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:26.425 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:26.427 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:26.430 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 29.3932ms
2025-09-08 12:48:35.794 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:35.810 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:35.815 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:35.819 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:35.824 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:35.829 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:35.834 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:35.839 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:35.843 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 49.05ms
2025-09-08 12:48:37.222 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:37.233 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:37.235 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:37.237 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:37.239 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:37.242 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:37.244 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:37.246 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:37.249 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 26.3928ms
2025-09-08 12:48:38.575 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:38.583 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:38.585 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:38.587 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:38.589 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:38.592 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:38.593 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:38.595 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:38.598 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 23.1735ms
2025-09-08 12:48:53.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:53.376 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:53.378 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:53.380 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:53.383 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:53.386 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:53.388 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:53.390 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:53.392 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 23.0375ms
2025-09-08 12:48:56.311 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:56.322 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:56.324 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:56.327 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:56.330 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:56.334 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:56.336 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:56.338 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:56.342 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 30.7496ms
2025-09-08 12:48:57.704 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/ - null null
2025-09-08 12:48:57.717 +01:00 [DBG] No candidates found for the request path '/'
2025-09-08 12:48:57.721 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:48:57.727 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:57.732 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:48:57.737 +01:00 [DBG] Policy authentication schemes Bearer did not succeed
2025-09-08 12:48:57.741 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-08 12:48:57.746 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 12:48:57.751 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/ - 401 0 null 47.2352ms
2025-09-08 12:50:08.106 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 12:50:08.139 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 12:50:08.142 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:50:08.205 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 12:50:08.209 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 12:50:08.223 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 12:50:08.224 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 12:50:08.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 120.3473ms
2025-09-08 12:50:08.252 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 12:50:08.253 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 12:50:08.288 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 12:50:08.291 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 38.6103ms
2025-09-08 12:50:08.323 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.0741ms
2025-09-08 12:50:08.363 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 12:50:08.368 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 12:50:08.371 +01:00 [DBG] Request did not match any endpoints
2025-09-08 12:50:08.501 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.7714ms
2025-09-08 12:51:10.285 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 12:51:10.324 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 12:51:10.330 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:51:10.337 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 12:51:10.341 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:51:10.346 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 12:51:10.352 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:51:10.368 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000021": started reading request body.
2025-09-08 12:51:10.374 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000021": done reading request body.
2025-09-08 12:51:10.706 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 12:51:12.116 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 12:51:12.123 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 12:51:12.440 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 12:51:12.727 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:51:12.915 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 12:51:13.610 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 12:51:13.745 +01:00 [DBG] Creating DbConnection.
2025-09-08 12:51:13.797 +01:00 [DBG] Created DbConnection. (48ms).
2025-09-08 12:51:13.809 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:14.402 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:14.416 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:51:14.431 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (14ms).
2025-09-08 12:51:14.458 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (42ms).
2025-09-08 12:51:14.489 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:51:14.657 +01:00 [INF] Executed DbCommand (182ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 12:51:14.761 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 12:51:14.861 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:14.884 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 210ms reading results.
2025-09-08 12:51:14.899 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:14.916 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (17ms).
2025-09-08 12:51:15.217 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-08 12:51:15.338 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-08 12:51:15.349 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:15.356 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:15.361 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:51:15.365 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 12:51:15.373 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 12:51:15.379 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 12:51:15.398 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 12:51:15.410 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:15.416 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-09-08 12:51:15.423 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:15.427 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 12:51:15.529 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 12:51:15.540 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 12:51:15.548 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 12:51:15.560 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 12:51:15.568 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:15.574 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 12:51:15.581 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 5296.3579ms
2025-09-08 12:51:55.287 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/UserProfile - null null
2025-09-08 12:51:55.305 +01:00 [DBG] 1 candidate(s) found for the request path '/api/UserProfile'
2025-09-08 12:51:55.311 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 12:51:55.421 +01:00 [DBG] Successfully validated the token.
2025-09-08 12:51:55.427 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 12:51:55.435 +01:00 [DBG] Authorization was successful.
2025-09-08 12:51:55.439 +01:00 [INF] Executing endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 12:51:55.623 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 12:51:55.654 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(e => EF.Property<string>(e, "Id") == __p_0)'
2025-09-08 12:51:55.734 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.Id == @__p_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.Id == @__p_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 12:51:55.753 +01:00 [DBG] Creating DbConnection.
2025-09-08 12:51:55.757 +01:00 [DBG] Created DbConnection. (4ms).
2025-09-08 12:51:55.762 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:55.766 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:55.772 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 12:51:55.776 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 12:51:55.785 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-09-08 12:51:55.791 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[Id] = @__p_0
2025-09-08 12:51:55.806 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[Id] = @__p_0
2025-09-08 12:51:55.817 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 12:51:55.824 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:55.830 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 12:51:55.837 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:55.843 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 12:51:55.850 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 12:51:55.857 +01:00 [INF] Writing value of type '<>f__AnonymousType11`2' as Json.
2025-09-08 12:51:55.864 +01:00 [INF] Executed endpoint 'HTTP: GET /api/UserProfile => GetUserProfile'
2025-09-08 12:51:55.870 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 12:51:55.875 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 12:51:55.881 +01:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-09-08 12:51:55.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/UserProfile - 200 null application/json; charset=utf-8 600.176ms
2025-09-08 13:07:46.644 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-08 13:07:46.655 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:07:46.659 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:07:46.663 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:07:46.693 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:07:46 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:07:46.744 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:07:46 PM'.
2025-09-08 13:07:46.750 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:07:46 PM'.
2025-09-08 13:07:46.757 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:07:46.761 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000025": started reading request body.
2025-09-08 13:07:46.767 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000025": done reading request body.
2025-09-08 13:07:46.824 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:07:46.843 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:07:46.847 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:07:46.850 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:46.909 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:46.916 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:07:46.922 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 13:07:46.928 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 13:07:46.934 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:07:46.980 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:07:46.991 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:07:46.997 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.004 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 13:07:47.010 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.015 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 13:07:47.237 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.241 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.245 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:07:47.249 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:07:47.254 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-08 13:07:47.259 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:07:47.274 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:07:47.280 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.284 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 13:07:47.289 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.294 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 13:07:47.300 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:07:47.304 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:07:47.309 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:07:47.314 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:07:47.318 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:07:47.322 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-08 13:07:47.327 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 683.1552ms
2025-09-08 13:09:42.159 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:09:42.172 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:09:42.177 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:09:42.180 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:09:42.184 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:09:42 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:09:42.193 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:09:42 PM'.
2025-09-08 13:09:42.196 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:09:42 PM'.
2025-09-08 13:09:42.200 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:09:42.203 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000027": started reading request body.
2025-09-08 13:09:42.209 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000027": done reading request body.
2025-09-08 13:09:42.218 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:09:42.229 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:09:42.232 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:09:42.237 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.244 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.263 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:09:42.270 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 13:09:42.276 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-09-08 13:09:42.283 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:09:42.301 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:09:42.311 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:09:42.320 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.326 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-09-08 13:09:42.334 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.340 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:09:42.530 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.536 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.542 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:09:42.547 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 13:09:42.553 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 13:09:42.559 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:09:42.573 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:09:42.581 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.586 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 13:09:42.592 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.598 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (5ms).
2025-09-08 13:09:42.605 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:09:42.610 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:09:42.616 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:09:42.621 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:09:42.626 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:42.631 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 13:09:42.638 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 479.1902ms
2025-09-08 13:09:47.186 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:09:47.193 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:09:47.196 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:09:47.197 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:09:47.200 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:09:47 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:09:47.206 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:09:47 PM'.
2025-09-08 13:09:47.207 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:09:47 PM'.
2025-09-08 13:09:47.211 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:09:47.214 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000029": started reading request body.
2025-09-08 13:09:47.217 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000029": done reading request body.
2025-09-08 13:09:47.226 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:09:47.235 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:09:47.239 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:09:47.245 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.251 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.257 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:09:47.263 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 13:09:47.269 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 13:09:47.275 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:09:47.285 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:09:47.295 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:09:47.301 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.309 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 13:09:47.316 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.323 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:09:47.515 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.522 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.527 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:09:47.532 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 13:09:47.537 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-08 13:09:47.543 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:09:47.551 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:09:47.561 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.567 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 13:09:47.573 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.577 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (3ms).
2025-09-08 13:09:47.583 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:09:47.588 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:09:47.594 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:09:47.599 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:09:47.608 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:09:47.613 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 13:09:47.620 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 433.9116ms
2025-09-08 13:10:53.153 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:10:53.180 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:10:53.184 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:10:53.189 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:10:53.195 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:10:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:10:53.204 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:10:53 PM'.
2025-09-08 13:10:53.208 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:10:53 PM'.
2025-09-08 13:10:53.213 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:10:53.217 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:0000002B": started reading request body.
2025-09-08 13:10:53.223 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:0000002B": done reading request body.
2025-09-08 13:10:53.229 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:10:53.238 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:10:53.241 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:10:53.246 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:10:53.250 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:10:53.257 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:10:53.261 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 13:10:53.268 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 13:10:53.274 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:10:53.294 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:10:53.306 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:10:53.311 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:10:53.318 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-09-08 13:10:53.325 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:10:53.332 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:10:53.530 +01:00 [DBG] Invalid password for user.
2025-09-08 13:10:53.536 +01:00 [INF] Setting HTTP status code 400.
2025-09-08 13:10:53.542 +01:00 [INF] Writing value of type '<>f__AnonymousType15`1' as Json.
2025-09-08 13:10:53.549 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:10:53.555 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:10:53.560 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:10:53.566 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 13:10:53.571 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null application/json; charset=utf-8 418.7753ms
2025-09-08 13:11:34.817 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 76
2025-09-08 13:11:34.865 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:11:34.869 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:11:34.873 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:11:34.879 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:11:34 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:11:34.889 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:11:34 PM'.
2025-09-08 13:11:34.895 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:11:34 PM'.
2025-09-08 13:11:34.899 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:11:34.904 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:0000002D": started reading request body.
2025-09-08 13:11:34.911 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:0000002D": done reading request body.
2025-09-08 13:11:34.918 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:11:34.929 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:11:34.931 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 13:11:34.935 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:34.942 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:34.946 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:11:34.950 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:11:34.955 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-08 13:11:34.962 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:11:34.981 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:11:34.991 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:11:34.997 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:35.003 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-09-08 13:11:35.010 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:35.016 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:11:35.227 +01:00 [DBG] Invalid password for user.
2025-09-08 13:11:35.231 +01:00 [INF] Setting HTTP status code 400.
2025-09-08 13:11:35.235 +01:00 [INF] Writing value of type '<>f__AnonymousType15`1' as Json.
2025-09-08 13:11:35.240 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:11:35.246 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:11:35.250 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:35.256 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 13:11:35.263 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 400 null application/json; charset=utf-8 445.3064ms
2025-09-08 13:11:43.607 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:11:43.613 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:11:43.615 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:11:43.617 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:11:43.619 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:11:43 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:11:43.625 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:11:43 PM'.
2025-09-08 13:11:43.628 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:11:43 PM'.
2025-09-08 13:11:43.630 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:11:43.633 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:0000002F": started reading request body.
2025-09-08 13:11:43.638 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:0000002F": done reading request body.
2025-09-08 13:11:43.645 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:11:43.653 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:11:43.657 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:11:43.662 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.668 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.675 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:11:43.680 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 13:11:43.686 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 13:11:43.691 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:11:43.708 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:11:43.719 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:11:43.724 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.729 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-09-08 13:11:43.735 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.739 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 13:11:43.931 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.937 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.943 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:11:43.948 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 13:11:43.954 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 13:11:43.961 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:11:43.976 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:11:43.986 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:43.992 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 13:11:43.999 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:44.003 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (4ms).
2025-09-08 13:11:44.009 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:11:44.013 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:11:44.016 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:11:44.019 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:11:44.021 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:11:44.025 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-08 13:11:44.029 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 421.7092ms
2025-09-08 13:14:08.934 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:14:08.946 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:14:08.951 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:14:08.955 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:14:08.960 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:14:08 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:14:08.967 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:14:08 PM'.
2025-09-08 13:14:08.972 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:14:08 PM'.
2025-09-08 13:14:08.976 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:14:08.980 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000031": started reading request body.
2025-09-08 13:14:08.986 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000031": done reading request body.
2025-09-08 13:14:08.995 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:14:09.004 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:14:09.006 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 13:14:09.009 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.015 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.020 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:14:09.025 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-09-08 13:14:09.031 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-08 13:14:09.037 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:14:09.058 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:14:09.068 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:14:09.076 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.082 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-09-08 13:14:09.089 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.096 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:14:09.276 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.282 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.286 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:14:09.289 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:14:09.294 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-08 13:14:09.300 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:14:09.314 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:14:09.324 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.330 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 13:14:09.337 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.344 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:14:09.352 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:14:09.360 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:14:09.365 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:14:09.455 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:14:09.461 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:14:09.467 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 13:14:09.475 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 540.892ms
2025-09-08 13:15:07.759 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:15:07.772 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:15:07.774 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:15:07.777 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:15:07.782 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:15:07 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:15:07.788 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:15:07 PM'.
2025-09-08 13:15:07.794 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:15:07 PM'.
2025-09-08 13:15:07.799 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:15:07.804 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000033": started reading request body.
2025-09-08 13:15:07.811 +01:00 [DBG] Connection id "0HNFEPMBEHTTC", Request id "0HNFEPMBEHTTC:00000033": done reading request body.
2025-09-08 13:15:07.817 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:15:07.825 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:15:07.828 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:15:07.833 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:07.839 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:07.844 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:15:07.847 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:15:07.858 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-08 13:15:07.863 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:15:07.878 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:15:07.889 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:15:07.895 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:07.901 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-09-08 13:15:07.908 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:07.914 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:15:08.096 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:08.102 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:08.107 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:15:08.112 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 13:15:08.118 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-08 13:15:08.123 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:15:08.139 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:15:08.148 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:08.154 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-09-08 13:15:08.161 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:08.168 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:15:08.176 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:15:08.181 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:15:08.186 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:15:08.192 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:15:08.197 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:15:08.203 +01:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-09-08 13:15:08.210 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 451.0388ms
2025-09-08 13:15:54.053 +01:00 [DBG] Connection id "0HNFEPMBEHTTC" received FIN.
2025-09-08 13:15:54.095 +01:00 [DBG] Connection id "0HNFEPMBEHTTC" is closed. The last processed stream ID was 51.
2025-09-08 13:15:54.099 +01:00 [DBG] The connection queue processing loop for 0HNFEPMBEHTTC completed.
2025-09-08 13:15:54.153 +01:00 [DBG] Connection id "0HNFEPMBEHTTC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 13:15:54.169 +01:00 [DBG] Connection id "0HNFEPMBEHTTC" stopped.
2025-09-08 13:16:37.541 +01:00 [DBG] Connection id "0HNFEPMBEHTTD" accepted.
2025-09-08 13:16:37.551 +01:00 [DBG] Connection id "0HNFEPMBEHTTD" started.
2025-09-08 13:16:37.570 +01:00 [DBG] Connection 0HNFEPMBEHTTD established using the following protocol: "Tls13"
2025-09-08 13:16:37.575 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 13:16:37.601 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:16:37.606 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:16:37.612 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:16:37.617 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:16:37 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:16:37.626 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:16:37 PM'.
2025-09-08 13:16:37.630 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:16:37 PM'.
2025-09-08 13:16:37.633 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:16:37.637 +01:00 [DBG] Connection id "0HNFEPMBEHTTD", Request id "0HNFEPMBEHTTD:00000001": started reading request body.
2025-09-08 13:16:37.642 +01:00 [DBG] Connection id "0HNFEPMBEHTTD", Request id "0HNFEPMBEHTTD:00000001": done reading request body.
2025-09-08 13:16:37.649 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:16:37.659 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:16:37.663 +01:00 [DBG] Created DbConnection. (3ms).
2025-09-08 13:16:37.668 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:37.675 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:37.682 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:16:37.687 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 13:16:37.694 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 13:16:37.700 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:16:37.719 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:16:37.730 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:16:37.736 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:37.742 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-09-08 13:16:37.750 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:37.757 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:16:37.941 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:37.948 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:37.954 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:16:37.960 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 13:16:37.966 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-08 13:16:37.973 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:16:37.989 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:16:38.014 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:38.020 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-09-08 13:16:38.028 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:38.035 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (6ms).
2025-09-08 13:16:38.042 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:16:38.047 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:16:38.052 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:16:38.057 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:16:38.061 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:16:38.067 +01:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-09-08 13:16:38.074 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 498.5682ms
2025-09-08 13:18:10.858 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 13:18:10.872 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:18:10.874 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:18:10.876 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:18:10.878 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:18:10 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:18:10.880 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:18:10 PM'.
2025-09-08 13:18:10.881 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:01:15 PM', Current time (UTC): '9/8/2025 12:18:10 PM'.
2025-09-08 13:18:10.882 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:18:10.883 +01:00 [DBG] Connection id "0HNFEPMBEHTTD", Request id "0HNFEPMBEHTTD:00000003": started reading request body.
2025-09-08 13:18:10.885 +01:00 [DBG] Connection id "0HNFEPMBEHTTD", Request id "0HNFEPMBEHTTD:00000003": done reading request body.
2025-09-08 13:18:10.887 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:18:10.892 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:18:10.893 +01:00 [DBG] Created DbConnection. (1ms).
2025-09-08 13:18:10.894 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:10.896 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:10.897 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:18:10.899 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:18:10.901 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:18:10.902 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:18:10.912 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:18:10.916 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:18:10.918 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:10.920 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 13:18:10.923 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:10.925 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 13:18:11.011 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:11.013 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:11.015 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:18:11.016 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:18:11.017 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 13:18:11.018 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:18:11.024 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:18:11.027 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:11.028 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 13:18:11.030 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:11.031 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:18:11.033 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:18:11.034 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:18:11.036 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:18:11.037 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:18:11.039 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:18:11.041 +01:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-08 13:18:11.043 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 184.4988ms
2025-09-08 13:29:05.275 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 13:29:05.386 +01:00 [DBG] Hosting starting
2025-09-08 13:29:05.425 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 13:29:05.436 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 13:29:05.447 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 13:29:05.460 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 13:29:05.466 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 13:29:05.470 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 13:29:05.474 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 13:29:05.479 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 13:29:05.482 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 13:29:05.484 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 13:29:05.486 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 13:29:05.495 +01:00 [DBG] Middleware loaded
2025-09-08 13:29:05.499 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 13:29:05.501 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 13:29:05.642 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 13:29:05.647 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 13:29:05.661 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 13:29:05.806 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 13:29:05.810 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 13:29:05.813 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 13:29:05.814 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 13:29:05.815 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 13:29:05.816 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 13:29:05.824 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 13:29:05.830 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 13:29:05.866 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 13:29:05.867 +01:00 [INF] Hosting environment: Development
2025-09-08 13:29:05.869 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 13:29:05.870 +01:00 [DBG] Hosting started
2025-09-08 13:29:05.932 +01:00 [DBG] Connection id "0HNFEQD6L7C75" accepted.
2025-09-08 13:29:05.934 +01:00 [DBG] Connection id "0HNFEQD6L7C75" started.
2025-09-08 13:29:05.978 +01:00 [DBG] Connection 0HNFEQD6L7C75 established using the following protocol: "Tls13"
2025-09-08 13:29:06.032 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 13:29:06.139 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 13:29:06.142 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:29:06.210 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 13:29:06.212 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 13:29:06.221 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 13:29:06.224 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 13:29:06.229 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 202.5621ms
2025-09-08 13:29:06.260 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 13:29:06.260 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 13:29:06.288 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 13:29:06.291 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 30.8095ms
2025-09-08 13:29:06.312 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.1371ms
2025-09-08 13:29:06.346 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 13:29:06.349 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 13:29:06.350 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:29:06.478 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 131.2604ms
2025-09-08 13:29:17.627 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 13:29:17.639 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 13:29:17.641 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:29:17.645 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 13:29:17.647 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 13:29:17.649 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 13:29:17.651 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 13:29:17.652 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 25.4676ms
2025-09-08 13:29:17.666 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 13:29:17.667 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 13:29:17.681 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 13:29:17.683 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 15.7678ms
2025-09-08 13:29:17.695 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.3434ms
2025-09-08 13:29:17.721 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 13:29:17.725 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 13:29:17.727 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:29:17.738 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.1338ms
2025-09-08 13:30:26.154 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOnly - null null
2025-09-08 13:30:26.174 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOnly'
2025-09-08 13:30:26.176 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 13:30:26.317 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:30:26 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:30:26.343 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:30:26 PM'.
2025-09-08 13:30:26.349 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-08 13:30:26.354 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:30:26.361 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 13:30:26.364 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOnly - 401 0 null 210.6968ms
2025-09-08 13:32:20.963 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOnly - null null
2025-09-08 13:32:20.974 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOnly'
2025-09-08 13:32:20.977 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 13:32:20.980 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:32:20 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:32:20.983 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:32:20 PM'.
2025-09-08 13:32:20.985 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-08 13:32:20.986 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:32:20.987 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 13:32:20.988 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOnly - 401 0 null 25.0947ms
2025-09-08 13:33:26.157 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:33:26.167 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:33:26.169 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:33:26.172 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:33:26.174 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:33:26 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:33:26.176 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:33:26 PM'.
2025-09-08 13:33:26.178 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:25:08 PM', Current time (UTC): '9/8/2025 12:33:26 PM'.
2025-09-08 13:33:26.180 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:33:26.185 +01:00 [DBG] Connection id "0HNFEQD6L7C75", Request id "0HNFEQD6L7C75:00000015": started reading request body.
2025-09-08 13:33:26.188 +01:00 [DBG] Connection id "0HNFEQD6L7C75", Request id "0HNFEQD6L7C75:00000015": done reading request body.
2025-09-08 13:33:26.299 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 13:33:26.849 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 13:33:26.854 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 13:33:26.980 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 13:33:27.095 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:33:27.176 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 13:33:27.475 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 13:33:27.529 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:33:27.555 +01:00 [DBG] Created DbConnection. (22ms).
2025-09-08 13:33:27.561 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:27.796 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:27.803 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:33:27.812 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-09-08 13:33:27.827 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2025-09-08 13:33:27.839 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:33:27.907 +01:00 [INF] Executed DbCommand (68ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:33:27.961 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:33:28.022 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.031 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 116ms reading results.
2025-09-08 13:33:28.038 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.047 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (8ms).
2025-09-08 13:33:28.151 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-08 13:33:28.191 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-08 13:33:28.197 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.201 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.204 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:33:28.205 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:33:28.207 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:33:28.208 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:33:28.214 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:33:28.218 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.220 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 13:33:28.223 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.224 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:33:28.240 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:33:28.244 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:33:28.256 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:33:28.261 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:33:28.266 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:33:28.269 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-08 13:33:28.273 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2116.2937ms
2025-09-08 13:34:10.700 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOnly - null null
2025-09-08 13:34:10.712 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOnly'
2025-09-08 13:34:10.714 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 13:34:10.726 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:34:10.729 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:34:10.733 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:34:10.737 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 13:34:10.740 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOnly - 403 0 null 39.2142ms
2025-09-08 13:36:39.468 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-08 13:36:39.486 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:36:39.489 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:36:39.491 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:36:39.493 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 13:36:39.495 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 13:36:39.497 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:36:39.499 +01:00 [DBG] Connection id "0HNFEQD6L7C75", Request id "0HNFEQD6L7C75:00000019": started reading request body.
2025-09-08 13:36:39.500 +01:00 [DBG] Connection id "0HNFEQD6L7C75", Request id "0HNFEQD6L7C75:00000019": done reading request body.
2025-09-08 13:36:39.560 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:36:39.567 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:36:39.569 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 13:36:39.572 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.574 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.576 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:36:39.577 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:36:39.579 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:36:39.581 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:36:39.586 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:36:39.590 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:36:39.591 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.593 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 13:36:39.595 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.596 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:36:39.662 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.666 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.668 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:36:39.670 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:36:39.671 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:36:39.673 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:36:39.678 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:36:39.681 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.682 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 13:36:39.684 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.685 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:36:39.687 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:36:39.688 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:36:39.690 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:36:39.692 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:36:39.694 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:36:39.696 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 13:36:39.697 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 229.7468ms
2025-09-08 13:37:30.206 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOnly - null null
2025-09-08 13:37:30.216 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOnly'
2025-09-08 13:37:30.218 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 13:37:30.220 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:37:30.221 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:37:30.223 +01:00 [DBG] Authorization was successful.
2025-09-08 13:37:30.225 +01:00 [INF] Executing endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 13:37:30.227 +01:00 [INF] Executed endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 13:37:30.229 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOnly - 200 null text/plain; charset=utf-8 23.5578ms
2025-09-08 13:40:50.650 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 13:40:50.767 +01:00 [DBG] Hosting starting
2025-09-08 13:40:50.804 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 13:40:50.817 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 13:40:50.827 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 13:40:50.838 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 13:40:50.843 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 13:40:50.846 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 13:40:50.848 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 13:40:50.855 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 13:40:50.858 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 13:40:50.860 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 13:40:50.862 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 13:40:50.871 +01:00 [DBG] Middleware loaded
2025-09-08 13:40:50.874 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 13:40:50.876 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 13:40:51.020 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 13:40:51.026 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 13:40:51.041 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 13:40:51.226 +01:00 [DBG] Connection id "0HNFEQJORE268" accepted.
2025-09-08 13:40:51.229 +01:00 [DBG] Connection id "0HNFEQJORE268" started.
2025-09-08 13:40:51.243 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 13:40:51.244 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 13:40:51.245 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 13:40:51.246 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 13:40:51.247 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 13:40:51.248 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 13:40:51.257 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 13:40:51.264 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 13:40:51.278 +01:00 [DBG] Connection 0HNFEQJORE268 established using the following protocol: "Tls13"
2025-09-08 13:40:51.304 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 13:40:51.305 +01:00 [INF] Hosting environment: Development
2025-09-08 13:40:51.305 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 13:40:51.307 +01:00 [DBG] Hosting started
2025-09-08 13:40:51.325 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 13:40:51.434 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 13:40:51.436 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:40:51.496 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 13:40:51.501 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 13:40:51.508 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 13:40:51.510 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 13:40:51.515 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 193.0482ms
2025-09-08 13:40:51.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 13:40:51.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 13:40:51.540 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 13:40:51.542 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 17.6731ms
2025-09-08 13:40:51.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.8667ms
2025-09-08 13:40:51.702 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 13:40:51.709 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 13:40:51.710 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:40:51.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.0855ms
2025-09-08 13:41:52.226 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:41:52.280 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:41:52.283 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:41:52.296 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:41:52.358 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 13:41:52.365 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 13:41:52.369 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:41:52.376 +01:00 [DBG] Connection id "0HNFEQJORE268", Request id "0HNFEQJORE268:00000009": started reading request body.
2025-09-08 13:41:52.379 +01:00 [DBG] Connection id "0HNFEQJORE268", Request id "0HNFEQJORE268:00000009": done reading request body.
2025-09-08 13:41:52.492 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 13:41:52.988 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 13:41:52.992 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 13:41:53.113 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 13:41:53.221 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:41:53.310 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 13:41:53.591 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 13:41:53.641 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:41:53.661 +01:00 [DBG] Created DbConnection. (18ms).
2025-09-08 13:41:53.668 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:53.958 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:53.964 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:41:53.972 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 13:41:53.984 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-09-08 13:41:53.994 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:41:54.051 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:41:54.101 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:41:54.158 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.169 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 108ms reading results.
2025-09-08 13:41:54.176 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.186 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (10ms).
2025-09-08 13:41:54.284 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-08 13:41:54.324 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-08 13:41:54.329 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.333 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.336 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:41:54.337 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:41:54.340 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:41:54.341 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:41:54.347 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:41:54.351 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.353 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-09-08 13:41:54.355 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.357 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:41:54.387 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:41:54.393 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:41:54.398 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:41:54.404 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:41:54.409 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:41:54.413 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-08 13:41:54.416 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2189.9292ms
2025-09-08 13:42:27.956 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/TeacherOnly - null null
2025-09-08 13:42:27.968 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TeacherOnly'
2025-09-08 13:42:27.970 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/TeacherOnly => TeacherOnly'
2025-09-08 13:42:28.016 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:42:28.020 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:42:28.027 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:42:28.032 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 13:42:28.034 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/TeacherOnly - 403 0 null 78.1627ms
2025-09-08 13:42:57.719 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/TeacherOnly - null null
2025-09-08 13:42:57.791 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TeacherOnly'
2025-09-08 13:42:57.792 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/TeacherOnly => TeacherOnly'
2025-09-08 13:42:57.795 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:42:57.797 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:42:57.799 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:42:57.800 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 13:42:57.802 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/TeacherOnly - 403 0 null 83.1995ms
2025-09-08 13:43:14.507 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/TeacherOnly - null null
2025-09-08 13:43:14.512 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TeacherOnly'
2025-09-08 13:43:14.515 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/TeacherOnly => TeacherOnly'
2025-09-08 13:43:14.535 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 13:43:14.542 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'yRCXPKdXlwsq3M221EnQ-WlKd_M-rBWHTHX4lhtl1Zo'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-09-08 13:43:14.546 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-08 13:43:14.548 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:43:14.554 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 13:43:14.556 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/TeacherOnly - 401 0 null 49.087ms
2025-09-08 13:43:52.582 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/TeacherOnly - null null
2025-09-08 13:43:52.594 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TeacherOnly'
2025-09-08 13:43:52.596 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/TeacherOnly => TeacherOnly'
2025-09-08 13:43:52.597 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:43:52.598 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:43:52.599 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:43:52.601 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 13:43:52.603 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/TeacherOnly - 403 0 null 20.6834ms
2025-09-08 13:44:11.601 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 13:44:11.612 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 13:44:11.616 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:44:11.619 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 13:44:11.620 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:44:11.622 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:44:11.624 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:44:11.626 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:44:11.628 +01:00 [DBG] Connection id "0HNFEQJORE268", Request id "0HNFEQJORE268:00000013": started reading request body.
2025-09-08 13:44:11.629 +01:00 [DBG] Connection id "0HNFEQJORE268", Request id "0HNFEQJORE268:00000013": done reading request body.
2025-09-08 13:44:11.689 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 13:44:11.697 +01:00 [DBG] Creating DbConnection.
2025-09-08 13:44:11.700 +01:00 [DBG] Created DbConnection. (2ms).
2025-09-08 13:44:11.702 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.704 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.705 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:44:11.707 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:44:11.708 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 13:44:11.710 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:44:11.717 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 13:44:11.721 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 13:44:11.723 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.725 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-09-08 13:44:11.727 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.728 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:44:11.801 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.805 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.808 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 13:44:11.810 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 13:44:11.811 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 13:44:11.813 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:44:11.818 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 13:44:11.821 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.823 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-09-08 13:44:11.824 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.826 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 13:44:11.828 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 13:44:11.829 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 13:44:11.831 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 13:44:11.833 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 13:44:11.835 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 13:44:11.836 +01:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-08 13:44:11.837 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 236.9168ms
2025-09-08 13:44:46.878 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/TeacherOnly - null null
2025-09-08 13:44:46.889 +01:00 [DBG] 1 candidate(s) found for the request path '/api/TeacherOnly'
2025-09-08 13:44:46.890 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/TeacherOnly => TeacherOnly'
2025-09-08 13:44:46.892 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:44:46.894 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:44:46.896 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 13:44:46.897 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 13:44:46.899 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/TeacherOnly - 403 0 null 21.1684ms
2025-09-08 13:45:52.940 +01:00 [DBG] Connection id "0HNFEQJORE268" received FIN.
2025-09-08 13:45:52.957 +01:00 [DBG] Connection id "0HNFEQJORE268" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 13:45:52.958 +01:00 [DBG] Connection id "0HNFEQJORE268" is closed. The last processed stream ID was 21.
2025-09-08 13:45:52.961 +01:00 [DBG] The connection queue processing loop for 0HNFEQJORE268 completed.
2025-09-08 13:45:52.964 +01:00 [DBG] Connection id "0HNFEQJORE268" stopped.
2025-09-08 13:53:49.855 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 13:53:49.982 +01:00 [DBG] Hosting starting
2025-09-08 13:53:50.027 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 13:53:50.043 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 13:53:50.054 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 13:53:50.069 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 13:53:50.076 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 13:53:50.079 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 13:53:50.085 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 13:53:50.090 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 13:53:50.092 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 13:53:50.095 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 13:53:50.098 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 13:53:50.108 +01:00 [DBG] Middleware loaded
2025-09-08 13:53:50.111 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 13:53:50.115 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 13:53:50.261 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 13:53:50.267 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 13:53:50.280 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 13:53:50.408 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 13:53:50.412 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 13:53:50.414 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 13:53:50.416 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 13:53:50.417 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 13:53:50.418 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 13:53:50.425 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 13:53:50.434 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 13:53:50.473 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 13:53:50.475 +01:00 [INF] Hosting environment: Development
2025-09-08 13:53:50.477 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 13:53:50.478 +01:00 [DBG] Hosting started
2025-09-08 13:54:10.226 +01:00 [DBG] Connection id "0HNFEQR6V98RV" accepted.
2025-09-08 13:54:10.230 +01:00 [DBG] Connection id "0HNFEQR6V98RV" started.
2025-09-08 13:54:10.277 +01:00 [DBG] Connection 0HNFEQR6V98RV established using the following protocol: "Tls13"
2025-09-08 13:54:10.330 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 13:54:10.449 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 13:54:10.451 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:54:10.521 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 13:54:10.526 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 13:54:10.533 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 13:54:10.536 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 13:54:10.542 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 215.4147ms
2025-09-08 13:54:10.554 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 13:54:10.554 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 13:54:10.580 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 13:54:10.582 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 29.0256ms
2025-09-08 13:54:10.598 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.9535ms
2025-09-08 13:54:10.736 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 13:54:10.741 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 13:54:10.744 +01:00 [DBG] Request did not match any endpoints
2025-09-08 13:54:10.863 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.8338ms
2025-09-08 13:54:29.370 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOrTeacher - null null
2025-09-08 13:54:29.381 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOrTeacher'
2025-09-08 13:54:29.383 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOrTeacher'
2025-09-08 13:54:29.584 +01:00 [DBG] Successfully validated the token.
2025-09-08 13:54:29.588 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:54:29.593 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 13:54:29.598 +01:00 [DBG] Authorization was successful.
2025-09-08 13:54:29.601 +01:00 [INF] Executing endpoint 'HTTP: GET /api/AdminOrTeacher'
2025-09-08 13:54:29.605 +01:00 [INF] Executed endpoint 'HTTP: GET /api/AdminOrTeacher'
2025-09-08 13:54:29.608 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOrTeacher - 200 null text/plain; charset=utf-8 237.9086ms
2025-09-08 14:03:15.493 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 14:03:15.597 +01:00 [DBG] Hosting starting
2025-09-08 14:03:15.627 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 14:03:15.639 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 14:03:15.650 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 14:03:15.662 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 14:03:15.667 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 14:03:15.671 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 14:03:15.673 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 14:03:15.678 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 14:03:15.682 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 14:03:15.686 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 14:03:15.688 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 14:03:15.696 +01:00 [DBG] Middleware loaded
2025-09-08 14:03:15.701 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 14:03:15.704 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 14:03:15.850 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 14:03:15.855 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 14:03:15.868 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 14:03:16.048 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 14:03:16.051 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 14:03:16.053 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 14:03:16.054 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 14:03:16.056 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 14:03:16.057 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 14:03:16.070 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 14:03:16.080 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 14:03:16.134 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 14:03:16.135 +01:00 [INF] Hosting environment: Development
2025-09-08 14:03:16.137 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 14:03:16.138 +01:00 [DBG] Hosting started
2025-09-08 14:04:21.635 +01:00 [DBG] Connection id "0HNFER0T64MMF" accepted.
2025-09-08 14:04:21.678 +01:00 [DBG] Connection id "0HNFER0T64MMF" started.
2025-09-08 14:04:21.734 +01:00 [DBG] Connection 0HNFER0T64MMF established using the following protocol: "Tls13"
2025-09-08 14:04:21.792 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 77
2025-09-08 14:04:21.836 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 14:04:21.841 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:04:21.867 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 14:04:21.998 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:04:22.004 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:04:22.010 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:04:22.013 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:04:22.018 +01:00 [DBG] Connection id "0HNFER0T64MMF", Request id "0HNFER0T64MMF:00000001": started reading request body.
2025-09-08 14:04:22.021 +01:00 [DBG] Connection id "0HNFER0T64MMF", Request id "0HNFER0T64MMF:00000001": done reading request body.
2025-09-08 14:04:22.142 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 14:04:22.667 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 14:04:22.673 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 14:04:22.831 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 14:04:22.939 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 14:04:23.024 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 14:04:23.316 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 14:04:23.372 +01:00 [DBG] Creating DbConnection.
2025-09-08 14:04:23.398 +01:00 [DBG] Created DbConnection. (24ms).
2025-09-08 14:04:23.404 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:23.660 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:23.666 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 14:04:23.676 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-09-08 14:04:23.686 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-09-08 14:04:23.697 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 14:04:23.762 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 14:04:23.814 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 14:04:23.861 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:23.870 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 98ms reading results.
2025-09-08 14:04:23.876 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:23.883 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-08 14:04:23.970 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-08 14:04:24.012 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-08 14:04:24.020 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:24.024 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:24.026 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 14:04:24.027 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 14:04:24.029 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-08 14:04:24.031 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 14:04:24.070 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 14:04:24.082 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:24.084 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-08 14:04:24.086 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:24.088 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 14:04:24.101 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 14:04:24.106 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 14:04:24.111 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:04:24.119 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 14:04:24.125 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:04:24.129 +01:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-08 14:04:24.133 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2346.487ms
2025-09-08 14:05:05.791 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 14:05:05.964 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 14:05:05.967 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:05:06.036 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 14:05:06.039 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 14:05:06.048 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 14:05:06.051 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 14:05:06.052 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 261.5933ms
2025-09-08 14:05:06.062 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 14:05:06.062 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 14:05:06.099 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 14:05:06.102 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 40.232ms
2025-09-08 14:05:06.128 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.7389ms
2025-09-08 14:05:06.272 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 14:05:06.282 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 14:05:06.283 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:05:06.388 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.2665ms
2025-09-08 14:05:16.641 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/LibraryMembership - null null
2025-09-08 14:05:16.647 +01:00 [DBG] 1 candidate(s) found for the request path '/api/LibraryMembership'
2025-09-08 14:05:16.649 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/LibraryMembership'
2025-09-08 14:05:16.653 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 14:05:16.656 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-08 14:05:16.660 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=LibraryID
2025-09-08 14:05:16.665 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 14:05:16.667 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/LibraryMembership - 401 0 null 25.5853ms
2025-09-08 14:05:29.365 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/LibraryMembership - null null
2025-09-08 14:05:29.371 +01:00 [DBG] 1 candidate(s) found for the request path '/api/LibraryMembership'
2025-09-08 14:05:29.372 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/LibraryMembership'
2025-09-08 14:05:29.375 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:05:29.376 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:05:29.379 +01:00 [DBG] Authorization was successful.
2025-09-08 14:05:29.381 +01:00 [INF] Executing endpoint 'HTTP: GET /api/LibraryMembership'
2025-09-08 14:05:29.383 +01:00 [INF] Executed endpoint 'HTTP: GET /api/LibraryMembership'
2025-09-08 14:05:29.385 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/LibraryMembership - 200 null text/plain; charset=utf-8 20.8187ms
2025-09-08 14:05:37.156 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOrTeacher - null null
2025-09-08 14:05:37.162 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOrTeacher'
2025-09-08 14:05:37.164 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOrTeacher'
2025-09-08 14:05:37.166 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:05:37.167 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:05:37.170 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Teacher)
2025-09-08 14:05:37.173 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:05:37.175 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOrTeacher - 403 0 null 19.9565ms
2025-09-08 14:14:46.085 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 14:14:46.186 +01:00 [DBG] Hosting starting
2025-09-08 14:14:46.217 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 14:14:46.229 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 14:14:46.239 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 14:14:46.250 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 14:14:46.254 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 14:14:46.258 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 14:14:46.261 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 14:14:46.267 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 14:14:46.269 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 14:14:46.272 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 14:14:46.274 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 14:14:46.282 +01:00 [DBG] Middleware loaded
2025-09-08 14:14:46.285 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 14:14:46.286 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 14:14:46.415 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 14:14:46.419 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 14:14:46.431 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 14:14:46.566 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 14:14:46.569 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 14:14:46.571 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 14:14:46.572 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 14:14:46.573 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 14:14:46.575 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 14:14:46.582 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 14:14:46.590 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 14:14:46.629 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 14:14:46.631 +01:00 [INF] Hosting environment: Development
2025-09-08 14:14:46.633 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 14:14:46.634 +01:00 [DBG] Hosting started
2025-09-08 14:15:11.592 +01:00 [DBG] Connection id "0HNFER6USJSMU" accepted.
2025-09-08 14:15:11.636 +01:00 [DBG] Connection id "0HNFER6USJSMU" started.
2025-09-08 14:15:11.696 +01:00 [DBG] Connection 0HNFER6USJSMU established using the following protocol: "Tls13"
2025-09-08 14:15:11.756 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 14:15:11.869 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 14:15:11.872 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:15:11.940 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 14:15:11.945 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 14:15:11.952 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 14:15:11.954 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 14:15:11.959 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 208.2502ms
2025-09-08 14:15:11.968 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 14:15:11.970 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 14:15:12.027 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 14:15:12.030 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 59.2387ms
2025-09-08 14:15:12.052 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.082ms
2025-09-08 14:15:12.153 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 14:15:12.159 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 14:15:12.163 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:15:12.289 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.3589ms
2025-09-08 14:15:30.478 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/ApplyForMaternityLeave - null null
2025-09-08 14:15:30.488 +01:00 [DBG] 1 candidate(s) found for the request path '/api/ApplyForMaternityLeave'
2025-09-08 14:15:30.491 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/ApplyForMaternityLeave'
2025-09-08 14:15:30.634 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:46:39 PM', Current time (UTC): '9/8/2025 1:15:30 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 14:15:30.662 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:46:39 PM', Current time (UTC): '9/8/2025 1:15:30 PM'.
2025-09-08 14:15:30.669 +01:00 [DBG] Policy authentication schemes  did not succeed
2025-09-08 14:15:30.674 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=Gender and Claim.Value is one of the following values: (Female)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Teacher)
2025-09-08 14:15:30.682 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 14:15:30.685 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/ApplyForMaternityLeave - 401 0 null 207.0748ms
2025-09-08 14:15:52.689 +01:00 [DBG] Connection id "0HNFER6USJSMU" received FIN.
2025-09-08 14:15:52.702 +01:00 [DBG] Connection id "0HNFER6USJSMU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 14:15:52.704 +01:00 [DBG] Connection id "0HNFER6USJSMU" is closed. The last processed stream ID was 9.
2025-09-08 14:15:52.708 +01:00 [DBG] The connection queue processing loop for 0HNFER6USJSMU completed.
2025-09-08 14:15:52.712 +01:00 [DBG] Connection id "0HNFER6USJSMU" stopped.
2025-09-08 14:16:09.990 +01:00 [DBG] Connection id "0HNFER6USJSMV" accepted.
2025-09-08 14:16:09.993 +01:00 [DBG] Connection id "0HNFER6USJSMV" started.
2025-09-08 14:16:10.010 +01:00 [DBG] Connection 0HNFER6USJSMV established using the following protocol: "Tls13"
2025-09-08 14:16:10.014 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 73
2025-09-08 14:16:10.021 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 14:16:10.022 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:16:10.025 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 14:16:10.028 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:46:39 PM', Current time (UTC): '9/8/2025 1:16:10 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-08 14:16:10.031 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:46:39 PM', Current time (UTC): '9/8/2025 1:16:10 PM'.
2025-09-08 14:16:10.033 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/8/2025 12:46:39 PM', Current time (UTC): '9/8/2025 1:16:10 PM'.
2025-09-08 14:16:10.035 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:16:10.040 +01:00 [DBG] Connection id "0HNFER6USJSMV", Request id "0HNFER6USJSMV:00000001": started reading request body.
2025-09-08 14:16:10.042 +01:00 [DBG] Connection id "0HNFER6USJSMV", Request id "0HNFER6USJSMV:00000001": done reading request body.
2025-09-08 14:16:10.151 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 14:16:10.659 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 14:16:10.663 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 14:16:10.799 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 14:16:10.916 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 14:16:10.995 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 14:16:11.284 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 14:16:11.345 +01:00 [DBG] Creating DbConnection.
2025-09-08 14:16:11.368 +01:00 [DBG] Created DbConnection. (20ms).
2025-09-08 14:16:11.373 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:11.625 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:11.632 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 14:16:11.637 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 14:16:11.650 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-09-08 14:16:11.658 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 14:16:11.722 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 14:16:11.772 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 14:16:11.817 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:11.826 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 94ms reading results.
2025-09-08 14:16:11.833 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:11.840 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (7ms).
2025-09-08 14:16:11.930 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-08 14:16:11.975 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-08 14:16:11.980 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:11.983 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:11.985 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 14:16:11.986 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 14:16:11.987 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-08 14:16:11.989 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 14:16:11.998 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 14:16:12.002 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:12.004 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-08 14:16:12.007 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:12.009 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (2ms).
2025-09-08 14:16:12.023 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 14:16:12.029 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 14:16:12.034 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:16:12.038 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 14:16:12.043 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:16:12.047 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-08 14:16:12.050 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2035.3229ms
2025-09-08 14:16:35.424 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/ApplyForMaternityLeave - null null
2025-09-08 14:16:35.436 +01:00 [DBG] 1 candidate(s) found for the request path '/api/ApplyForMaternityLeave'
2025-09-08 14:16:35.438 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/ApplyForMaternityLeave'
2025-09-08 14:16:35.447 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:16:35.450 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:16:35.456 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=Gender and Claim.Value is one of the following values: (Female)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Teacher)
2025-09-08 14:16:35.460 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:16:35.461 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/ApplyForMaternityLeave - 403 0 null 37.2547ms
2025-09-08 14:20:37.842 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 14:20:37.965 +01:00 [DBG] Hosting starting
2025-09-08 14:20:37.993 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 14:20:38.006 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 14:20:38.016 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 14:20:38.027 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 14:20:38.033 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 14:20:38.037 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 14:20:38.040 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 14:20:38.046 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 14:20:38.048 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 14:20:38.051 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 14:20:38.053 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 14:20:38.060 +01:00 [DBG] Middleware loaded
2025-09-08 14:20:38.064 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 14:20:38.065 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 14:20:38.229 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 14:20:38.234 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 14:20:38.244 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 14:20:38.384 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 14:20:38.389 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 14:20:38.392 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 14:20:38.393 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 14:20:38.394 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 14:20:38.395 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 14:20:38.402 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 14:20:38.411 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 14:20:38.445 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 14:20:38.447 +01:00 [INF] Hosting environment: Development
2025-09-08 14:20:38.448 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 14:20:38.449 +01:00 [DBG] Hosting started
2025-09-08 14:20:39.906 +01:00 [DBG] Connection id "0HNFERA0NL78B" accepted.
2025-09-08 14:20:39.909 +01:00 [DBG] Connection id "0HNFERA0NL78B" started.
2025-09-08 14:20:39.954 +01:00 [DBG] Connection 0HNFERA0NL78B established using the following protocol: "Tls13"
2025-09-08 14:20:40.009 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 14:20:40.121 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 14:20:40.124 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:20:40.193 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 14:20:40.197 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 14:20:40.208 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 14:20:40.210 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 14:20:40.216 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 210.4435ms
2025-09-08 14:20:40.232 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 14:20:40.232 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 14:20:40.291 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 14:20:40.294 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 61.7043ms
2025-09-08 14:20:40.316 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.8766ms
2025-09-08 14:20:40.428 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 14:20:40.444 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 14:20:40.447 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:20:40.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 144.8356ms
2025-09-08 14:21:40.941 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7258/api/signin - application/json 75
2025-09-08 14:21:40.987 +01:00 [DBG] 1 candidate(s) found for the request path '/api/signin'
2025-09-08 14:21:40.991 +01:00 [DBG] Request matched endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:21:41.002 +01:00 [INF] No CORS policy found for the specified request.
2025-09-08 14:21:41.067 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 14:21:41.073 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-08 14:21:41.076 +01:00 [INF] Executing endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:21:41.082 +01:00 [DBG] Connection id "0HNFERA0NL78B", Request id "0HNFERA0NL78B:00000009": started reading request body.
2025-09-08 14:21:41.087 +01:00 [DBG] Connection id "0HNFERA0NL78B", Request id "0HNFERA0NL78B:00000009": done reading request body.
2025-09-08 14:21:41.198 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-08 14:21:41.702 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-08 14:21:41.706 +01:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-08 14:21:41.828 +01:00 [DBG] The property 'IdentityUser.Discriminator' was created in shadow state because there are no eligible CLR members with a matching name.
2025-09-08 14:21:41.941 +01:00 [DBG] Entity Framework Core 9.0.8 initialized 'CMSDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.7' with options: EngineType=SqlServer 
2025-09-08 14:21:42.015 +01:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-08 14:21:42.284 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Discriminator (no field, string) Shadow Required AfterSave:Throw MaxLength(13), 3], [Property: IdentityUser.Email (string) MaxLength(256), 4], [Property: IdentityUser.EmailConfirmed (bool) Required, 5], [Property: IdentityUser.LockoutEnabled (bool) Required, 6], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 7], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 8], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 9], [Property: IdentityUser.PasswordHash (string), 10], [Property: IdentityUser.PhoneNumber (string), 11], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 12], [Property: IdentityUser.SecurityStamp (string), 13], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 14], [Property: IdentityUser.UserName (string) MaxLength(256), 15], [Property: AppUser.DOB (DateOnly) Required, 16], [Property: AppUser.Fullname (string) Required, 17], [Property: AppUser.Gender (string) Required, 18], [Property: AppUser.LibraryID (int?), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Discriminator, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, a.DOB, a.Fullname, a.Gender, a.LibraryID
            FROM AspNetUsers AS a
            WHERE (a.Discriminator == N'AppUser') && (a.NormalizedEmail == @__normalizedEmail_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: IdentityUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = 
                    {
                        string discriminator;
                        discriminator = dataReader.GetString(3);
                        return switch (discriminator)
                        {
                            case "AppUser": 
                                [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]
                            default: 
                                {
                                    throw StructuralTypeShaperExpression.CreateUnableToDiscriminateException(
                                        type: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")], 
                                        discriminator: (object)discriminator);
                                    return null;
                                }
                        }
                    };
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]: 
                            {
                                shadowSnapshot1 = (ISnapshot)new Snapshot<string>(dataReader.GetString(3));
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetString(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(5);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(7) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(7);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(12);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(14);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                    instance.<DOB>k__BackingField = dataReader.IsDBNull(16) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(16);
                                    instance.<Fullname>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                    instance.<Gender>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                    instance.<LibraryID>k__BackingField = dataReader.IsDBNull(19) ? default(int?) : (int?)dataReader.GetInt32(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser Base: IdentityUser | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("CMSApi.Application.DTO.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-08 14:21:42.340 +01:00 [DBG] Creating DbConnection.
2025-09-08 14:21:42.361 +01:00 [DBG] Created DbConnection. (19ms).
2025-09-08 14:21:42.367 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.597 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.603 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 14:21:42.611 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-09-08 14:21:42.622 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-09-08 14:21:42.633 +01:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 14:21:42.693 +01:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[DOB], [a].[Fullname], [a].[Gender], [a].[LibraryID]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-08 14:21:42.744 +01:00 [DBG] Context 'CMSDbContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-08 14:21:42.792 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.802 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 97ms reading results.
2025-09-08 14:21:42.809 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.821 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (11ms).
2025-09-08 14:21:42.907 +01:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-08 14:21:42.945 +01:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: CMSApi.Infrastructure.Data.CMSDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-09-08 14:21:42.951 +01:00 [DBG] Opening connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.956 +01:00 [DBG] Opened connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.959 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-08 14:21:42.960 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-08 14:21:42.963 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-08 14:21:42.965 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 14:21:42.975 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-08 14:21:42.980 +01:00 [DBG] Closing data reader to 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.981 +01:00 [DBG] A data reader for 'CMSDb' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-09-08 14:21:42.984 +01:00 [DBG] Closing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:42.985 +01:00 [DBG] Closed connection to database 'CMSDb' on server 'localhost\SQLEXPRESS' (1ms).
2025-09-08 14:21:43.018 +01:00 [INF] Setting HTTP status code 200.
2025-09-08 14:21:43.024 +01:00 [INF] Writing value of type '<>f__AnonymousType14`1' as Json.
2025-09-08 14:21:43.028 +01:00 [INF] Executed endpoint 'HTTP: POST /api/signin => SignIn'
2025-09-08 14:21:43.036 +01:00 [DBG] 'CMSDbContext' disposed.
2025-09-08 14:21:43.042 +01:00 [DBG] Disposing connection to database 'CMSDb' on server 'localhost\SQLEXPRESS'.
2025-09-08 14:21:43.045 +01:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-09-08 14:21:43.047 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7258/api/signin - 200 null application/json; charset=utf-8 2105.7004ms
2025-09-08 14:22:30.801 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/Under10sAndFemale - null null
2025-09-08 14:22:30.817 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Under10sAndFemale'
2025-09-08 14:22:30.818 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/Under10sAndFemale'
2025-09-08 14:22:30.862 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:22:30.865 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:22:30.872 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=Gender and Claim.Value is one of the following values: (Female)
2025-09-08 14:22:30.876 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:22:30.877 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/Under10sAndFemale - 403 0 null 76.7946ms
2025-09-08 14:26:45.199 +01:00 [DBG] Connection id "0HNFERA0NL78B" received FIN.
2025-09-08 14:26:45.268 +01:00 [DBG] Connection id "0HNFERA0NL78B" is closed. The last processed stream ID was 11.
2025-09-08 14:26:45.269 +01:00 [DBG] The connection queue processing loop for 0HNFERA0NL78B completed.
2025-09-08 14:26:45.275 +01:00 [DBG] Connection id "0HNFERA0NL78B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 14:26:45.299 +01:00 [DBG] Connection id "0HNFERA0NL78B" stopped.
2025-09-08 14:30:31.815 +01:00 [DBG] Connection id "0HNFERA0NL78C" accepted.
2025-09-08 14:30:31.854 +01:00 [DBG] Connection id "0HNFERA0NL78C" started.
2025-09-08 14:30:31.863 +01:00 [DBG] Connection 0HNFERA0NL78C established using the following protocol: "Tls13"
2025-09-08 14:30:31.869 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/ApplyForMaternityLeave - null null
2025-09-08 14:30:31.890 +01:00 [DBG] 1 candidate(s) found for the request path '/api/ApplyForMaternityLeave'
2025-09-08 14:30:31.896 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/ApplyForMaternityLeave'
2025-09-08 14:30:31.928 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:30:31.932 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:30:31.944 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=Gender and Claim.Value is one of the following values: (Female)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Teacher)
2025-09-08 14:30:31.949 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:30:31.954 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/ApplyForMaternityLeave - 403 0 null 85.041ms
2025-09-08 14:31:01.312 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/api/AdminOnly - null null
2025-09-08 14:31:01.338 +01:00 [DBG] 1 candidate(s) found for the request path '/api/AdminOnly'
2025-09-08 14:31:01.343 +01:00 [DBG] Request matched endpoint 'HTTP: GET /api/AdminOnly => AdminOnly'
2025-09-08 14:31:01.348 +01:00 [DBG] Successfully validated the token.
2025-09-08 14:31:01.353 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-08 14:31:01.361 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-08 14:31:01.366 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:31:01.373 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/api/AdminOnly - 403 0 null 60.4593ms
2025-09-08 14:32:40.173 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 14:32:40.184 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 14:32:40.191 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 14:32:40.208 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 35.3452ms
2025-09-08 14:32:40.241 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.0184ms
2025-09-08 14:32:40.388 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 14:32:40.395 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 14:32:40.398 +01:00 [DBG] Request did not match any endpoints
2025-09-08 14:32:40.412 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.2931ms
2025-09-08 14:33:31.640 +01:00 [DBG] Connection id "0HNFERA0NL78C" received FIN.
2025-09-08 14:33:31.643 +01:00 [DBG] Connection id "0HNFERA0NL78C" is closed. The last processed stream ID was 9.
2025-09-08 14:33:31.652 +01:00 [DBG] The connection queue processing loop for 0HNFERA0NL78C completed.
2025-09-08 14:33:31.653 +01:00 [DBG] Connection id "0HNFERA0NL78C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 14:33:31.669 +01:00 [DBG] Connection id "0HNFERA0NL78C" stopped.
2025-09-08 16:44:33.095 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 16:44:33.221 +01:00 [DBG] Hosting starting
2025-09-08 16:44:33.268 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 16:44:33.285 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 16:44:33.298 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 16:44:33.311 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 16:44:33.320 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 16:44:33.325 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 16:44:33.329 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 16:44:33.339 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 16:44:33.344 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 16:44:33.348 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 16:44:33.351 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 16:44:33.362 +01:00 [DBG] Middleware loaded
2025-09-08 16:44:33.367 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 16:44:33.370 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 16:44:33.526 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 16:44:33.531 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 16:44:33.543 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 16:44:33.740 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 16:44:33.744 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 16:44:33.747 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 16:44:33.749 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 16:44:33.751 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 16:44:33.752 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 16:44:33.759 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 16:44:33.769 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 16:44:33.808 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 16:44:33.811 +01:00 [INF] Hosting environment: Development
2025-09-08 16:44:33.814 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 16:44:33.816 +01:00 [DBG] Hosting started
2025-09-08 23:58:17.811 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-09-08 23:58:18.015 +01:00 [DBG] Hosting starting
2025-09-08 23:58:18.076 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 23:58:18.104 +01:00 [DBG] Reading data from file 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys\key-8647a598-9118-4347-ac0a-36d9777c35dd.xml'.
2025-09-08 23:58:18.131 +01:00 [DBG] Found key {8647a598-9118-4347-ac0a-36d9777c35dd}.
2025-09-08 23:58:18.155 +01:00 [DBG] Considering key {8647a598-9118-4347-ac0a-36d9777c35dd} with expiration date 2025-11-16 09:50:12Z as default key.
2025-09-08 23:58:18.164 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 23:58:18.172 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-08 23:58:18.176 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-08 23:58:18.185 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-08 23:58:18.190 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-08 23:58:18.194 +01:00 [DBG] Using key {8647a598-9118-4347-ac0a-36d9777c35dd} as the default key.
2025-09-08 23:58:18.197 +01:00 [DBG] Key ring with default key {8647a598-9118-4347-ac0a-36d9777c35dd} was loaded during application startup.
2025-09-08 23:58:18.211 +01:00 [DBG] Middleware loaded
2025-09-08 23:58:18.217 +01:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16497 B).
2025-09-08 23:58:18.223 +01:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-08 23:58:18.523 +01:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-09-08 23:58:18.530 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-08 23:58:18.551 +01:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-08 23:58:18.735 +01:00 [DBG] Connection id "0HNFF5CPS0D8G" accepted.
2025-09-08 23:58:18.781 +01:00 [INF] Now listening on: https://localhost:7258
2025-09-08 23:58:18.833 +01:00 [DBG] Connection id "0HNFF5CPS0D8G" started.
2025-09-08 23:58:18.837 +01:00 [INF] Now listening on: http://localhost:5191
2025-09-08 23:58:18.874 +01:00 [DBG] Loaded hosting startup assembly CMSApi
2025-09-08 23:58:18.897 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-09-08 23:58:18.915 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-08 23:58:18.919 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-09-08 23:58:18.940 +01:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 23:58:18.948 +01:00 [DBG] Connection id "0HNFF5CPS0D8H" accepted.
2025-09-08 23:58:18.975 +01:00 [DBG] Connection 0HNFF5CPS0D8G established using the following protocol: "Tls13"
2025-09-08 23:58:18.987 +01:00 [DBG] Connection id "0HNFF5CPS0D8H" started.
2025-09-08 23:58:18.990 +01:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-09-08 23:58:18.997 +01:00 [DBG] Connection 0HNFF5CPS0D8H established using the following protocol: "Tls13"
2025-09-08 23:58:19.075 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 23:58:19.078 +01:00 [INF] Hosting environment: Development
2025-09-08 23:58:19.080 +01:00 [INF] Content root path: C:\Users\HP\Documents\repos\CMSApi\CMSApi
2025-09-08 23:58:19.082 +01:00 [DBG] Hosting started
2025-09-08 23:58:19.082 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/index.html - null null
2025-09-08 23:58:19.797 +01:00 [DBG] Connection id "0HNFF5CPS0D8H" received FIN.
2025-09-08 23:58:19.821 +01:00 [DBG] The connection queue processing loop for 0HNFF5CPS0D8H completed.
2025-09-08 23:58:19.824 +01:00 [DBG] Connection id "0HNFF5CPS0D8H" is closed. The last processed stream ID was 0.
2025-09-08 23:58:19.828 +01:00 [DBG] Connection id "0HNFF5CPS0D8H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 23:58:19.839 +01:00 [DBG] Connection id "0HNFF5CPS0D8H" stopped.
2025-09-08 23:58:19.877 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-09-08 23:58:19.881 +01:00 [DBG] Request did not match any endpoints
2025-09-08 23:58:19.980 +01:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-09-08 23:58:19.985 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-08 23:58:19.996 +01:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-09-08 23:58:20.007 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-08 23:58:20.019 +01:00 [DBG] Connection id "0HNFF5CPS0D8G" received FIN.
2025-09-08 23:58:20.020 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/index.html - 200 null text/html;charset=utf-8 947.3274ms
2025-09-08 23:58:20.024 +01:00 [DBG] Connection id "0HNFF5CPS0D8G" is closed. The last processed stream ID was 1.
2025-09-08 23:58:20.047 +01:00 [DBG] Connection id "0HNFF5CPS0D8G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 23:58:20.050 +01:00 [DBG] The connection queue processing loop for 0HNFF5CPS0D8G completed.
2025-09-08 23:58:20.054 +01:00 [DBG] Connection id "0HNFF5CPS0D8G" stopped.
2025-09-08 23:58:21.811 +01:00 [DBG] Connection id "0HNFF5CPS0D8I" accepted.
2025-09-08 23:58:21.816 +01:00 [DBG] Connection id "0HNFF5CPS0D8I" started.
2025-09-08 23:58:21.824 +01:00 [DBG] Connection 0HNFF5CPS0D8I established using the following protocol: "Tls13"
2025-09-08 23:58:21.833 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - null null
2025-09-08 23:58:21.833 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/_vs/browserLink - null null
2025-09-08 23:58:21.862 +01:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-08 23:58:21.875 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 41.6244ms
2025-09-08 23:58:22.016 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/_vs/browserLink - 200 null text/javascript; charset=UTF-8 182.7363ms
2025-09-08 23:58:22.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - null null
2025-09-08 23:58:22.100 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-09-08 23:58:22.102 +01:00 [DBG] Request did not match any endpoints
2025-09-08 23:58:22.413 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7258/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 320.7745ms
2025-09-08 23:58:37.185 +01:00 [DBG] Connection id "0HNFF5CPS0D8I" received FIN.
2025-09-08 23:58:37.202 +01:00 [DBG] Connection id "0HNFF5CPS0D8I" is closed. The last processed stream ID was 5.
2025-09-08 23:58:37.203 +01:00 [DBG] The connection queue processing loop for 0HNFF5CPS0D8I completed.
2025-09-08 23:58:37.206 +01:00 [DBG] Connection id "0HNFF5CPS0D8I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-08 23:58:37.225 +01:00 [DBG] Connection id "0HNFF5CPS0D8I" stopped.
